//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,(function(){"use strict";var t,e;function n(){return t.apply(null,arguments)}function s(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function i(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function r(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(o(t,e))return!1;return!0}function a(t){return void 0===t}function c(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function l(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function u(t,e){var n,s=[],i=t.length;for(n=0;n<i;++n)s.push(e(t[n],n));return s}function h(t,e){for(var n in e)o(e,n)&&(t[n]=e[n]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function d(t,e,n,s){return Re(t,e,n,s,!0).utc()}function p(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function f(t){var n=null,s=!1,i=t._d&&!isNaN(t._d.getTime());return i&&(n=p(t),s=e.call(n.parsedDateParts,(function(t){return null!=t})),i=n.overflow<0&&!n.empty&&!n.invalidEra&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&s),t._strict&&(i=i&&0===n.charsLeftOver&&0===n.unusedTokens.length&&void 0===n.bigHour)),null!=Object.isFrozen&&Object.isFrozen(t)?i:(t._isValid=i,t._isValid)}function m(t){var e=d(NaN);return null!=t?h(p(e),t):p(e).userInvalidated=!0,e}e=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),s=n.length>>>0;for(e=0;e<s;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var g=n.momentProperties=[],_=!1;function v(t,e){var n,s,i,o=g.length;if(a(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),a(e._i)||(t._i=e._i),a(e._f)||(t._f=e._f),a(e._l)||(t._l=e._l),a(e._strict)||(t._strict=e._strict),a(e._tzm)||(t._tzm=e._tzm),a(e._isUTC)||(t._isUTC=e._isUTC),a(e._offset)||(t._offset=e._offset),a(e._pf)||(t._pf=p(e)),a(e._locale)||(t._locale=e._locale),o>0)for(n=0;n<o;n++)a(i=e[s=g[n]])||(t[s]=i);return t}function y(t){v(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===_&&(_=!0,n.updateOffset(this),_=!1)}function x(t){return t instanceof y||null!=t&&null!=t._isAMomentObject}function b(t){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function w(t,e){var s=!0;return h((function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,t),s){var i,r,a,c=[],l=arguments.length;for(r=0;r<l;r++){if(i="","object"==typeof arguments[r]){for(a in i+="\n["+r+"] ",arguments[0])o(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[r];c.push(i)}b(t+"\nArguments: "+Array.prototype.slice.call(c).join("")+"\n"+(new Error).stack),s=!1}return e.apply(this,arguments)}),e)}var T,S={};function k(t,e){null!=n.deprecationHandler&&n.deprecationHandler(t,e),S[t]||(b(e),S[t]=!0)}function C(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function D(t,e){var n,s=h({},t);for(n in e)o(e,n)&&(i(t[n])&&i(e[n])?(s[n]={},h(s[n],t[n]),h(s[n],e[n])):null!=e[n]?s[n]=e[n]:delete s[n]);for(n in t)o(t,n)&&!o(e,n)&&i(t[n])&&(s[n]=h({},s[n]));return s}function A(t){null!=t&&this.set(t)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,T=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)o(t,e)&&n.push(e);return n};function M(t,e,n){var s=""+Math.abs(t),i=e-s.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var O=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,E=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},N={};function q(t,e,n,s){var i=s;"string"==typeof s&&(i=function(){return this[s]()}),t&&(N[t]=i),e&&(N[e[0]]=function(){return M(i.apply(this,arguments),e[1],e[2])}),n&&(N[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function I(t,e){return t.isValid()?(e=P(e,t.localeData()),R[e]=R[e]||function(t){var e,n,s,i=t.match(O);for(e=0,n=i.length;e<n;e++)N[i[e]]?i[e]=N[i[e]]:i[e]=(s=i[e]).match(/\[[\s\S]/)?s.replace(/^\[|\]$/g,""):s.replace(/\\/g,"");return function(e){var s,o="";for(s=0;s<n;s++)o+=C(i[s])?i[s].call(e,t):i[s];return o}}(e),R[e](t)):t.localeData().invalidDate()}function P(t,e){var n=5;function s(t){return e.longDateFormat(t)||t}for(E.lastIndex=0;n>=0&&E.test(t);)t=t.replace(E,s),E.lastIndex=0,n-=1;return t}var F={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function V(t){return"string"==typeof t?F[t]||F[t.toLowerCase()]:void 0}function j(t){var e,n,s={};for(n in t)o(t,n)&&(e=V(n))&&(s[e]=t[n]);return s}var L={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};var Y,W=/\d/,z=/\d\d/,H=/\d{3}/,B=/\d{4}/,U=/[+-]?\d{6}/,G=/\d\d?/,X=/\d\d\d\d?/,$=/\d\d\d\d\d\d?/,Z=/\d{1,3}/,Q=/\d{1,4}/,J=/[+-]?\d{1,6}/,K=/\d+/,tt=/[+-]?\d+/,et=/Z|[+-]\d\d:?\d\d/gi,nt=/Z|[+-]\d\d(?::?\d\d)?/gi,st=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,it=/^[1-9]\d?/,ot=/^([1-9]\d|\d)/;function rt(t,e,n){Y[t]=C(e)?e:function(t,s){return t&&n?n:e}}function at(t,e){return o(Y,t)?Y[t](e._strict,e._locale):new RegExp(ct(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,s,i){return e||n||s||i}))))}function ct(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function lt(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function ut(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=lt(e)),n}Y={};var ht={};function dt(t,e){var n,s,i=e;for("string"==typeof t&&(t=[t]),c(e)&&(i=function(t,n){n[e]=ut(t)}),s=t.length,n=0;n<s;n++)ht[t[n]]=i}function pt(t,e){dt(t,(function(t,n,s,i){s._w=s._w||{},e(t,s._w,s,i)}))}function ft(t,e,n){null!=e&&o(ht,t)&&ht[t](e,n._a,n,t)}function mt(t){return t%4==0&&t%100!=0||t%400==0}var gt=0,_t=1,vt=2,yt=3,xt=4,bt=5,wt=6,Tt=7,St=8;function kt(t){return mt(t)?366:365}q("Y",0,0,(function(){var t=this.year();return t<=9999?M(t,4):"+"+t})),q(0,["YY",2],0,(function(){return this.year()%100})),q(0,["YYYY",4],0,"year"),q(0,["YYYYY",5],0,"year"),q(0,["YYYYYY",6,!0],0,"year"),rt("Y",tt),rt("YY",G,z),rt("YYYY",Q,B),rt("YYYYY",J,U),rt("YYYYYY",J,U),dt(["YYYYY","YYYYYY"],gt),dt("YYYY",(function(t,e){e[gt]=2===t.length?n.parseTwoDigitYear(t):ut(t)})),dt("YY",(function(t,e){e[gt]=n.parseTwoDigitYear(t)})),dt("Y",(function(t,e){e[gt]=parseInt(t,10)})),n.parseTwoDigitYear=function(t){return ut(t)+(ut(t)>68?1900:2e3)};var Ct,Dt=At("FullYear",!0);function At(t,e){return function(s){return null!=s?(Ot(this,t,s),n.updateOffset(this,e),this):Mt(this,t)}}function Mt(t,e){if(!t.isValid())return NaN;var n=t._d,s=t._isUTC;switch(e){case"Milliseconds":return s?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return s?n.getUTCSeconds():n.getSeconds();case"Minutes":return s?n.getUTCMinutes():n.getMinutes();case"Hours":return s?n.getUTCHours():n.getHours();case"Date":return s?n.getUTCDate():n.getDate();case"Day":return s?n.getUTCDay():n.getDay();case"Month":return s?n.getUTCMonth():n.getMonth();case"FullYear":return s?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Ot(t,e,n){var s,i,o,r,a;if(t.isValid()&&!isNaN(n)){switch(s=t._d,i=t._isUTC,e){case"Milliseconds":return void(i?s.setUTCMilliseconds(n):s.setMilliseconds(n));case"Seconds":return void(i?s.setUTCSeconds(n):s.setSeconds(n));case"Minutes":return void(i?s.setUTCMinutes(n):s.setMinutes(n));case"Hours":return void(i?s.setUTCHours(n):s.setHours(n));case"Date":return void(i?s.setUTCDate(n):s.setDate(n));case"FullYear":break;default:return}o=n,r=t.month(),a=29!==(a=t.date())||1!==r||mt(o)?a:28,i?s.setUTCFullYear(o,r,a):s.setFullYear(o,r,a)}}function Et(t,e){if(isNaN(t)||isNaN(e))return NaN;var n,s=(e%(n=12)+n)%n;return t+=(e-s)/12,1===s?mt(t)?29:28:31-s%7%2}Ct=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},q("M",["MM",2],"Mo",(function(){return this.month()+1})),q("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),q("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),rt("M",G,it),rt("MM",G,z),rt("MMM",(function(t,e){return e.monthsShortRegex(t)})),rt("MMMM",(function(t,e){return e.monthsRegex(t)})),dt(["M","MM"],(function(t,e){e[_t]=ut(t)-1})),dt(["MMM","MMMM"],(function(t,e,n,s){var i=n._locale.monthsParse(t,s,n._strict);null!=i?e[_t]=i:p(n).invalidMonth=t}));var Rt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Nt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),qt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,It=st,Pt=st;function Ft(t,e,n){var s,i,o,r=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)o=d([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=Ct.call(this._shortMonthsParse,r))?i:null:-1!==(i=Ct.call(this._longMonthsParse,r))?i:null:"MMM"===e?-1!==(i=Ct.call(this._shortMonthsParse,r))||-1!==(i=Ct.call(this._longMonthsParse,r))?i:null:-1!==(i=Ct.call(this._longMonthsParse,r))||-1!==(i=Ct.call(this._shortMonthsParse,r))?i:null}function Vt(t,e){if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=ut(e);else if(!c(e=t.localeData().monthsParse(e)))return t;var n=e,s=t.date();return s=s<29?s:Math.min(s,Et(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,s):t._d.setMonth(n,s),t}function jt(t){return null!=t?(Vt(this,t),n.updateOffset(this,!0),this):Mt(this,"Month")}function Lt(){function t(t,e){return e.length-t.length}var e,n,s,i,o=[],r=[],a=[];for(e=0;e<12;e++)n=d([2e3,e]),s=ct(this.monthsShort(n,"")),i=ct(this.months(n,"")),o.push(s),r.push(i),a.push(i),a.push(s);o.sort(t),r.sort(t),a.sort(t),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Yt(t,e,n,s,i,o,r){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,s,i,o,r),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,s,i,o,r),a}function Wt(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function zt(t,e,n){var s=7+e-n;return-((7+Wt(t,0,s).getUTCDay()-e)%7)+s-1}function Ht(t,e,n,s,i){var o,r,a=1+7*(e-1)+(7+n-s)%7+zt(t,s,i);return a<=0?r=kt(o=t-1)+a:a>kt(t)?(o=t+1,r=a-kt(t)):(o=t,r=a),{year:o,dayOfYear:r}}function Bt(t,e,n){var s,i,o=zt(t.year(),e,n),r=Math.floor((t.dayOfYear()-o-1)/7)+1;return r<1?s=r+Ut(i=t.year()-1,e,n):r>Ut(t.year(),e,n)?(s=r-Ut(t.year(),e,n),i=t.year()+1):(i=t.year(),s=r),{week:s,year:i}}function Ut(t,e,n){var s=zt(t,e,n),i=zt(t+1,e,n);return(kt(t)-s+i)/7}q("w",["ww",2],"wo","week"),q("W",["WW",2],"Wo","isoWeek"),rt("w",G,it),rt("ww",G,z),rt("W",G,it),rt("WW",G,z),pt(["w","ww","W","WW"],(function(t,e,n,s){e[s.substr(0,1)]=ut(t)}));function Gt(t,e){return t.slice(e,7).concat(t.slice(0,e))}q("d",0,"do","day"),q("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),q("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),q("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),q("e",0,0,"weekday"),q("E",0,0,"isoWeekday"),rt("d",G),rt("e",G),rt("E",G),rt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),rt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),rt("dddd",(function(t,e){return e.weekdaysRegex(t)})),pt(["dd","ddd","dddd"],(function(t,e,n,s){var i=n._locale.weekdaysParse(t,s,n._strict);null!=i?e.d=i:p(n).invalidWeekday=t})),pt(["d","e","E"],(function(t,e,n,s){e[s]=ut(t)}));var Xt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),$t="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Zt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Qt=st,Jt=st,Kt=st;function te(t,e,n){var s,i,o,r=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)o=d([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=Ct.call(this._weekdaysParse,r))?i:null:"ddd"===e?-1!==(i=Ct.call(this._shortWeekdaysParse,r))?i:null:-1!==(i=Ct.call(this._minWeekdaysParse,r))?i:null:"dddd"===e?-1!==(i=Ct.call(this._weekdaysParse,r))||-1!==(i=Ct.call(this._shortWeekdaysParse,r))||-1!==(i=Ct.call(this._minWeekdaysParse,r))?i:null:"ddd"===e?-1!==(i=Ct.call(this._shortWeekdaysParse,r))||-1!==(i=Ct.call(this._weekdaysParse,r))||-1!==(i=Ct.call(this._minWeekdaysParse,r))?i:null:-1!==(i=Ct.call(this._minWeekdaysParse,r))||-1!==(i=Ct.call(this._weekdaysParse,r))||-1!==(i=Ct.call(this._shortWeekdaysParse,r))?i:null}function ee(){function t(t,e){return e.length-t.length}var e,n,s,i,o,r=[],a=[],c=[],l=[];for(e=0;e<7;e++)n=d([2e3,1]).day(e),s=ct(this.weekdaysMin(n,"")),i=ct(this.weekdaysShort(n,"")),o=ct(this.weekdays(n,"")),r.push(s),a.push(i),c.push(o),l.push(s),l.push(i),l.push(o);r.sort(t),a.sort(t),c.sort(t),l.sort(t),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function ne(){return this.hours()%12||12}function se(t,e){q(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function ie(t,e){return e._meridiemParse}q("H",["HH",2],0,"hour"),q("h",["hh",2],0,ne),q("k",["kk",2],0,(function(){return this.hours()||24})),q("hmm",0,0,(function(){return""+ne.apply(this)+M(this.minutes(),2)})),q("hmmss",0,0,(function(){return""+ne.apply(this)+M(this.minutes(),2)+M(this.seconds(),2)})),q("Hmm",0,0,(function(){return""+this.hours()+M(this.minutes(),2)})),q("Hmmss",0,0,(function(){return""+this.hours()+M(this.minutes(),2)+M(this.seconds(),2)})),se("a",!0),se("A",!1),rt("a",ie),rt("A",ie),rt("H",G,ot),rt("h",G,it),rt("k",G,it),rt("HH",G,z),rt("hh",G,z),rt("kk",G,z),rt("hmm",X),rt("hmmss",$),rt("Hmm",X),rt("Hmmss",$),dt(["H","HH"],yt),dt(["k","kk"],(function(t,e,n){var s=ut(t);e[yt]=24===s?0:s})),dt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),dt(["h","hh"],(function(t,e,n){e[yt]=ut(t),p(n).bigHour=!0})),dt("hmm",(function(t,e,n){var s=t.length-2;e[yt]=ut(t.substr(0,s)),e[xt]=ut(t.substr(s)),p(n).bigHour=!0})),dt("hmmss",(function(t,e,n){var s=t.length-4,i=t.length-2;e[yt]=ut(t.substr(0,s)),e[xt]=ut(t.substr(s,2)),e[bt]=ut(t.substr(i)),p(n).bigHour=!0})),dt("Hmm",(function(t,e,n){var s=t.length-2;e[yt]=ut(t.substr(0,s)),e[xt]=ut(t.substr(s))})),dt("Hmmss",(function(t,e,n){var s=t.length-4,i=t.length-2;e[yt]=ut(t.substr(0,s)),e[xt]=ut(t.substr(s,2)),e[bt]=ut(t.substr(i))}));var oe=At("Hours",!0);var re,ae={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Rt,monthsShort:Nt,week:{dow:0,doy:6},weekdays:Xt,weekdaysMin:Zt,weekdaysShort:$t,meridiemParse:/[ap]\.?m?\.?/i},ce={},le={};function ue(t,e){var n,s=Math.min(t.length,e.length);for(n=0;n<s;n+=1)if(t[n]!==e[n])return n;return s}function he(t){return t?t.toLowerCase().replace("_","-"):t}function de(t){var e=null;if(void 0===ce[t]&&"undefined"!=typeof module&&module&&module.exports&&function(t){return!(!t||!t.match("^[^/\\\\]*$"))}(t))try{e=re._abbr,require("./locale/"+t),pe(e)}catch(e){ce[t]=null}return ce[t]}function pe(t,e){var n;return t&&((n=a(e)?me(t):fe(t,e))?re=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),re._abbr}function fe(t,e){if(null!==e){var n,s=ae;if(e.abbr=t,null!=ce[t])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=ce[t]._config;else if(null!=e.parentLocale)if(null!=ce[e.parentLocale])s=ce[e.parentLocale]._config;else{if(null==(n=de(e.parentLocale)))return le[e.parentLocale]||(le[e.parentLocale]=[]),le[e.parentLocale].push({name:t,config:e}),null;s=n._config}return ce[t]=new A(D(s,e)),le[t]&&le[t].forEach((function(t){fe(t.name,t.config)})),pe(t),ce[t]}return delete ce[t],null}function me(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return re;if(!s(t)){if(e=de(t))return e;t=[t]}return function(t){for(var e,n,s,i,o=0;o<t.length;){for(e=(i=he(t[o]).split("-")).length,n=(n=he(t[o+1]))?n.split("-"):null;e>0;){if(s=de(i.slice(0,e).join("-")))return s;if(n&&n.length>=e&&ue(i,n)>=e-1)break;e--}o++}return re}(t)}function ge(t){var e,n=t._a;return n&&-2===p(t).overflow&&(e=n[_t]<0||n[_t]>11?_t:n[vt]<1||n[vt]>Et(n[gt],n[_t])?vt:n[yt]<0||n[yt]>24||24===n[yt]&&(0!==n[xt]||0!==n[bt]||0!==n[wt])?yt:n[xt]<0||n[xt]>59?xt:n[bt]<0||n[bt]>59?bt:n[wt]<0||n[wt]>999?wt:-1,p(t)._overflowDayOfYear&&(e<gt||e>vt)&&(e=vt),p(t)._overflowWeeks&&-1===e&&(e=Tt),p(t)._overflowWeekday&&-1===e&&(e=St),p(t).overflow=e),t}var _e=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ve=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ye=/Z|[+-]\d\d(?::?\d\d)?/,xe=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],be=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],we=/^\/?Date\((-?\d+)/i,Te=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Se={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ke(t){var e,n,s,i,o,r,a=t._i,c=_e.exec(a)||ve.exec(a),l=xe.length,u=be.length;if(c){for(p(t).iso=!0,e=0,n=l;e<n;e++)if(xe[e][1].exec(c[1])){i=xe[e][0],s=!1!==xe[e][2];break}if(null==i)return void(t._isValid=!1);if(c[3]){for(e=0,n=u;e<n;e++)if(be[e][1].exec(c[3])){o=(c[2]||" ")+be[e][0];break}if(null==o)return void(t._isValid=!1)}if(!s&&null!=o)return void(t._isValid=!1);if(c[4]){if(!ye.exec(c[4]))return void(t._isValid=!1);r="Z"}t._f=i+(o||"")+(r||""),Oe(t)}else t._isValid=!1}function Ce(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function De(t){var e,n,s,i,o,r,a,c,l=Te.exec(t._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(l){if(n=l[4],s=l[3],i=l[2],o=l[5],r=l[6],a=l[7],c=[Ce(n),Nt.indexOf(s),parseInt(i,10),parseInt(o,10),parseInt(r,10)],a&&c.push(parseInt(a,10)),e=c,!function(t,e,n){return!t||$t.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(p(n).weekdayMismatch=!0,n._isValid=!1,!1)}(l[1],e,t))return;t._a=e,t._tzm=function(t,e,n){if(t)return Se[t];if(e)return 0;var s=parseInt(n,10),i=s%100;return(s-i)/100*60+i}(l[8],l[9],l[10]),t._d=Wt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0}else t._isValid=!1}function Ae(t,e,n){return null!=t?t:null!=e?e:n}function Me(t){var e,s,i,o,r,a=[];if(!t._d){for(i=function(t){var e=new Date(n.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[vt]&&null==t._a[_t]&&function(t){var e,n,s,i,o,r,a,c,l;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(o=1,r=4,n=Ae(e.GG,t._a[gt],Bt(Ne(),1,4).year),s=Ae(e.W,1),((i=Ae(e.E,1))<1||i>7)&&(c=!0)):(o=t._locale._week.dow,r=t._locale._week.doy,l=Bt(Ne(),o,r),n=Ae(e.gg,t._a[gt],l.year),s=Ae(e.w,l.week),null!=e.d?((i=e.d)<0||i>6)&&(c=!0):null!=e.e?(i=e.e+o,(e.e<0||e.e>6)&&(c=!0)):i=o);s<1||s>Ut(n,o,r)?p(t)._overflowWeeks=!0:null!=c?p(t)._overflowWeekday=!0:(a=Ht(n,s,i,o,r),t._a[gt]=a.year,t._dayOfYear=a.dayOfYear)}(t),null!=t._dayOfYear&&(r=Ae(t._a[gt],i[gt]),(t._dayOfYear>kt(r)||0===t._dayOfYear)&&(p(t)._overflowDayOfYear=!0),s=Wt(r,0,t._dayOfYear),t._a[_t]=s.getUTCMonth(),t._a[vt]=s.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=i[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[yt]&&0===t._a[xt]&&0===t._a[bt]&&0===t._a[wt]&&(t._nextDay=!0,t._a[yt]=0),t._d=(t._useUTC?Wt:Yt).apply(null,a),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[yt]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(p(t).weekdayMismatch=!0)}}function Oe(t){if(t._f!==n.ISO_8601)if(t._f!==n.RFC_2822){t._a=[],p(t).empty=!0;var e,s,i,o,r,a,c,l=""+t._i,u=l.length,h=0;for(c=(i=P(t._f,t._locale).match(O)||[]).length,e=0;e<c;e++)o=i[e],(s=(l.match(at(o,t))||[])[0])&&((r=l.substr(0,l.indexOf(s))).length>0&&p(t).unusedInput.push(r),l=l.slice(l.indexOf(s)+s.length),h+=s.length),N[o]?(s?p(t).empty=!1:p(t).unusedTokens.push(o),ft(o,s,t)):t._strict&&!s&&p(t).unusedTokens.push(o);p(t).charsLeftOver=u-h,l.length>0&&p(t).unusedInput.push(l),t._a[yt]<=12&&!0===p(t).bigHour&&t._a[yt]>0&&(p(t).bigHour=void 0),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[yt]=function(t,e,n){var s;if(null==n)return e;return null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((s=t.isPM(n))&&e<12&&(e+=12),s||12!==e||(e=0),e):e}(t._locale,t._a[yt],t._meridiem),null!==(a=p(t).era)&&(t._a[gt]=t._locale.erasConvertYear(a,t._a[gt])),Me(t),ge(t)}else De(t);else ke(t)}function Ee(t){var e=t._i,o=t._f;return t._locale=t._locale||me(t._l),null===e||void 0===o&&""===e?m({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),x(e)?new y(ge(e)):(l(e)?t._d=e:s(o)?function(t){var e,n,s,i,o,r,a=!1,c=t._f.length;if(0===c)return p(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<c;i++)o=0,r=!1,e=v({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],Oe(e),f(e)&&(r=!0),o+=p(e).charsLeftOver,o+=10*p(e).unusedTokens.length,p(e).score=o,a?o<s&&(s=o,n=e):(null==s||o<s||r)&&(s=o,n=e,r&&(a=!0));h(t,n||e)}(t):o?Oe(t):function(t){var e=t._i;a(e)?t._d=new Date(n.now()):l(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=we.exec(t._i);null===e?(ke(t),!1===t._isValid&&(delete t._isValid,De(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:n.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):s(e)?(t._a=u(e.slice(0),(function(t){return parseInt(t,10)})),Me(t)):i(e)?function(t){if(!t._d){var e=j(t._i),n=void 0===e.day?e.date:e.day;t._a=u([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),Me(t)}}(t):c(e)?t._d=new Date(e):n.createFromInputFallback(t)}(t),f(t)||(t._d=null),t))}function Re(t,e,n,o,a){var c,l={};return!0!==e&&!1!==e||(o=e,e=void 0),!0!==n&&!1!==n||(o=n,n=void 0),(i(t)&&r(t)||s(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=a,l._l=n,l._i=t,l._f=e,l._strict=o,(c=new y(ge(Ee(l))))._nextDay&&(c.add(1,"d"),c._nextDay=void 0),c}function Ne(t,e,n,s){return Re(t,e,n,s,!1)}n.createFromInputFallback=w("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),n.ISO_8601=function(){},n.RFC_2822=function(){};var qe=w("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Ne.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:m()})),Ie=w("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Ne.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:m()}));function Pe(t,e){var n,i;if(1===e.length&&s(e[0])&&(e=e[0]),!e.length)return Ne();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}var Fe=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ve(t){var e=j(t),n=e.year||0,s=e.quarter||0,i=e.month||0,r=e.week||e.isoWeek||0,a=e.day||0,c=e.hour||0,l=e.minute||0,u=e.second||0,h=e.millisecond||0;this._isValid=function(t){var e,n,s=!1,i=Fe.length;for(e in t)if(o(t,e)&&(-1===Ct.call(Fe,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<i;++n)if(t[Fe[n]]){if(s)return!1;parseFloat(t[Fe[n]])!==ut(t[Fe[n]])&&(s=!0)}return!0}(e),this._milliseconds=+h+1e3*u+6e4*l+1e3*c*60*60,this._days=+a+7*r,this._months=+i+3*s+12*n,this._data={},this._locale=me(),this._bubble()}function je(t){return t instanceof Ve}function Le(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Ye(t,e){q(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+M(~~(t/60),2)+e+M(~~t%60,2)}))}Ye("Z",":"),Ye("ZZ",""),rt("Z",nt),rt("ZZ",nt),dt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=ze(nt,t)}));var We=/([\+\-]|\d\d)/gi;function ze(t,e){var n,s,i=(e||"").match(t);return null===i?null:0===(s=60*(n=((i[i.length-1]||[])+"").match(We)||["-",0,0])[1]+ut(n[2]))?0:"+"===n[0]?s:-s}function He(t,e){var s,i;return e._isUTC?(s=e.clone(),i=(x(t)||l(t)?t.valueOf():Ne(t).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+i),n.updateOffset(s,!1),s):Ne(t).local()}function Be(t){return-Math.round(t._d.getTimezoneOffset())}function Ue(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}n.updateOffset=function(){};var Ge=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Xe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function $e(t,e){var n,s,i,r=t,a=null;return je(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:c(t)||!isNaN(+t)?(r={},e?r[e]=+t:r.milliseconds=+t):(a=Ge.exec(t))?(n="-"===a[1]?-1:1,r={y:0,d:ut(a[vt])*n,h:ut(a[yt])*n,m:ut(a[xt])*n,s:ut(a[bt])*n,ms:ut(Le(1e3*a[wt]))*n}):(a=Xe.exec(t))?(n="-"===a[1]?-1:1,r={y:Ze(a[2],n),M:Ze(a[3],n),w:Ze(a[4],n),d:Ze(a[5],n),h:Ze(a[6],n),m:Ze(a[7],n),s:Ze(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(i=function(t,e){var n;if(!t.isValid()||!e.isValid())return{milliseconds:0,months:0};e=He(e,t),t.isBefore(e)?n=Qe(t,e):((n=Qe(e,t)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(Ne(r.from),Ne(r.to)),(r={}).ms=i.milliseconds,r.M=i.months),s=new Ve(r),je(t)&&o(t,"_locale")&&(s._locale=t._locale),je(t)&&o(t,"_isValid")&&(s._isValid=t._isValid),s}function Ze(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Qe(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Je(t,e){return function(n,s){var i;return null===s||isNaN(+s)||(k(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=s,s=i),Ke(this,$e(n,s),t),this}}function Ke(t,e,s,i){var o=e._milliseconds,r=Le(e._days),a=Le(e._months);t.isValid()&&(i=null==i||i,a&&Vt(t,Mt(t,"Month")+a*s),r&&Ot(t,"Date",Mt(t,"Date")+r*s),o&&t._d.setTime(t._d.valueOf()+o*s),i&&n.updateOffset(t,r||a))}$e.fn=Ve.prototype,$e.invalid=function(){return $e(NaN)};var tn=Je(1,"add"),en=Je(-1,"subtract");function nn(t){return"string"==typeof t||t instanceof String}function sn(t){return x(t)||l(t)||nn(t)||c(t)||function(t){var e=s(t),n=!1;e&&(n=0===t.filter((function(e){return!c(e)&&nn(t)})).length);return e&&n}(t)||function(t){var e,n,s=i(t)&&!r(t),a=!1,c=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],l=c.length;for(e=0;e<l;e+=1)n=c[e],a=a||o(t,n);return s&&a}(t)||null==t}function on(t,e){if(t.date()<e.date())return-on(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(n,"months");return-(n+(e-s<0?(e-s)/(s-t.clone().add(n-1,"months")):(e-s)/(t.clone().add(n+1,"months")-s)))||0}function rn(t){var e;return void 0===t?this._locale._abbr:(null!=(e=me(t))&&(this._locale=e),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var an=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function cn(){return this._locale}var ln=1e3,un=6e4,hn=36e5,dn=126227808e5;function pn(t,e){return(t%e+e)%e}function fn(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-dn:new Date(t,e,n).valueOf()}function mn(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-dn:Date.UTC(t,e,n)}function gn(t,e){return e.erasAbbrRegex(t)}function _n(){var t,e,n,s,i,o=[],r=[],a=[],c=[],l=this.eras();for(t=0,e=l.length;t<e;++t)n=ct(l[t].name),s=ct(l[t].abbr),i=ct(l[t].narrow),r.push(n),o.push(s),a.push(i),c.push(n),c.push(s),c.push(i);this._erasRegex=new RegExp("^("+c.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function vn(t,e){q(0,[t,t.length],0,e)}function yn(t,e,n,s,i){var o;return null==t?Bt(this,s,i).year:(e>(o=Ut(t,s,i))&&(e=o),xn.call(this,t,e,n,s,i))}function xn(t,e,n,s,i){var o=Ht(t,e,n,s,i),r=Wt(o.year,0,o.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}q("N",0,0,"eraAbbr"),q("NN",0,0,"eraAbbr"),q("NNN",0,0,"eraAbbr"),q("NNNN",0,0,"eraName"),q("NNNNN",0,0,"eraNarrow"),q("y",["y",1],"yo","eraYear"),q("y",["yy",2],0,"eraYear"),q("y",["yyy",3],0,"eraYear"),q("y",["yyyy",4],0,"eraYear"),rt("N",gn),rt("NN",gn),rt("NNN",gn),rt("NNNN",(function(t,e){return e.erasNameRegex(t)})),rt("NNNNN",(function(t,e){return e.erasNarrowRegex(t)})),dt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,s){var i=n._locale.erasParse(t,s,n._strict);i?p(n).era=i:p(n).invalidEra=t})),rt("y",K),rt("yy",K),rt("yyy",K),rt("yyyy",K),rt("yo",(function(t,e){return e._eraYearOrdinalRegex||K})),dt(["y","yy","yyy","yyyy"],gt),dt(["yo"],(function(t,e,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[gt]=n._locale.eraYearOrdinalParse(t,i):e[gt]=parseInt(t,10)})),q(0,["gg",2],0,(function(){return this.weekYear()%100})),q(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),vn("gggg","weekYear"),vn("ggggg","weekYear"),vn("GGGG","isoWeekYear"),vn("GGGGG","isoWeekYear"),rt("G",tt),rt("g",tt),rt("GG",G,z),rt("gg",G,z),rt("GGGG",Q,B),rt("gggg",Q,B),rt("GGGGG",J,U),rt("ggggg",J,U),pt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,s){e[s.substr(0,2)]=ut(t)})),pt(["gg","GG"],(function(t,e,s,i){e[i]=n.parseTwoDigitYear(t)})),q("Q",0,"Qo","quarter"),rt("Q",W),dt("Q",(function(t,e){e[_t]=3*(ut(t)-1)})),q("D",["DD",2],"Do","date"),rt("D",G,it),rt("DD",G,z),rt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),dt(["D","DD"],vt),dt("Do",(function(t,e){e[vt]=ut(t.match(G)[0])}));var bn=At("Date",!0);q("DDD",["DDDD",3],"DDDo","dayOfYear"),rt("DDD",Z),rt("DDDD",H),dt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=ut(t)})),q("m",["mm",2],0,"minute"),rt("m",G,ot),rt("mm",G,z),dt(["m","mm"],xt);var wn=At("Minutes",!1);q("s",["ss",2],0,"second"),rt("s",G,ot),rt("ss",G,z),dt(["s","ss"],bt);var Tn,Sn,kn=At("Seconds",!1);for(q("S",0,0,(function(){return~~(this.millisecond()/100)})),q(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),q(0,["SSS",3],0,"millisecond"),q(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),q(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),q(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),q(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),q(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),q(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),rt("S",Z,W),rt("SS",Z,z),rt("SSS",Z,H),Tn="SSSS";Tn.length<=9;Tn+="S")rt(Tn,K);function Cn(t,e){e[wt]=ut(1e3*("0."+t))}for(Tn="S";Tn.length<=9;Tn+="S")dt(Tn,Cn);Sn=At("Milliseconds",!1),q("z",0,0,"zoneAbbr"),q("zz",0,0,"zoneName");var Dn=y.prototype;function An(t){return t}Dn.add=tn,Dn.calendar=function(t,e){1===arguments.length&&(arguments[0]?sn(arguments[0])?(t=arguments[0],e=void 0):function(t){var e,n=i(t)&&!r(t),s=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<a.length;e+=1)s=s||o(t,a[e]);return n&&s}(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var s=t||Ne(),a=He(s,this).startOf("day"),c=n.calendarFormat(this,a)||"sameElse",l=e&&(C(e[c])?e[c].call(this,s):e[c]);return this.format(l||this.localeData().calendar(c,this,Ne(s)))},Dn.clone=function(){return new y(this)},Dn.diff=function(t,e,n){var s,i,o;if(!this.isValid())return NaN;if(!(s=He(t,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),e=V(e)){case"year":o=on(this,s)/12;break;case"month":o=on(this,s);break;case"quarter":o=on(this,s)/3;break;case"second":o=(this-s)/1e3;break;case"minute":o=(this-s)/6e4;break;case"hour":o=(this-s)/36e5;break;case"day":o=(this-s-i)/864e5;break;case"week":o=(this-s-i)/6048e5;break;default:o=this-s}return n?o:lt(o)},Dn.endOf=function(t){var e,s;if(void 0===(t=V(t))||"millisecond"===t||!this.isValid())return this;switch(s=this._isUTC?mn:fn,t){case"year":e=s(this.year()+1,0,1)-1;break;case"quarter":e=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=s(this.year(),this.month()+1,1)-1;break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=hn-pn(e+(this._isUTC?0:this.utcOffset()*un),hn)-1;break;case"minute":e=this._d.valueOf(),e+=un-pn(e,un)-1;break;case"second":e=this._d.valueOf(),e+=ln-pn(e,ln)-1}return this._d.setTime(e),n.updateOffset(this,!0),this},Dn.format=function(t){t||(t=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var e=I(this,t);return this.localeData().postformat(e)},Dn.from=function(t,e){return this.isValid()&&(x(t)&&t.isValid()||Ne(t).isValid())?$e({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Dn.fromNow=function(t){return this.from(Ne(),t)},Dn.to=function(t,e){return this.isValid()&&(x(t)&&t.isValid()||Ne(t).isValid())?$e({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Dn.toNow=function(t){return this.to(Ne(),t)},Dn.get=function(t){return C(this[t=V(t)])?this[t]():this},Dn.invalidAt=function(){return p(this).overflow},Dn.isAfter=function(t,e){var n=x(t)?t:Ne(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=V(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},Dn.isBefore=function(t,e){var n=x(t)?t:Ne(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=V(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},Dn.isBetween=function(t,e,n,s){var i=x(t)?t:Ne(t),o=x(e)?e:Ne(e);return!!(this.isValid()&&i.isValid()&&o.isValid())&&(("("===(s=s||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===s[1]?this.isBefore(o,n):!this.isAfter(o,n)))},Dn.isSame=function(t,e){var n,s=x(t)?t:Ne(t);return!(!this.isValid()||!s.isValid())&&("millisecond"===(e=V(e)||"millisecond")?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},Dn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},Dn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},Dn.isValid=function(){return f(this)},Dn.lang=an,Dn.locale=rn,Dn.localeData=cn,Dn.max=Ie,Dn.min=qe,Dn.parsingFlags=function(){return h({},p(this))},Dn.set=function(t,e){if("object"==typeof t){var n,s=function(t){var e,n=[];for(e in t)o(t,e)&&n.push({unit:e,priority:L[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}(t=j(t)),i=s.length;for(n=0;n<i;n++)this[s[n].unit](t[s[n].unit])}else if(C(this[t=V(t)]))return this[t](e);return this},Dn.startOf=function(t){var e,s;if(void 0===(t=V(t))||"millisecond"===t||!this.isValid())return this;switch(s=this._isUTC?mn:fn,t){case"year":e=s(this.year(),0,1);break;case"quarter":e=s(this.year(),this.month()-this.month()%3,1);break;case"month":e=s(this.year(),this.month(),1);break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=s(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=pn(e+(this._isUTC?0:this.utcOffset()*un),hn);break;case"minute":e=this._d.valueOf(),e-=pn(e,un);break;case"second":e=this._d.valueOf(),e-=pn(e,ln)}return this._d.setTime(e),n.updateOffset(this,!0),this},Dn.subtract=en,Dn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},Dn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},Dn.toDate=function(){return new Date(this.valueOf())},Dn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?I(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",I(n,"Z")):I(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Dn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n,s="moment",i="";return this.isLocal()||(s=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),t="["+s+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY","-MM-DD[T]HH:mm:ss.SSS",n=i+'[")]',this.format(t+e+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(Dn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Dn.toJSON=function(){return this.isValid()?this.toISOString():null},Dn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Dn.unix=function(){return Math.floor(this.valueOf()/1e3)},Dn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Dn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Dn.eraName=function(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until)return s[t].name;if(s[t].until<=n&&n<=s[t].since)return s[t].name}return""},Dn.eraNarrow=function(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until)return s[t].narrow;if(s[t].until<=n&&n<=s[t].since)return s[t].narrow}return""},Dn.eraAbbr=function(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until)return s[t].abbr;if(s[t].until<=n&&n<=s[t].since)return s[t].abbr}return""},Dn.eraYear=function(){var t,e,s,i,o=this.localeData().eras();for(t=0,e=o.length;t<e;++t)if(s=o[t].since<=o[t].until?1:-1,i=this.clone().startOf("day").valueOf(),o[t].since<=i&&i<=o[t].until||o[t].until<=i&&i<=o[t].since)return(this.year()-n(o[t].since).year())*s+o[t].offset;return this.year()},Dn.year=Dt,Dn.isLeapYear=function(){return mt(this.year())},Dn.weekYear=function(t){return yn.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)},Dn.isoWeekYear=function(t){return yn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},Dn.quarter=Dn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},Dn.month=jt,Dn.daysInMonth=function(){return Et(this.year(),this.month())},Dn.week=Dn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},Dn.isoWeek=Dn.isoWeeks=function(t){var e=Bt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},Dn.weeksInYear=function(){var t=this.localeData()._week;return Ut(this.year(),t.dow,t.doy)},Dn.weeksInWeekYear=function(){var t=this.localeData()._week;return Ut(this.weekYear(),t.dow,t.doy)},Dn.isoWeeksInYear=function(){return Ut(this.year(),1,4)},Dn.isoWeeksInISOWeekYear=function(){return Ut(this.isoWeekYear(),1,4)},Dn.date=bn,Dn.day=Dn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=Mt(this,"Day");return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},Dn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},Dn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},Dn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},Dn.hour=Dn.hours=oe,Dn.minute=Dn.minutes=wn,Dn.second=Dn.seconds=kn,Dn.millisecond=Dn.milliseconds=Sn,Dn.utcOffset=function(t,e,s){var i,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=ze(nt,t)))return this}else Math.abs(t)<16&&!s&&(t*=60);return!this._isUTC&&e&&(i=Be(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!e||this._changeInProgress?Ke(this,$e(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Be(this)},Dn.utc=function(t){return this.utcOffset(0,t)},Dn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Be(this),"m")),this},Dn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=ze(et,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},Dn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Ne(t).utcOffset():0,(this.utcOffset()-t)%60==0)},Dn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Dn.isLocal=function(){return!!this.isValid()&&!this._isUTC},Dn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Dn.isUtc=Ue,Dn.isUTC=Ue,Dn.zoneAbbr=function(){return this._isUTC?"UTC":""},Dn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Dn.dates=w("dates accessor is deprecated. Use date instead.",bn),Dn.months=w("months accessor is deprecated. Use month instead",jt),Dn.years=w("years accessor is deprecated. Use year instead",Dt),Dn.zone=w("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),Dn.isDSTShifted=w("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var t,e={};return v(e,this),(e=Ee(e))._a?(t=e._isUTC?d(e._a):Ne(e._a),this._isDSTShifted=this.isValid()&&function(t,e,n){var s,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),r=0;for(s=0;s<i;s++)(n&&t[s]!==e[s]||!n&&ut(t[s])!==ut(e[s]))&&r++;return r+o}(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var Mn=A.prototype;function On(t,e,n,s){var i=me(),o=d().set(s,e);return i[n](o,t)}function En(t,e,n){if(c(t)&&(e=t,t=void 0),t=t||"",null!=e)return On(t,e,n,"month");var s,i=[];for(s=0;s<12;s++)i[s]=On(t,s,n,"month");return i}function Rn(t,e,n,s){"boolean"==typeof t?(c(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,c(e)&&(n=e,e=void 0),e=e||"");var i,o=me(),r=t?o._week.dow:0,a=[];if(null!=n)return On(e,(n+r)%7,s,"day");for(i=0;i<7;i++)a[i]=On(e,(i+r)%7,s,"day");return a}Mn.calendar=function(t,e,n){var s=this._calendar[t]||this._calendar.sameElse;return C(s)?s.call(e,n):s},Mn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(O).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])},Mn.invalidDate=function(){return this._invalidDate},Mn.ordinal=function(t){return this._ordinal.replace("%d",t)},Mn.preparse=An,Mn.postformat=An,Mn.relativeTime=function(t,e,n,s){var i=this._relativeTime[n];return C(i)?i(t,e,n,s):i.replace(/%d/i,t)},Mn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return C(n)?n(e):n.replace(/%s/i,e)},Mn.set=function(t){var e,n;for(n in t)o(t,n)&&(C(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Mn.eras=function(t,e){var s,i,o,r=this._eras||me("en")._eras;for(s=0,i=r.length;s<i;++s){if("string"==typeof r[s].since)o=n(r[s].since).startOf("day"),r[s].since=o.valueOf();switch(typeof r[s].until){case"undefined":r[s].until=1/0;break;case"string":o=n(r[s].until).startOf("day").valueOf(),r[s].until=o.valueOf()}}return r},Mn.erasParse=function(t,e,n){var s,i,o,r,a,c=this.eras();for(t=t.toUpperCase(),s=0,i=c.length;s<i;++s)if(o=c[s].name.toUpperCase(),r=c[s].abbr.toUpperCase(),a=c[s].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(r===t)return c[s];break;case"NNNN":if(o===t)return c[s];break;case"NNNNN":if(a===t)return c[s]}else if([o,r,a].indexOf(t)>=0)return c[s]},Mn.erasConvertYear=function(t,e){var s=t.since<=t.until?1:-1;return void 0===e?n(t.since).year():n(t.since).year()+(e-t.offset)*s},Mn.erasAbbrRegex=function(t){return o(this,"_erasAbbrRegex")||_n.call(this),t?this._erasAbbrRegex:this._erasRegex},Mn.erasNameRegex=function(t){return o(this,"_erasNameRegex")||_n.call(this),t?this._erasNameRegex:this._erasRegex},Mn.erasNarrowRegex=function(t){return o(this,"_erasNarrowRegex")||_n.call(this),t?this._erasNarrowRegex:this._erasRegex},Mn.months=function(t,e){return t?s(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||qt).test(e)?"format":"standalone"][t.month()]:s(this._months)?this._months:this._months.standalone},Mn.monthsShort=function(t,e){return t?s(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[qt.test(e)?"format":"standalone"][t.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Mn.monthsParse=function(t,e,n){var s,i,o;if(this._monthsParseExact)return Ft.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=d([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[s].test(t))return s;if(n&&"MMM"===e&&this._shortMonthsParse[s].test(t))return s;if(!n&&this._monthsParse[s].test(t))return s}},Mn.monthsRegex=function(t){return this._monthsParseExact?(o(this,"_monthsRegex")||Lt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=Pt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},Mn.monthsShortRegex=function(t){return this._monthsParseExact?(o(this,"_monthsRegex")||Lt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=It),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},Mn.week=function(t){return Bt(t,this._week.dow,this._week.doy).week},Mn.firstDayOfYear=function(){return this._week.doy},Mn.firstDayOfWeek=function(){return this._week.dow},Mn.weekdays=function(t,e){var n=s(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Gt(n,this._week.dow):t?n[t.day()]:n},Mn.weekdaysMin=function(t){return!0===t?Gt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},Mn.weekdaysShort=function(t){return!0===t?Gt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},Mn.weekdaysParse=function(t,e,n){var s,i,o;if(this._weekdaysParseExact)return te.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=d([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[s].test(t))return s;if(n&&"ddd"===e&&this._shortWeekdaysParse[s].test(t))return s;if(n&&"dd"===e&&this._minWeekdaysParse[s].test(t))return s;if(!n&&this._weekdaysParse[s].test(t))return s}},Mn.weekdaysRegex=function(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ee.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Qt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},Mn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ee.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Jt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Mn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ee.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Kt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Mn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},Mn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},pe("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===ut(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),n.lang=w("moment.lang is deprecated. Use moment.locale instead.",pe),n.langData=w("moment.langData is deprecated. Use moment.localeData instead.",me);var Nn=Math.abs;function qn(t,e,n,s){var i=$e(e,n);return t._milliseconds+=s*i._milliseconds,t._days+=s*i._days,t._months+=s*i._months,t._bubble()}function In(t){return t<0?Math.floor(t):Math.ceil(t)}function Pn(t){return 4800*t/146097}function Fn(t){return 146097*t/4800}function Vn(t){return function(){return this.as(t)}}var jn=Vn("ms"),Ln=Vn("s"),Yn=Vn("m"),Wn=Vn("h"),zn=Vn("d"),Hn=Vn("w"),Bn=Vn("M"),Un=Vn("Q"),Gn=Vn("y"),Xn=jn;function $n(t){return function(){return this.isValid()?this._data[t]:NaN}}var Zn=$n("milliseconds"),Qn=$n("seconds"),Jn=$n("minutes"),Kn=$n("hours"),ts=$n("days"),es=$n("months"),ns=$n("years");var ss=Math.round,is={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function os(t,e,n,s,i){return i.relativeTime(e||1,!!n,t,s)}var rs=Math.abs;function as(t){return(t>0)-(t<0)||+t}function cs(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,s,i,o,r,a,c=rs(this._milliseconds)/1e3,l=rs(this._days),u=rs(this._months),h=this.asSeconds();return h?(t=lt(c/60),e=lt(t/60),c%=60,t%=60,n=lt(u/12),u%=12,s=c?c.toFixed(3).replace(/\.?0+$/,""):"",i=h<0?"-":"",o=as(this._months)!==as(h)?"-":"",r=as(this._days)!==as(h)?"-":"",a=as(this._milliseconds)!==as(h)?"-":"",i+"P"+(n?o+n+"Y":"")+(u?o+u+"M":"")+(l?r+l+"D":"")+(e||t||c?"T":"")+(e?a+e+"H":"")+(t?a+t+"M":"")+(c?a+s+"S":"")):"P0D"}var ls=Ve.prototype;return ls.isValid=function(){return this._isValid},ls.abs=function(){var t=this._data;return this._milliseconds=Nn(this._milliseconds),this._days=Nn(this._days),this._months=Nn(this._months),t.milliseconds=Nn(t.milliseconds),t.seconds=Nn(t.seconds),t.minutes=Nn(t.minutes),t.hours=Nn(t.hours),t.months=Nn(t.months),t.years=Nn(t.years),this},ls.add=function(t,e){return qn(this,t,e,1)},ls.subtract=function(t,e){return qn(this,t,e,-1)},ls.as=function(t){if(!this.isValid())return NaN;var e,n,s=this._milliseconds;if("month"===(t=V(t))||"quarter"===t||"year"===t)switch(e=this._days+s/864e5,n=this._months+Pn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Fn(this._months)),t){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return 24*e+s/36e5;case"minute":return 1440*e+s/6e4;case"second":return 86400*e+s/1e3;case"millisecond":return Math.floor(864e5*e)+s;default:throw new Error("Unknown unit "+t)}},ls.asMilliseconds=jn,ls.asSeconds=Ln,ls.asMinutes=Yn,ls.asHours=Wn,ls.asDays=zn,ls.asWeeks=Hn,ls.asMonths=Bn,ls.asQuarters=Un,ls.asYears=Gn,ls.valueOf=Xn,ls._bubble=function(){var t,e,n,s,i,o=this._milliseconds,r=this._days,a=this._months,c=this._data;return o>=0&&r>=0&&a>=0||o<=0&&r<=0&&a<=0||(o+=864e5*In(Fn(a)+r),r=0,a=0),c.milliseconds=o%1e3,t=lt(o/1e3),c.seconds=t%60,e=lt(t/60),c.minutes=e%60,n=lt(e/60),c.hours=n%24,r+=lt(n/24),a+=i=lt(Pn(r)),r-=In(Fn(i)),s=lt(a/12),a%=12,c.days=r,c.months=a,c.years=s,this},ls.clone=function(){return $e(this)},ls.get=function(t){return t=V(t),this.isValid()?this[t+"s"]():NaN},ls.milliseconds=Zn,ls.seconds=Qn,ls.minutes=Jn,ls.hours=Kn,ls.days=ts,ls.weeks=function(){return lt(this.days()/7)},ls.months=es,ls.years=ns,ls.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,s,i=!1,o=is;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(i=t),"object"==typeof e&&(o=Object.assign({},is,e),null!=e.s&&null==e.ss&&(o.ss=e.s-1)),s=function(t,e,n,s){var i=$e(t).abs(),o=ss(i.as("s")),r=ss(i.as("m")),a=ss(i.as("h")),c=ss(i.as("d")),l=ss(i.as("M")),u=ss(i.as("w")),h=ss(i.as("y")),d=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||r<=1&&["m"]||r<n.m&&["mm",r]||a<=1&&["h"]||a<n.h&&["hh",a]||c<=1&&["d"]||c<n.d&&["dd",c];return null!=n.w&&(d=d||u<=1&&["w"]||u<n.w&&["ww",u]),(d=d||l<=1&&["M"]||l<n.M&&["MM",l]||h<=1&&["y"]||["yy",h])[2]=e,d[3]=+t>0,d[4]=s,os.apply(null,d)}(this,!i,o,n=this.localeData()),i&&(s=n.pastFuture(+this,s)),n.postformat(s)},ls.toISOString=cs,ls.toString=cs,ls.toJSON=cs,ls.locale=rn,ls.localeData=cn,ls.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",cs),ls.lang=an,q("X",0,0,"unix"),q("x",0,0,"valueOf"),rt("x",tt),rt("X",/[+-]?\d+(\.\d{1,3})?/),dt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),dt("x",(function(t,e,n){n._d=new Date(ut(t))})),
//! moment.js
n.version="2.30.1",t=Ne,n.fn=Dn,n.min=function(){return Pe("isBefore",[].slice.call(arguments,0))},n.max=function(){return Pe("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=d,n.unix=function(t){return Ne(1e3*t)},n.months=function(t,e){return En(t,e,"months")},n.isDate=l,n.locale=pe,n.invalid=m,n.duration=$e,n.isMoment=x,n.weekdays=function(t,e,n){return Rn(t,e,n,"weekdays")},n.parseZone=function(){return Ne.apply(null,arguments).parseZone()},n.localeData=me,n.isDuration=je,n.monthsShort=function(t,e){return En(t,e,"monthsShort")},n.weekdaysMin=function(t,e,n){return Rn(t,e,n,"weekdaysMin")},n.defineLocale=fe,n.updateLocale=function(t,e){if(null!=e){var n,s,i=ae;null!=ce[t]&&null!=ce[t].parentLocale?ce[t].set(D(ce[t]._config,e)):(null!=(s=de(t))&&(i=s._config),e=D(i,e),null==s&&(e.abbr=t),(n=new A(e)).parentLocale=ce[t],ce[t]=n),pe(t)}else null!=ce[t]&&(null!=ce[t].parentLocale?(ce[t]=ce[t].parentLocale,t===pe()&&pe(t)):null!=ce[t]&&delete ce[t]);return ce[t]},n.locales=function(){return T(ce)},n.weekdaysShort=function(t,e,n){return Rn(t,e,n,"weekdaysShort")},n.normalizeUnits=V,n.relativeTimeRounding=function(t){return void 0===t?ss:"function"==typeof t&&(ss=t,!0)},n.relativeTimeThreshold=function(t,e){return void 0!==is[t]&&(void 0===e?is[t]:(is[t]=e,"s"===t&&(is.ss=e-1),!0))},n.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},n.prototype=Dn,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Sortable=e()}(this,(function(){"use strict";function t(t,e){var n,s=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)),s}function e(e){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?t(Object(s),!0).forEach((function(t){var n,i;n=e,t=s[i=t],i in n?Object.defineProperty(n,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[i]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,s=arguments[e];for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t}).apply(this,arguments)}function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function r(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var a=r(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),c=r(/Edge/i),l=r(/firefox/i),u=r(/safari/i)&&!r(/chrome/i)&&!r(/android/i),h=r(/iP(ad|od|hone)/i),d=r(/chrome/i)&&r(/android/i),p={capture:!1,passive:!1};function f(t,e,n){t.addEventListener(e,n,!a&&p)}function m(t,e,n){t.removeEventListener(e,n,!a&&p)}function g(t,e){if(e&&(">"===e[0]&&(e=e.substring(1)),t))try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return}}function _(t,e,n,s){if(t){n=n||document;do{if(null!=e&&(">"!==e[0]||t.parentNode===n)&&g(t,e)||s&&t===n)return t}while(t!==n&&(t=(i=t).host&&i!==document&&i.host.nodeType?i.host:i.parentNode))}var i;return null}var v,y=/\s+/g;function x(t,e,n){var s;t&&e&&(t.classList?t.classList[n?"add":"remove"](e):(s=(" "+t.className+" ").replace(y," ").replace(" "+e+" "," "),t.className=(s+(n?" "+e:"")).replace(y," ")))}function b(t,e,n){var s=t&&t.style;if(s){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];s[e=e in s||-1!==e.indexOf("webkit")?e:"-webkit-"+e]=n+("string"==typeof n?"":"px")}}function w(t,e){var n="";if("string"==typeof t)n=t;else do{var s=b(t,"transform")}while(s&&"none"!==s&&(n=s+" "+n),!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function T(t,e,n){if(t){var s=t.getElementsByTagName(e),i=0,o=s.length;if(n)for(;i<o;i++)n(s[i],i);return s}return[]}function S(){return document.scrollingElement||document.documentElement}function k(t,e,n,s,i){if(t.getBoundingClientRect||t===window){var o,r,c,l,u,h,d=t!==window&&t.parentNode&&t!==S()?(r=(o=t.getBoundingClientRect()).top,c=o.left,l=o.bottom,u=o.right,h=o.height,o.width):(c=r=0,l=window.innerHeight,u=window.innerWidth,h=window.innerHeight,window.innerWidth);if((e||n)&&t!==window&&(i=i||t.parentNode,!a))do{if(i&&i.getBoundingClientRect&&("none"!==b(i,"transform")||n&&"static"!==b(i,"position"))){var p=i.getBoundingClientRect();r-=p.top+parseInt(b(i,"border-top-width")),c-=p.left+parseInt(b(i,"border-left-width")),l=r+o.height,u=c+o.width;break}}while(i=i.parentNode);return s&&t!==window&&(s=(e=w(i||t))&&e.a,t=e&&e.d,e&&(l=(r/=t)+(h/=t),u=(c/=s)+(d/=s))),{top:r,left:c,bottom:l,right:u,width:d,height:h}}}function C(t,e,n){for(var s=E(t,!0),i=k(t)[e];s;){var o=k(s)[n];if(!("top"===n||"left"===n?o<=i:i<=o))return s;if(s===S())break;s=E(s,!1)}return!1}function D(t,e,n,s){for(var i=0,o=0,r=t.children;o<r.length;){if("none"!==r[o].style.display&&r[o]!==Ft.ghost&&(s||r[o]!==Ft.dragged)&&_(r[o],n.draggable,t,!1)){if(i===e)return r[o];i++}o++}return null}function A(t,e){for(var n=t.lastElementChild;n&&(n===Ft.ghost||"none"===b(n,"display")||e&&!g(n,e));)n=n.previousElementSibling;return n||null}function M(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Ft.clone||e&&!g(t,e)||n++;return n}function O(t){var e=0,n=0,s=S();if(t)do{var i=(o=w(t)).a,o=o.d}while(e+=t.scrollLeft*i,n+=t.scrollTop*o,t!==s&&(t=t.parentNode));return[e,n]}function E(t,e){if(!t||!t.getBoundingClientRect)return S();var n=t,s=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=b(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return S();if(s||e)return n;s=!0}}}while(n=n.parentNode);return S()}function R(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function N(t,e){return function(){var n;v||(1===(n=arguments).length?t.call(this,n[0]):t.apply(this,n),v=setTimeout((function(){v=void 0}),e))}}function q(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function I(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function P(t,e){b(t,"position","absolute"),b(t,"top",e.top),b(t,"left",e.left),b(t,"width",e.width),b(t,"height",e.height)}function F(t){b(t,"position",""),b(t,"top",""),b(t,"left",""),b(t,"width",""),b(t,"height","")}function V(t,e,n){var s={};return Array.from(t.children).forEach((function(i){var o;_(i,e.draggable,t,!1)&&!i.animated&&i!==n&&(o=k(i),s.left=Math.min(null!==(i=s.left)&&void 0!==i?i:1/0,o.left),s.top=Math.min(null!==(i=s.top)&&void 0!==i?i:1/0,o.top),s.right=Math.max(null!==(i=s.right)&&void 0!==i?i:-1/0,o.right),s.bottom=Math.max(null!==(i=s.bottom)&&void 0!==i?i:-1/0,o.bottom))})),s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}var j="Sortable"+(new Date).getTime();var L=[],Y={initializeByDefault:!0},W={mount:function(t){for(var e in Y)!Y.hasOwnProperty(e)||e in t||(t[e]=Y[e]);L.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),L.push(t)},pluginEvent:function(t,n,s){var i=this;this.eventCanceled=!1,s.cancel=function(){i.eventCanceled=!0};var o=t+"Global";L.forEach((function(i){n[i.pluginName]&&(n[i.pluginName][o]&&n[i.pluginName][o](e({sortable:n},s)),n.options[i.pluginName]&&n[i.pluginName][t]&&n[i.pluginName][t](e({sortable:n},s)))}))},initializePlugins:function(t,e,n,i){for(var o in L.forEach((function(i){var o=i.pluginName;(t.options[o]||i.initializeByDefault)&&((i=new i(t,e,t.options)).sortable=t,i.options=t.options,t[o]=i,s(n,i.defaults))})),t.options){var r;t.options.hasOwnProperty(o)&&void 0!==(r=this.modifyOption(t,o,t.options[o]))&&(t.options[o]=r)}},getEventProperties:function(t,e){var n={};return L.forEach((function(i){"function"==typeof i.eventProperties&&s(n,i.eventProperties.call(e[i.pluginName],t))})),n},modifyOption:function(t,e,n){var s;return L.forEach((function(i){t[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[e]&&(s=i.optionListeners[e].call(t[i.pluginName],n))})),s}};function z(t){var n=t.sortable,s=t.rootEl,i=t.name,o=t.targetEl,r=t.cloneEl,l=t.toEl,u=t.fromEl,h=t.oldIndex,d=t.newIndex,p=t.oldDraggableIndex,f=t.newDraggableIndex,m=t.originalEvent,g=t.putSortable,_=t.extraEventProperties;if(n=n||s&&s[j]){var v,y=n.options;t="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||a||c?(v=document.createEvent("Event")).initEvent(i,!0,!0):v=new CustomEvent(i,{bubbles:!0,cancelable:!0}),v.to=l||s,v.from=u||s,v.item=o||s,v.clone=r,v.oldIndex=h,v.newIndex=d,v.oldDraggableIndex=p,v.newDraggableIndex=f,v.originalEvent=m,v.pullMode=g?g.lastPutMode:void 0;var x,b=e(e({},_),W.getEventProperties(i,n));for(x in b)v[x]=b[x];s&&s.dispatchEvent(v),y[t]&&y[t].call(n,v)}}function H(t,n){var s=(i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).evt,i=function(t,e){if(null==t)return{};var n,s=function(t,e){if(null==t)return{};for(var n,s={},i=Object.keys(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||(s[n]=t[n]);return s}(t,e);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n]);return s}(i,B);W.pluginEvent.bind(Ft)(t,n,e({dragEl:G,parentEl:X,ghostEl:$,rootEl:Z,nextEl:Q,lastDownEl:J,cloneEl:K,cloneHidden:tt,dragStarted:pt,putSortable:rt,activeSortable:Ft.active,originalEvent:s,oldIndex:et,oldDraggableIndex:st,newIndex:nt,newDraggableIndex:it,hideGhostForTarget:Nt,unhideGhostForTarget:qt,cloneNowHidden:function(){tt=!0},cloneNowShown:function(){tt=!1},dispatchSortableEvent:function(t){U({sortable:n,name:t,originalEvent:s})}},i))}var B=["evt"];function U(t){z(e({putSortable:rt,cloneEl:K,targetEl:G,rootEl:Z,oldIndex:et,oldDraggableIndex:st,newIndex:nt,newDraggableIndex:it},t))}var G,X,$,Z,Q,J,K,tt,et,nt,st,it,ot,rt,at,ct,lt,ut,ht,dt,pt,ft,mt,gt,_t,vt=!1,yt=!1,xt=[],bt=!1,wt=!1,Tt=[],St=!1,kt=[],Ct="undefined"!=typeof document,Dt=h,At=c||a?"cssFloat":"float",Mt=Ct&&!d&&!h&&"draggable"in document.createElement("div"),Ot=function(){if(Ct){if(a)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Et=function(t,e){var n=b(t),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=D(t,0,e),o=D(t,1,e),r=i&&b(i),a=o&&b(o),c=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+k(i).width;t=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+k(o).width;return"flex"===n.display?"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal":"grid"===n.display?n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":i&&r.float&&"none"!==r.float?(e="left"===r.float?"left":"right",!o||"both"!==a.clear&&a.clear!==e?"horizontal":"vertical"):i&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||s<=c&&"none"===n[At]||o&&"none"===n[At]&&s<c+t)?"vertical":"horizontal"},Rt=function(t){function e(t,n){return function(s,i,o,r){var a=s.options.group.name&&i.options.group.name&&s.options.group.name===i.options.group.name;return!(null!=t||!n&&!a)||null!=t&&!1!==t&&(n&&"clone"===t?t:"function"==typeof t?e(t(s,i,o,r),n)(s,i,o,r):(i=(n?s:i).options.group.name,!0===t||"string"==typeof t&&t===i||t.join&&-1<t.indexOf(i)))}}var s={},i=t.group;i&&"object"==n(i)||(i={name:i}),s.name=i.name,s.checkPull=e(i.pull,!0),s.checkPut=e(i.put),s.revertClone=i.revertClone,t.group=s},Nt=function(){!Ot&&$&&b($,"display","none")},qt=function(){!Ot&&$&&b($,"display","")};function It(t){if(G){t=t.touches?t.touches[0]:t;var e=(i=t.clientX,o=t.clientY,xt.some((function(t){if((s=t[j].options.emptyInsertThreshold)&&!A(t)){var e=k(t),n=i>=e.left-s&&i<=e.right+s,s=o>=e.top-s&&o<=e.bottom+s;return n&&s?r=t:void 0}})),r);if(e){var n,s={};for(n in t)t.hasOwnProperty(n)&&(s[n]=t[n]);s.target=s.rootEl=e,s.preventDefault=void 0,s.stopPropagation=void 0,e[j]._onDragOver(s)}}var i,o,r}function Pt(t){G&&G.parentNode[j]._isOutsideThisEl(t.target)}function Ft(t,n){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=n=s({},n),t[j]=this;var i,o,r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Et(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ft.supportPointer&&"PointerEvent"in window&&!u,emptyInsertThreshold:5};for(i in W.initializePlugins(this,t,r),r)i in n||(n[i]=r[i]);for(o in Rt(n),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!n.forceFallback&&Mt,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?f(t,"pointerdown",this._onTapStart):(f(t,"mousedown",this._onTapStart),f(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(f(t,"dragover",this),f(t,"dragenter",this)),xt.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),s(this,function(){var t,n=[];return{captureAnimationState:function(){n=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(t){var s,i;"none"!==b(t,"display")&&t!==Ft.ghost&&(n.push({target:t,rect:k(t)}),s=e({},n[n.length-1].rect),!t.thisAnimationDuration||(i=w(t,!0))&&(s.top-=i.f,s.left-=i.e),t.fromRect=s)}))},addAnimationState:function(t){n.push(t)},removeAnimationState:function(t){n.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var s in e)if(e.hasOwnProperty(s)&&e[s]===t[n][s])return Number(n);return-1}(n,{target:t}),1)},animateAll:function(e){var s=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof e&&e());var i=!1,o=0;n.forEach((function(t){var e=0,n=t.target,r=n.fromRect,a=k(n),c=n.prevFromRect,l=n.prevToRect,u=t.rect,h=w(n,!0);h&&(a.top-=h.f,a.left-=h.e),n.toRect=a,n.thisAnimationDuration&&R(c,a)&&!R(r,a)&&(u.top-a.top)/(u.left-a.left)==(r.top-a.top)/(r.left-a.left)&&(t=u,h=c,c=l,l=s.options,e=Math.sqrt(Math.pow(h.top-t.top,2)+Math.pow(h.left-t.left,2))/Math.sqrt(Math.pow(h.top-c.top,2)+Math.pow(h.left-c.left,2))*l.animation),R(a,r)||(n.prevFromRect=r,n.prevToRect=a,e=e||s.options.animation,s.animate(n,u,a,e)),e&&(i=!0,o=Math.max(o,e),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),e),n.thisAnimationDuration=e)})),clearTimeout(t),i?t=setTimeout((function(){"function"==typeof e&&e()}),o):"function"==typeof e&&e(),n=[]},animate:function(t,e,n,s){var i,o;s&&(b(t,"transition",""),b(t,"transform",""),i=(o=w(this.el))&&o.a,o=o&&o.d,i=(e.left-n.left)/(i||1),o=(e.top-n.top)/(o||1),t.animatingX=!!i,t.animatingY=!!o,b(t,"transform","translate3d("+i+"px,"+o+"px,0)"),this.forRepaintDummy=t.offsetWidth,b(t,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),b(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){b(t,"transition",""),b(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),s))}}}())}function Vt(t,e,n,s,i,o,r,l){var u,h,d=t[j],p=d.options.onMove;return!window.CustomEvent||a||c?(u=document.createEvent("Event")).initEvent("move",!0,!0):u=new CustomEvent("move",{bubbles:!0,cancelable:!0}),u.to=e,u.from=t,u.dragged=n,u.draggedRect=s,u.related=i||e,u.relatedRect=o||k(e),u.willInsertAfter=l,u.originalEvent=r,t.dispatchEvent(u),p?p.call(d,u,r):h}function jt(t){t.draggable=!1}function Lt(){St=!1}function Yt(t){return setTimeout(t,0)}function Wt(t){return clearTimeout(t)}Ct&&!d&&document.addEventListener("click",(function(t){if(yt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),yt=!1}),!0),Ft.prototype={constructor:Ft,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(ft=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,G):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,s=this.options,i=s.preventOnFilter,o=t.type,r=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,a=(r||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||a,l=s.filter;if(function(t){kt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var s=e[n];s.checked&&kt.push(s)}}(n),!G&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||s.disabled)&&!c.isContentEditable&&(this.nativeDraggable||!u||!a||"SELECT"!==a.tagName.toUpperCase())&&!((a=_(a,s.draggable,n,!1))&&a.animated||J===a)){if(et=M(a),st=M(a,s.draggable),"function"==typeof l){if(l.call(this,t,a,this))return U({sortable:e,rootEl:c,name:"filter",targetEl:a,toEl:n,fromEl:n}),H("filter",e,{evt:t}),void(i&&t.cancelable&&t.preventDefault())}else if(l=l&&l.split(",").some((function(s){if(s=_(c,s.trim(),n,!1))return U({sortable:e,rootEl:s,name:"filter",targetEl:a,fromEl:n,toEl:n}),H("filter",e,{evt:t}),!0})))return void(i&&t.cancelable&&t.preventDefault());s.handle&&!_(c,s.handle,n,!1)||this._prepareDragStart(t,r,a)}}},_prepareDragStart:function(t,e,n){var s,i=this,o=i.el,r=i.options,u=o.ownerDocument;n&&!G&&n.parentNode===o&&(s=k(n),Z=o,X=(G=n).parentNode,Q=G.nextSibling,J=n,ot=r.group,at={target:Ft.dragged=G,clientX:(e||t).clientX,clientY:(e||t).clientY},ht=at.clientX-s.left,dt=at.clientY-s.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,G.style["will-change"]="all",s=function(){H("delayEnded",i,{evt:t}),Ft.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!l&&i.nativeDraggable&&(G.draggable=!0),i._triggerDragStart(t,e),U({sortable:i,name:"choose",originalEvent:t}),x(G,r.chosenClass,!0))},r.ignore.split(",").forEach((function(t){T(G,t.trim(),jt)})),f(u,"dragover",It),f(u,"mousemove",It),f(u,"touchmove",It),f(u,"mouseup",i._onDrop),f(u,"touchend",i._onDrop),f(u,"touchcancel",i._onDrop),l&&this.nativeDraggable&&(this.options.touchStartThreshold=4,G.draggable=!0),H("delayStart",this,{evt:t}),!r.delay||r.delayOnTouchOnly&&!e||this.nativeDraggable&&(c||a)?s():Ft.eventCanceled?this._onDrop():(f(u,"mouseup",i._disableDelayedDrag),f(u,"touchend",i._disableDelayedDrag),f(u,"touchcancel",i._disableDelayedDrag),f(u,"mousemove",i._delayedDragTouchMoveHandler),f(u,"touchmove",i._delayedDragTouchMoveHandler),r.supportPointer&&f(u,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(s,r.delay)))},_delayedDragTouchMoveHandler:function(t){t=t.touches?t.touches[0]:t,Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){G&&jt(G),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;m(t,"mouseup",this._disableDelayedDrag),m(t,"touchend",this._disableDelayedDrag),m(t,"touchcancel",this._disableDelayedDrag),m(t,"mousemove",this._delayedDragTouchMoveHandler),m(t,"touchmove",this._delayedDragTouchMoveHandler),m(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?f(document,"pointermove",this._onTouchMove):f(document,e?"touchmove":"mousemove",this._onTouchMove):(f(G,"dragend",this),f(Z,"dragstart",this._onDragStart));try{document.selection?Yt((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){var n;vt=!1,Z&&G?(H("dragStarted",this,{evt:e}),this.nativeDraggable&&f(document,"dragover",Pt),n=this.options,t||x(G,n.dragClass,!1),x(G,n.ghostClass,!0),Ft.active=this,t&&this._appendGhost(),U({sortable:this,name:"start",originalEvent:e})):this._nulling()},_emulateDragOver:function(){if(ct){this._lastX=ct.clientX,this._lastY=ct.clientY,Nt();for(var t=document.elementFromPoint(ct.clientX,ct.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(ct.clientX,ct.clientY))!==e;)e=t;if(G.parentNode[j]._isOutsideThisEl(t),e)do{if(e[j]&&e[j]._onDragOver({clientX:ct.clientX,clientY:ct.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}while(e=(t=e).parentNode);qt()}},_onTouchMove:function(t){if(at){var e=(a=this.options).fallbackTolerance,n=a.fallbackOffset,s=t.touches?t.touches[0]:t,i=$&&w($,!0),o=$&&i&&i.a,r=$&&i&&i.d,a=Dt&&_t&&O(_t);o=(s.clientX-at.clientX+n.x)/(o||1)+(a?a[0]-Tt[0]:0)/(o||1),r=(s.clientY-at.clientY+n.y)/(r||1)+(a?a[1]-Tt[1]:0)/(r||1);if(!Ft.active&&!vt){if(e&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<e)return;this._onDragStart(t,!0)}$&&(i?(i.e+=o-(lt||0),i.f+=r-(ut||0)):i={a:1,b:0,c:0,d:1,e:o,f:r},i="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")"),b($,"webkitTransform",i),b($,"mozTransform",i),b($,"msTransform",i),b($,"transform",i),lt=o,ut=r,ct=s),t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!$){var t=this.options.fallbackOnBody?document.body:Z,e=k(G,!0,Dt,!0,t),n=this.options;if(Dt){for(_t=t;"static"===b(_t,"position")&&"none"===b(_t,"transform")&&_t!==document;)_t=_t.parentNode;_t!==document.body&&_t!==document.documentElement?(_t===document&&(_t=S()),e.top+=_t.scrollTop,e.left+=_t.scrollLeft):_t=S(),Tt=O(_t)}x($=G.cloneNode(!0),n.ghostClass,!1),x($,n.fallbackClass,!0),x($,n.dragClass,!0),b($,"transition",""),b($,"transform",""),b($,"box-sizing","border-box"),b($,"margin",0),b($,"top",e.top),b($,"left",e.left),b($,"width",e.width),b($,"height",e.height),b($,"opacity","0.8"),b($,"position",Dt?"absolute":"fixed"),b($,"zIndex","100000"),b($,"pointerEvents","none"),Ft.ghost=$,t.appendChild($),b($,"transform-origin",ht/parseInt($.style.width)*100+"% "+dt/parseInt($.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,s=t.dataTransfer,i=n.options;H("dragStart",this,{evt:t}),Ft.eventCanceled?this._onDrop():(H("setupClone",this),Ft.eventCanceled||((K=I(G)).removeAttribute("id"),K.draggable=!1,K.style["will-change"]="",this._hideClone(),x(K,this.options.chosenClass,!1),Ft.clone=K),n.cloneId=Yt((function(){H("clone",n),Ft.eventCanceled||(n.options.removeCloneOnHide||Z.insertBefore(K,G),n._hideClone(),U({sortable:n,name:"clone"}))})),e||x(G,i.dragClass,!0),e?(yt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(m(document,"mouseup",n._onDrop),m(document,"touchend",n._onDrop),m(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",i.setData&&i.setData.call(n,s,G)),f(document,"drop",n),b(G,"transform","translateZ(0)")),vt=!0,n._dragStartId=Yt(n._dragStarted.bind(n,e,t)),f(document,"selectstart",n),pt=!0,u&&b(document.body,"user-select","none"))},_onDragOver:function(t){var n,s,i,o,r,a=this.el,c=t.target,l=this.options,u=l.group,h=Ft.active,d=ot===u,p=l.sort,f=rt||h,m=this,g=!1;if(!St){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),c=_(c,l.draggable,a,!0),L("dragOver"),Ft.eventCanceled)return g;if(G.contains(t.target)||c.animated&&c.animatingX&&c.animatingY||m._ignoreWhileAnimating===c)return W(!1);if(yt=!1,h&&!l.disabled&&(d?p||(s=X!==Z):rt===this||(this.lastPutMode=ot.checkPull(this,h,G,t))&&u.checkPut(this,h,G,t))){if(i="vertical"===this._getDirection(t,c),n=k(G),L("dragOverValid"),Ft.eventCanceled)return g;if(s)return X=Z,Y(),this._hideClone(),L("revert"),Ft.eventCanceled||(Q?Z.insertBefore(G,Q):Z.appendChild(G)),W(!0);var v=A(a,l.draggable);if(v&&(E=t,u=i,F=k(A((O=this).el,O.options.draggable)),O=V(O.el,O.options,$),!(u?E.clientX>O.right+10||E.clientY>F.bottom&&E.clientX>F.left:E.clientY>O.bottom+10||E.clientX>F.right&&E.clientY>F.top)||v.animated)){if(v&&(o=t,r=i,N=k(D((R=this).el,0,R.options,!0)),R=V(R.el,R.options,$),r?o.clientX<R.left-10||o.clientY<N.top&&o.clientX<N.right:o.clientY<R.top-10||o.clientY<N.bottom&&o.clientX<N.left)){if((I=D(a,0,l,!0))===G)return W(!1);if(S=k(c=I),!1!==Vt(Z,a,G,n,c,S,t,!1))return Y(),a.insertBefore(G,I),X=a,z(),W(!0)}else if(c.parentNode===a){var y,w,T,S=k(c),O=G.parentNode!==a,E=(E=G.animated&&G.toRect||n,F=c.animated&&c.toRect||S,R=(r=i)?E.left:E.top,o=r?E.right:E.bottom,N=r?E.width:E.height,I=r?F.left:F.top,E=r?F.right:F.bottom,F=r?F.width:F.height,!(R===I||o===E||R+N/2===I+F/2)),R=i?"top":"left",N=C(c,"top","top")||C(G,"top","top"),I=N?N.scrollTop:void 0;if(ft!==c&&(w=S[R],bt=!1,wt=!E&&l.invertSwap||O),0!==(y=function(t,e,n,s,i,o,r,a){var c=s?t.clientY:t.clientX,l=s?n.height:n.width;t=s?n.top:n.left,s=s?n.bottom:n.right,n=!1;if(!r)if(a&&gt<l*i){if(bt=!bt&&(1===mt?t+l*o/2<c:c<s-l*o/2)||bt)n=!0;else if(1===mt?c<t+gt:s-gt<c)return-mt}else if(t+l*(1-i)/2<c&&c<s-l*(1-i)/2)return function(t){return M(G)<M(t)?1:-1}(e);return(n=n||r)&&(c<t+l*o/2||s-l*o/2<c)?t+l/2<c?1:-1:0}(t,c,S,i,E?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,wt,ft===c)))for(var P=M(G);(T=X.children[P-=y])&&("none"===b(T,"display")||T===$););if(0===y||T===c)return W(!1);mt=y;var F=(ft=c).nextElementSibling;O=!1;if(!1!==(E=Vt(Z,a,G,n,c,S,t,O=1===y)))return 1!==E&&-1!==E||(O=1===E),St=!0,setTimeout(Lt,30),Y(),O&&!F?a.appendChild(G):c.parentNode.insertBefore(G,O?F:c),N&&q(N,0,I-N.scrollTop),X=G.parentNode,void 0===w||wt||(gt=Math.abs(w-k(c)[R])),z(),W(!0)}}else{if(v===G)return W(!1);if((c=v&&a===t.target?v:c)&&(S=k(c)),!1!==Vt(Z,a,G,n,c,S,t,!!c))return Y(),v&&v.nextSibling?a.insertBefore(G,v.nextSibling):a.appendChild(G),X=a,z(),W(!0)}if(a.contains(G))return W(!1)}return!1}function L(o,r){H(o,m,e({evt:t,isOwner:d,axis:i?"vertical":"horizontal",revert:s,dragRect:n,targetRect:S,canSort:p,fromSortable:f,target:c,completed:W,onMove:function(e,s){return Vt(Z,a,G,n,e,k(e),t,s)},changed:z},r))}function Y(){L("dragOverAnimationCapture"),m.captureAnimationState(),m!==f&&f.captureAnimationState()}function W(e){return L("dragOverCompleted",{insertion:e}),e&&(d?h._hideClone():h._showClone(m),m!==f&&(x(G,(rt||h).options.ghostClass,!1),x(G,l.ghostClass,!0)),rt!==m&&m!==Ft.active?rt=m:m===Ft.active&&rt&&(rt=null),f===m&&(m._ignoreWhileAnimating=c),m.animateAll((function(){L("dragOverAnimationComplete"),m._ignoreWhileAnimating=null})),m!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(c===G&&!G.animated||c===a&&!c.animated)&&(ft=null),l.dragoverBubble||t.rootEl||c===document||(G.parentNode[j]._isOutsideThisEl(t.target),e||It(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function z(){nt=M(G),it=M(G,l.draggable),U({sortable:m,name:"change",toEl:a,newIndex:nt,newDraggableIndex:it,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){m(document,"mousemove",this._onTouchMove),m(document,"touchmove",this._onTouchMove),m(document,"pointermove",this._onTouchMove),m(document,"dragover",It),m(document,"mousemove",It),m(document,"touchmove",It)},_offUpEvents:function(){var t=this.el.ownerDocument;m(t,"mouseup",this._onDrop),m(t,"touchend",this._onDrop),m(t,"pointerup",this._onDrop),m(t,"touchcancel",this._onDrop),m(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;nt=M(G),it=M(G,n.draggable),H("drop",this,{evt:t}),X=G&&G.parentNode,nt=M(G),it=M(G,n.draggable),Ft.eventCanceled||(bt=wt=vt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Wt(this.cloneId),Wt(this._dragStartId),this.nativeDraggable&&(m(document,"drop",this),m(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),u&&b(document.body,"user-select",""),b(G,"transform",""),t&&(pt&&(t.cancelable&&t.preventDefault(),n.dropBubble||t.stopPropagation()),$&&$.parentNode&&$.parentNode.removeChild($),(Z===X||rt&&"clone"!==rt.lastPutMode)&&K&&K.parentNode&&K.parentNode.removeChild(K),G&&(this.nativeDraggable&&m(G,"dragend",this),jt(G),G.style["will-change"]="",pt&&!vt&&x(G,(rt||this).options.ghostClass,!1),x(G,this.options.chosenClass,!1),U({sortable:this,name:"unchoose",toEl:X,newIndex:null,newDraggableIndex:null,originalEvent:t}),Z!==X?(0<=nt&&(U({rootEl:X,name:"add",toEl:X,fromEl:Z,originalEvent:t}),U({sortable:this,name:"remove",toEl:X,originalEvent:t}),U({rootEl:X,name:"sort",toEl:X,fromEl:Z,originalEvent:t}),U({sortable:this,name:"sort",toEl:X,originalEvent:t})),rt&&rt.save()):nt!==et&&0<=nt&&(U({sortable:this,name:"update",toEl:X,originalEvent:t}),U({sortable:this,name:"sort",toEl:X,originalEvent:t})),Ft.active&&(null!=nt&&-1!==nt||(nt=et,it=st),U({sortable:this,name:"end",toEl:X,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){H("nulling",this),Z=G=X=$=Q=K=J=tt=at=ct=pt=nt=it=et=st=ft=mt=rt=ot=Ft.dragged=Ft.ghost=Ft.clone=Ft.active=null,kt.forEach((function(t){t.checked=!0})),kt.length=lt=ut=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":G&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,s=0,i=n.length,o=this.options;s<i;s++)_(t=n[s],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||function(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,s=0;n--;)s+=e.charCodeAt(n);return s.toString(36)}(t));return e},sort:function(t,e){var n={},s=this.el;this.toArray().forEach((function(t,e){_(e=s.children[e],this.options.draggable,s,!1)&&(n[t]=e)}),this),e&&this.captureAnimationState(),t.forEach((function(t){n[t]&&(s.removeChild(n[t]),s.appendChild(n[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return _(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var s=W.modifyOption(this,t,e);n[t]=void 0!==s?s:e,"group"===t&&Rt(n)},destroy:function(){H("destroy",this);var t=this.el;t[j]=null,m(t,"mousedown",this._onTapStart),m(t,"touchstart",this._onTapStart),m(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(m(t,"dragover",this),m(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),xt.splice(xt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){tt||(H("hideClone",this),Ft.eventCanceled||(b(K,"display","none"),this.options.removeCloneOnHide&&K.parentNode&&K.parentNode.removeChild(K),tt=!0))},_showClone:function(t){"clone"===t.lastPutMode?tt&&(H("showClone",this),Ft.eventCanceled||(G.parentNode!=Z||this.options.group.revertClone?Q?Z.insertBefore(K,Q):Z.appendChild(K):Z.insertBefore(K,G),this.options.group.revertClone&&this.animate(G,K),b(K,"display",""),tt=!1)):this._hideClone()}},Ct&&f(document,"touchmove",(function(t){(Ft.active||vt)&&t.cancelable&&t.preventDefault()})),Ft.utils={on:f,off:m,css:b,find:T,is:function(t,e){return!!_(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:N,closest:_,toggleClass:x,clone:I,index:M,nextTick:Yt,cancelNextTick:Wt,detectDirection:Et,getChild:D},Ft.get=function(t){return t[j]},Ft.mount=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];(n=n[0].constructor===Array?n[0]:n).forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Ft.utils=e(e({},Ft.utils),t.utils)),W.mount(t)}))},Ft.create=function(t,e){return new Ft(t,e)};var zt,Ht,Bt,Ut,Gt,Xt,$t=[],Zt=!(Ft.version="1.15.2");function Qt(){$t.forEach((function(t){clearInterval(t.pid)})),$t=[]}function Jt(){clearInterval(Xt)}var Kt,te=N((function(t,e,n,s){if(e.scroll){var i,o=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,c=e.scrollSpeed,l=S(),u=!1;Ht!==n&&(Ht=n,Qt(),zt=e.scroll,i=e.scrollFn,!0===zt&&(zt=E(n,!0)));var h=0,d=zt;do{var p=d,f=(A=k(p)).top,m=A.bottom,g=A.left,_=A.right,v=A.width,y=A.height,x=void 0,w=p.scrollWidth,T=p.scrollHeight,C=b(p),D=p.scrollLeft,A=p.scrollTop,M=p===l?(x=v<w&&("auto"===C.overflowX||"scroll"===C.overflowX||"visible"===C.overflowX),y<T&&("auto"===C.overflowY||"scroll"===C.overflowY||"visible"===C.overflowY)):(x=v<w&&("auto"===C.overflowX||"scroll"===C.overflowX),y<T&&("auto"===C.overflowY||"scroll"===C.overflowY));D=x&&(Math.abs(_-o)<=a&&D+v<w)-(Math.abs(g-o)<=a&&!!D),A=M&&(Math.abs(m-r)<=a&&A+y<T)-(Math.abs(f-r)<=a&&!!A);if(!$t[h])for(var O=0;O<=h;O++)$t[O]||($t[O]={});$t[h].vx==D&&$t[h].vy==A&&$t[h].el===p||($t[h].el=p,$t[h].vx=D,$t[h].vy=A,clearInterval($t[h].pid),0==D&&0==A||(u=!0,$t[h].pid=setInterval(function(){s&&0===this.layer&&Ft.active._onTouchMove(Gt);var e=$t[this.layer].vy?$t[this.layer].vy*c:0,n=$t[this.layer].vx?$t[this.layer].vx*c:0;"function"==typeof i&&"continue"!==i.call(Ft.dragged.parentNode[j],n,e,t,Gt,$t[this.layer].el)||q($t[this.layer].el,n,e)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=E(d,!1)));Zt=u}}),30);d=function(t){var e=t.originalEvent,n=t.putSortable,s=t.dragEl,i=t.activeSortable,o=t.dispatchSortableEvent,r=t.hideGhostForTarget;t=t.unhideGhostForTarget;e&&(i=n||i,r(),e=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,e=document.elementFromPoint(e.clientX,e.clientY),t(),i&&!i.el.contains(e)&&(o("spill"),this.onSpill({dragEl:s,putSortable:n})))};function ee(){}function ne(){}ee.prototype={startIndex:null,dragStart:function(t){t=t.oldDraggableIndex,this.startIndex=t},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState(),(t=D(this.sortable.el,this.startIndex,this.options))?this.sortable.el.insertBefore(e,t):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:d},s(ee,{pluginName:"revertOnSpill"}),ne.prototype={onSpill:function(t){var e=t.dragEl;(t=t.putSortable||this.sortable).captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),t.animateAll()},drop:d},s(ne,{pluginName:"removeOnSpill"});var se,ie,oe,re,ae,ce=[],le=[],ue=!1,he=!1,de=!1;function pe(t,e){le.forEach((function(n,s){(s=e.children[n.sortableIndex+(t?Number(s):0)])?e.insertBefore(n,s):e.appendChild(n)}))}function fe(){ce.forEach((function(t){t!==oe&&t.parentNode&&t.parentNode.removeChild(t)}))}return Ft.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){t=t.originalEvent,this.sortable.nativeDraggable?f(document,"dragover",this._handleAutoScroll):this.options.supportPointer?f(document,"pointermove",this._handleFallbackAutoScroll):t.touches?f(document,"touchmove",this._handleFallbackAutoScroll):f(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){t=t.originalEvent,this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?m(document,"dragover",this._handleAutoScroll):(m(document,"pointermove",this._handleFallbackAutoScroll),m(document,"touchmove",this._handleFallbackAutoScroll),m(document,"mousemove",this._handleFallbackAutoScroll)),Jt(),Qt(),clearTimeout(v),v=void 0},nulling:function(){Gt=Ht=zt=Zt=Xt=Bt=Ut=null,$t.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n,s=this,i=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(i,o);Gt=t,e||this.options.forceAutoScrollFallback||c||a||u?(te(t,this.options,r,e),n=E(r,!0),!Zt||Xt&&i===Bt&&o===Ut||(Xt&&Jt(),Xt=setInterval((function(){var r=E(document.elementFromPoint(i,o),!0);r!==n&&(n=r,Qt()),te(t,s.options,r,e)}),10),Bt=i,Ut=o)):this.options.bubbleScroll&&E(r,!0)!==S()?te(t,this.options,E(r,!1),!1):Qt()}},s(t,{pluginName:"scroll",initializeByDefault:!0})}),Ft.mount(ne,ee),Ft.mount(new function(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){t=t.dragEl,Kt=t},dragOverValid:function(t){var e=t.completed,n=t.target,s=t.onMove,i=t.activeSortable,o=t.changed,r=t.cancel;i.options.swap&&(t=this.sortable.el,i=this.options,n&&n!==t&&(t=Kt,Kt=!1!==s(n)?(x(n,i.swapClass,!0),n):null,t&&t!==Kt&&x(t,i.swapClass,!1)),o(),e(!0),r())},drop:function(t){var e,n,s=t.activeSortable,i=t.putSortable,o=t.dragEl,r=i||this.sortable,a=this.options;Kt&&x(Kt,a.swapClass,!1),Kt&&(a.swap||i&&i.options.swap)&&o!==Kt&&(r.captureAnimationState(),r!==s&&s.captureAnimationState(),n=Kt,t=(e=o).parentNode,a=n.parentNode,t&&a&&!t.isEqualNode(n)&&!a.isEqualNode(e)&&(i=M(e),o=M(n),t.isEqualNode(a)&&i<o&&o++,t.insertBefore(n,t.children[i]),a.insertBefore(e,a.children[o])),r.animateAll(),r!==s&&s.animateAll())},nulling:function(){Kt=null}},s(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Kt}}})}),Ft.mount(new function(){function t(t){for(var e in this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this));t.options.avoidImplicitDeselect||(t.options.supportPointer?f(document,"pointerup",this._deselectMultiDrag):(f(document,"mouseup",this._deselectMultiDrag),f(document,"touchend",this._deselectMultiDrag))),f(document,"keydown",this._checkKeyDown),f(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(e,n){var s="";ce.length&&ie===t?ce.forEach((function(t,e){s+=(e?", ":"")+t.textContent})):s=n.textContent,e.setData("Text",s)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){t=t.dragEl,oe=t},delayEnded:function(){this.isMultiDrag=~ce.indexOf(oe)},setupClone:function(t){var e=t.sortable;t=t.cancel;if(this.isMultiDrag){for(var n=0;n<ce.length;n++)le.push(I(ce[n])),le[n].sortableIndex=ce[n].sortableIndex,le[n].draggable=!1,le[n].style["will-change"]="",x(le[n],this.options.selectedClass,!1),ce[n]===oe&&x(le[n],this.options.chosenClass,!1);e._hideClone(),t()}},clone:function(t){var e=t.sortable,n=t.rootEl,s=t.dispatchSortableEvent;t=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ce.length&&ie===e&&(pe(!0,n),s("clone"),t()))},showClone:function(t){var e=t.cloneNowShown,n=t.rootEl;t=t.cancel;this.isMultiDrag&&(pe(!1,n),le.forEach((function(t){b(t,"display","")})),e(),ae=!1,t())},hideClone:function(t){var e=this,n=(t.sortable,t.cloneNowHidden);t=t.cancel;this.isMultiDrag&&(le.forEach((function(t){b(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),n(),ae=!0,t())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&ie&&ie.multiDrag._deselectMultiDrag(),ce.forEach((function(t){t.sortableIndex=M(t)})),ce=ce.sort((function(t,e){return t.sortableIndex-e.sortableIndex})),de=!0},dragStarted:function(t){var e,n=this;t=t.sortable;this.isMultiDrag&&(this.options.sort&&(t.captureAnimationState(),this.options.animation&&(ce.forEach((function(t){t!==oe&&b(t,"position","absolute")})),e=k(oe,!1,!0,!0),ce.forEach((function(t){t!==oe&&P(t,e)})),ue=he=!0)),t.animateAll((function(){ue=he=!1,n.options.animation&&ce.forEach((function(t){F(t)})),n.options.sort&&fe()})))},dragOver:function(t){var e=t.target,n=t.completed;t=t.cancel;he&&~ce.indexOf(e)&&(n(!1),t())},revert:function(t){var e,n,s=t.fromSortable,i=t.rootEl,o=t.sortable,r=t.dragRect;1<ce.length&&(ce.forEach((function(t){o.addAnimationState({target:t,rect:he?k(t):r}),F(t),t.fromRect=r,s.removeAnimationState(t)})),he=!1,e=!this.options.removeCloneOnHide,n=i,ce.forEach((function(t,s){(s=n.children[t.sortableIndex+(e?Number(s):0)])?n.insertBefore(t,s):n.appendChild(t)})))},dragOverCompleted:function(t){var e,n=t.sortable,s=t.isOwner,i=t.insertion,o=t.activeSortable,r=t.parentEl,a=t.putSortable;t=this.options;i&&(s&&o._hideClone(),ue=!1,t.animation&&1<ce.length&&(he||!s&&!o.options.sort&&!a)&&(e=k(oe,!1,!0,!0),ce.forEach((function(t){t!==oe&&(P(t,e),r.appendChild(t))})),he=!0),s||(he||fe(),1<ce.length?(s=ae,o._showClone(n),o.options.animation&&!ae&&s&&le.forEach((function(t){o.addAnimationState({target:t,rect:re}),t.fromRect=re,t.thisAnimationDuration=null}))):o._showClone(n)))},dragOverAnimationCapture:function(t){var e=t.dragRect,n=t.isOwner;t=t.activeSortable;ce.forEach((function(t){t.thisAnimationDuration=null})),t.options.animation&&!n&&t.multiDrag.isMultiDrag&&(re=s({},e),e=w(oe,!0),re.top-=e.f,re.left-=e.e)},dragOverAnimationComplete:function(){he&&(he=!1,fe())},drop:function(t){var e=t.originalEvent,n=t.rootEl,s=t.parentEl,i=t.sortable,o=t.dispatchSortableEvent,r=t.oldIndex,a=t.putSortable,c=a||this.sortable;if(e){var l,u,h,d=this.options,p=s.children;if(!de)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),x(oe,d.selectedClass,!~ce.indexOf(oe)),~ce.indexOf(oe))ce.splice(ce.indexOf(oe),1),se=null,z({sortable:i,rootEl:n,name:"deselect",targetEl:oe,originalEvent:e});else{if(ce.push(oe),z({sortable:i,rootEl:n,name:"select",targetEl:oe,originalEvent:e}),e.shiftKey&&se&&i.el.contains(se)){var f=M(se);t=M(oe);if(~f&&~t&&f!==t)for(var m,g=f<t?(m=f,t):(m=t,f+1);m<g;m++)~ce.indexOf(p[m])||(x(p[m],d.selectedClass,!0),ce.push(p[m]),z({sortable:i,rootEl:n,name:"select",targetEl:p[m],originalEvent:e}))}else se=oe;ie=c}de&&this.isMultiDrag&&(he=!1,(s[j].options.sort||s!==n)&&1<ce.length&&(l=k(oe),u=M(oe,":not(."+this.options.selectedClass+")"),!ue&&d.animation&&(oe.thisAnimationDuration=null),c.captureAnimationState(),ue||(d.animation&&(oe.fromRect=l,ce.forEach((function(t){var e;t.thisAnimationDuration=null,t!==oe&&(e=he?k(t):l,t.fromRect=e,c.addAnimationState({target:t,rect:e}))}))),fe(),ce.forEach((function(t){p[u]?s.insertBefore(t,p[u]):s.appendChild(t),u++})),r===M(oe)&&(h=!1,ce.forEach((function(t){t.sortableIndex!==M(t)&&(h=!0)})),h&&(o("update"),o("sort")))),ce.forEach((function(t){F(t)})),c.animateAll()),ie=c),(n===s||a&&"clone"!==a.lastPutMode)&&le.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal:function(){this.isMultiDrag=de=!1,le.length=0},destroyGlobal:function(){this._deselectMultiDrag(),m(document,"pointerup",this._deselectMultiDrag),m(document,"mouseup",this._deselectMultiDrag),m(document,"touchend",this._deselectMultiDrag),m(document,"keydown",this._checkKeyDown),m(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==de&&de||ie!==this.sortable||t&&_(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;ce.length;){var e=ce[0];x(e,this.options.selectedClass,!1),ce.shift(),z({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvent:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},s(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[j];e&&e.options.multiDrag&&!~ce.indexOf(t)&&(ie&&ie!==e&&(ie.multiDrag._deselectMultiDrag(),ie=e),x(t,e.options.selectedClass,!0),ce.push(t))},deselect:function(t){var e=t.parentNode[j],n=ce.indexOf(t);e&&e.options.multiDrag&&~n&&(x(t,e.options.selectedClass,!1),ce.splice(n,1))}},eventProperties:function(){var t=this,e=[],n=[];return ce.forEach((function(s){var i;e.push({multiDragElement:s,index:s.sortableIndex}),i=he&&s!==oe?-1:he?M(s,":not(."+t.options.selectedClass+")"):M(s),n.push({multiDragElement:s,index:i})})),{items:i(ce),clones:[].concat(le),oldIndicies:e,newIndicies:n}},optionListeners:{multiDragKey:function(t){return"ctrl"===(t=t.toLowerCase())?t="Control":1<t.length&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}),Ft})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).TypeIt=e()}(this,(function(){"use strict";const t=t=>Array.isArray(t),e=e=>t(e)?e:[e],n=t=>Array.from(t),s=t=>document.createTextNode(t);let i=t=>([...t.childNodes].forEach((t=>{if(t.nodeValue)return[...t.nodeValue].forEach((e=>{t.parentNode.insertBefore(s(e),t)})),void t.remove();i(t)})),t);const o=t=>{let e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,i(e.body)},r="data-typeit-id",a="ti-cursor",c={started:!1,completed:!1,frozen:!1,destroyed:!1},l={breakLines:!0,cursor:{autoPause:!0,autoPauseDelay:500,animation:{frames:[0,0,1].map((t=>({opacity:t}))),options:{iterations:1/0,easing:"steps(2, start)",fill:"forwards"}}},cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},u=`[${r}]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}`;function h(t,e=!1,n=!1){let s,i=t.querySelector(`.${a}`),o=document.createTreeWalker(t,NodeFilter.SHOW_ALL,{acceptNode:t=>{if(i&&n){if(t.classList?.contains(a))return NodeFilter.FILTER_ACCEPT;if(i.contains(t))return NodeFilter.FILTER_REJECT}return t.classList?.contains(a)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),r=[];for(;s=o.nextNode();)s.originalParent||(s.originalParent=s.parentNode),r.push(s);return e?r.reverse():r}function d(t,e=!0){return e?h(o(t)):n(t).map(s)}const p=t=>document.createElement(t),f=(t,e="")=>{let n=p("style");n.id=e,n.appendChild(s(t)),document.head.appendChild(n)},m=e=>(t(e)||(e=[e/2,e/2]),e),g=(t,e)=>Math.abs(Math.random()*(t+e-(t-e))+(t-e));let _=t=>t/2;const v=t=>"value"in t;let y=t=>"function"==typeof t?t():t;const x=t=>Number.isInteger(t);let b=(t,e=document,n=!1)=>e["querySelector"+(n?"All":"")](t);const w=(t,e)=>Object.assign({},t,e);let T={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"",transform:"translateX(-.125em)"};const S=(t,e)=>new Array(e).fill(t),k=({queueItems:t,selector:e,cursorPosition:n,to:s})=>{if(x(e))return-1*e;let i=new RegExp("END","i").test(s),o=e?[...t].reverse().findIndex((({char:t})=>{let n=t.parentElement,s=n.matches(e);return!(!i||!s)||s&&n.firstChild.isSameNode(t)})):-1;return o<0&&(o=i?0:t.length-1),o-n+(i?0:1)};let C=t=>new Promise((e=>{requestAnimationFrame((async()=>{e(await t())}))})),D=t=>t?.getAnimations().find((e=>e.id===t.dataset.tiAnimationId)),A=({cursor:t,frames:e,options:n})=>{let s=t.animate(e,n);return s.pause(),s.id=t.dataset.tiAnimationId,C((()=>{C((()=>{s.play()}))})),s},M=t=>t.func?.call(null),O=async({index:t,queueItems:e,wait:n,cursor:s,cursorOptions:i})=>{let o=e[t][1],r=[],a=t,c=o,l=()=>c&&!c.delay,u=o.shouldPauseCursor()&&i.autoPause;for(;l();)r.push(c),l()&&a++,c=e[a]?e[a][1]:null;if(r.length)return await C((async()=>{for(let t of r)await M(t)})),a-1;let h,d=D(s);return d&&(h={...d.effect.getComputedTiming(),delay:u?i.autoPauseDelay:0}),await n((async()=>{d&&u&&d.cancel(),await C((()=>{M(o)}))}),o.delay),await(({cursor:t,options:e,cursorOptions:n})=>{if(!t||!n)return;let s,i=D(t);i&&(e.delay=i.effect.getComputedTiming().delay,s=i.currentTime,i.cancel());let o=A({cursor:t,frames:n.animation.frames,options:e});return s&&(o.currentTime=s),o})({cursor:s,options:h,cursorOptions:i}),t};return function(t,s={}){let C=async(t,e,n=!1)=>{Z.frozen&&await new Promise((t=>{this.unfreeze=()=>{Z.frozen=!1,t()}})),n||await Q.beforeStep(this),await((t,e,n)=>new Promise((s=>{n.push(setTimeout((async()=>{await t(),s()}),e||0))})))(t,e,G),n||await Q.afterStep(this)},D=(t,e)=>O({index:t,queueItems:e,wait:C,cursor:et,cursorOptions:Q.cursor}),M=t=>((t,e)=>{if(!t)return;let n=t.parentNode;(n.childNodes.length>1||n.isSameNode(e)?t:n).remove()})(t,B),E=()=>v(B),R=(t=0)=>function(t){let{speed:e,deleteSpeed:n,lifeLike:s}=t;return n=null!==n?n:e/3,s?[g(e,_(e)),g(n,_(n))]:[e,n]}(Q)[t],N=()=>(t=>v(t)?n(t.value):h(t,!0).filter((t=>!(t.childNodes.length>0))))(B),q=(t,e)=>(K.add(t),((t={})=>{let e=t.delay;e&&K.add({delay:e})})(e),this),I=()=>$??X,P=(t={})=>[{func:()=>W(t)},{func:()=>W(Q)}],F=t=>{let e=Q.nextStringDelay;K.add([{delay:e[0]},...t,{delay:e[1]}])},V=async()=>{if(!E()&&et&&B.appendChild(et),tt){((t,e)=>{let n=`[${r}='${t}'] .${a}`,s=getComputedStyle(e),i=Object.entries(T).reduce(((t,[e,n])=>`${t} ${e}: var(--ti-cursor-${e}, ${n||s[e]});`),"");f(`${n} { display: inline-block; width: 0; ${i} }`,t)})(J,B),et.dataset.tiAnimationId=J;let{animation:t}=Q.cursor,{frames:e,options:n}=t;A({frames:e,cursor:et,options:{duration:Q.cursorSpeed,...n}})}},j=async(t=!0)=>{Z.started=!0;let e=e=>{K.done(e,!t)};try{let n=[...K.getQueue()];for(let t=0;t<n.length;t++){let[s,i]=n[t];if(!i.done){if(!i.deletable||i.deletable&&N().length){let s=await D(t,n);Array(s-t).fill(t+1).map(((t,e)=>t+e)).forEach((t=>{let[s]=n[t];e(s)})),t=s}e(s)}}if(!t)return this;if(Z.completed=!0,await Q.afterComplete(this),!Q.loop)throw"";let s=Q.loopDelay;C((async()=>{await(async t=>{let e=I();e&&await L({value:e});let n=N().map((t=>[Symbol(),{func:H,delay:R(1),deletable:!0,shouldPauseCursor:()=>!0}]));for(let t=0;t<n.length;t++)await D(t,n);K.reset(),K.set(0,{delay:t})})(s[0]),j()}),s[1])}catch(t){}return this},L=async t=>{var e,n,s;e=t,n=X,s=N(),X=Math.min(Math.max(n+e,0),s.length),((t,e,n)=>{let s=e[n-1],i=b(`.${a}`,t);(t=s?.parentNode||t).insertBefore(i,s||null)})(B,N(),X)},Y=t=>((t,e)=>{if(v(t))return void(t.value=`${t.value}${e.textContent}`);e.innerHTML="";let n=(s=e.originalParent,/body/i.test(s?.tagName)?t:e.originalParent||t);var s;n.insertBefore(e,b("."+a,n)||null)})(B,t),W=async t=>Q=w(Q,t),z=async()=>{E()?B.value="":N().forEach(M)},H=()=>{let t=N();t.length&&(E()?B.value=B.value.slice(0,-1):M(t[X]))};this.break=function(t){return q({func:()=>Y(p("BR")),typeable:!0},t)},this.delete=function(t=null,e={}){t=y(t);let n=P(e),s=t,{instant:i,to:o}=e,r=K.getTypeable(),a=null===s?r.length:x(s)?s:k({queueItems:r,selector:s,cursorPosition:I(),to:o});return q([n[0],...S({func:H,delay:i?0:R(1),deletable:!0},a),n[1]],e)},this.empty=function(t={}){return q({func:z},t)},this.exec=function(t,e={}){let n=P(e);return q([n[0],{func:()=>t(this)},n[1]],e)},this.move=function(t,e={}){t=y(t);let n=P(e),{instant:s,to:i}=e,o=k({queueItems:K.getTypeable(),selector:null===t?"":t,to:i,cursorPosition:I()}),r=o<0?-1:1;return $=I()+o,q([n[0],...S({func:()=>L(r),delay:s?0:R(),cursorable:!0},Math.abs(o)),n[1]],e)},this.options=function(t,e={}){return t=y(t),W(t),q({},e)},this.pause=function(t,e={}){return q({delay:y(t)},e)},this.type=function(t,e={}){t=y(t);let{instant:n}=e,s=P(e),i=d(t,Q.html).map((t=>{return{func:()=>Y(t),char:t,delay:n||(e=t,/<(.+)>(.*?)<\/(.+)>/.test(e.outerHTML))?0:R(),typeable:t.nodeType===Node.TEXT_NODE};var e})),o=[s[0],{func:async()=>await Q.beforeString(t,this)},...i,{func:async()=>await Q.afterString(t,this)},s[1]];return q(o,e)},this.is=function(t){return Z[t]},this.destroy=function(t=!0){G.forEach(clearTimeout),G=[],y(t)&&et&&M(et),Z.destroyed=!0},this.freeze=function(){Z.frozen=!0},this.unfreeze=()=>{},this.reset=function(t){!this.is("destroyed")&&this.destroy(),t?(K.wipe(),t(this)):K.reset(),X=0;for(let t in Z)Z[t]=!1;return B[E()?"value":"innerHTML"]="",this},this.go=function(){return Z.started?this:(V(),Q.waitUntilVisible?(((t,e)=>{new IntersectionObserver(((n,s)=>{n.forEach((n=>{n.isIntersecting&&(e(),s.unobserve(t))}))}),{threshold:1}).observe(t)})(B,j.bind(this)),this):(j(),this))},this.flush=function(t=(()=>{})){return V(),j(!1).then(t),this},this.getQueue=()=>K,this.getOptions=()=>Q,this.updateOptions=t=>W(t),this.getElement=()=>B;let B="string"==typeof(U=t)?b(U):U;var U;let G=[],X=0,$=null,Z=w({},c);s.cursor=(t=>{if("object"==typeof t){let e={},{frames:n,options:s}=l.cursor.animation;return e.animation=t.animation||{},e.animation.frames=t.animation?.frames||n,e.animation.options=w(s,t.animation?.options||{}),e.autoPause=t.autoPause??l.cursor.autoPause,e.autoPauseDelay=t.autoPauseDelay||l.cursor.autoPauseDelay,e}return!0===t?l.cursor:t})(s.cursor??l.cursor);let Q=w(l,s);Q=w(Q,{html:!E()&&Q.html,nextStringDelay:m(Q.nextStringDelay),loopDelay:m(Q.loopDelay)});let J=Math.random().toString().substring(2,9),K=function(t){let n=function(t){return e(t).forEach((t=>o.set(Symbol(t.char?.innerText),s({...t})))),this},s=t=>(t.shouldPauseCursor=function(){return Boolean(this.typeable||this.cursorable||this.deletable)},t),i=()=>Array.from(o.values()),o=new Map;return n(t),{add:n,set:function(t,e){let n=[...o.keys()];o.set(n[t],s(e))},wipe:function(){o=new Map,n(t)},reset:function(){o.forEach((t=>delete t.done))},destroy:t=>o.delete(t),done:(t,e=!1)=>e?o.delete(t):o.get(t).done=!0,getItems:(t=!1)=>t?i():i().filter((t=>!t.done)),getQueue:()=>o,getTypeable:()=>i().filter((t=>t.typeable))}}([{delay:Q.startDelay}]);B.dataset.typeitId=J,f(u);let tt=!!Q.cursor&&!E(),et=(()=>{if(E())return;let t=p("span");return t.className=a,tt?(t.innerHTML=o(Q.cursorChar).innerHTML,t):(t.style.visibility="hidden",t)})();Q.strings=(t=>{let e=B.innerHTML;return e?(B.innerHTML="",Q.startDelete?(B.innerHTML=e,i(B),F(S({func:H,delay:R(1),deletable:!0},N().length)),t):e.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/).concat(t)):t})(e(Q.strings)),Q.strings.length&&(()=>{let t=Q.strings.filter((t=>!!t));t.forEach(((e,n)=>{if(this.type(e),n+1===t.length)return;let s=Q.breakLines?[{func:()=>Y(p("BR")),typeable:!0}]:S({func:H,delay:R(1)},K.getTypeable().length);F(s)}))})()}})),function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,(function(t,e){"use strict";var n=[],s=Object.getPrototypeOf,i=n.slice,o=n.flat?function(t){return n.flat.call(t)}:function(t){return n.concat.apply([],t)},r=n.push,a=n.indexOf,c={},l=c.toString,u=c.hasOwnProperty,h=u.toString,d=h.call(Object),p={},f=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},m=function(t){return null!=t&&t===t.window},g=t.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function v(t,e,n){var s,i,o=(n=n||g).createElement("script");if(o.text=t,e)for(s in _)(i=e[s]||e.getAttribute&&e.getAttribute(s))&&o.setAttribute(s,i);n.head.appendChild(o).parentNode.removeChild(o)}function y(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[l.call(t)]||"object":typeof t}var x="3.7.1",b=/HTML$/i,w=function(t,e){return new w.fn.init(t,e)};function T(t){var e=!!t&&"length"in t&&t.length,n=y(t);return!f(t)&&!m(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}function S(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}w.fn=w.prototype={jquery:x,constructor:w,length:0,toArray:function(){return i.call(this)},get:function(t){return null==t?i.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(w.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:r,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var t,e,n,s,i,o,r=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[a]||{},a++),"object"==typeof r||f(r)||(r={}),a===c&&(r=this,a--);a<c;a++)if(null!=(t=arguments[a]))for(e in t)s=t[e],"__proto__"!==e&&r!==s&&(l&&s&&(w.isPlainObject(s)||(i=Array.isArray(s)))?(n=r[e],o=i&&!Array.isArray(n)?[]:i||w.isPlainObject(n)?n:{},i=!1,r[e]=w.extend(l,o,s)):void 0!==s&&(r[e]=s));return r},w.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==l.call(t)||(e=s(t))&&("function"!=typeof(n=u.call(e,"constructor")&&e.constructor)||h.call(n)!==d))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){v(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,s=0;if(T(t))for(n=t.length;s<n&&!1!==e.call(t[s],s,t[s]);s++);else for(s in t)if(!1===e.call(t[s],s,t[s]))break;return t},text:function(t){var e,n="",s=0,i=t.nodeType;if(!i)for(;e=t[s++];)n+=w.text(e);return 1===i||11===i?t.textContent:9===i?t.documentElement.textContent:3===i||4===i?t.nodeValue:n},makeArray:function(t,e){var n=e||[];return null!=t&&(T(Object(t))?w.merge(n,"string"==typeof t?[t]:t):r.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:a.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!b.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,s=0,i=t.length;s<n;s++)t[i++]=e[s];return t.length=i,t},grep:function(t,e,n){for(var s=[],i=0,o=t.length,r=!n;i<o;i++)!e(t[i],i)!==r&&s.push(t[i]);return s},map:function(t,e,n){var s,i,r=0,a=[];if(T(t))for(s=t.length;r<s;r++)null!=(i=e(t[r],r,n))&&a.push(i);else for(r in t)null!=(i=e(t[r],r,n))&&a.push(i);return o(a)},guid:1,support:p}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){c["[object "+e+"]"]=e.toLowerCase()}));var k=n.pop,C=n.sort,D=n.splice,A="[\\x20\\t\\r\\n\\f]",M=new RegExp("^"+A+"+|((?:^|[^\\\\])(?:\\\\.)*)"+A+"+$","g");w.contains=function(t,e){var n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var O=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function E(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}w.escapeSelector=function(t){return(t+"").replace(O,E)};var R=g,N=r;!function(){var e,s,o,r,c,l,h,d,f,m,g=N,_=w.expando,v=0,y=0,x=tt(),b=tt(),T=tt(),O=tt(),E=function(t,e){return t===e&&(c=!0),0},q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="(?:\\\\[\\da-fA-F]{1,6}"+A+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",P="\\["+A+"*("+I+")(?:"+A+"*([*^$|!~]?=)"+A+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+A+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",V=new RegExp(A+"+","g"),j=new RegExp("^"+A+"*,"+A+"*"),L=new RegExp("^"+A+"*([>+~]|"+A+")"+A+"*"),Y=new RegExp(A+"|>"),W=new RegExp(F),z=new RegExp("^"+I+"$"),H={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+A+"*(even|odd|(([+-]|)(\\d*)n|)"+A+"*(?:([+-]|)"+A+"*(\\d+)|))"+A+"*\\)|)","i"),bool:new RegExp("^(?:"+q+")$","i"),needsContext:new RegExp("^"+A+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+A+"*((?:-\\d)?\\d*)"+A+"*\\)|)(?=[^-]|$)","i")},B=/^(?:input|select|textarea|button)$/i,U=/^h\d$/i,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,X=/[+~]/,$=new RegExp("\\\\[\\da-fA-F]{1,6}"+A+"?|\\\\([^\\r\\n\\f])","g"),Z=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Q=function(){ct()},J=dt((function(t){return!0===t.disabled&&S(t,"fieldset")}),{dir:"parentNode",next:"legend"});try{g.apply(n=i.call(R.childNodes),R.childNodes),n[R.childNodes.length].nodeType}catch(e){g={apply:function(t,e){N.apply(t,i.call(e))},call:function(t){N.apply(t,i.call(arguments,1))}}}function K(t,e,n,s){var i,o,r,a,c,u,h,m=e&&e.ownerDocument,v=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==v&&9!==v&&11!==v)return n;if(!s&&(ct(e),e=e||l,d)){if(11!==v&&(c=G.exec(t)))if(i=c[1]){if(9===v){if(!(r=e.getElementById(i)))return n;if(r.id===i)return g.call(n,r),n}else if(m&&(r=m.getElementById(i))&&K.contains(e,r)&&r.id===i)return g.call(n,r),n}else{if(c[2])return g.apply(n,e.getElementsByTagName(t)),n;if((i=c[3])&&e.getElementsByClassName)return g.apply(n,e.getElementsByClassName(i)),n}if(!(O[t+" "]||f&&f.test(t))){if(h=t,m=e,1===v&&(Y.test(t)||L.test(t))){for((m=X.test(t)&&at(e.parentNode)||e)==e&&p.scope||((a=e.getAttribute("id"))?a=w.escapeSelector(a):e.setAttribute("id",a=_)),o=(u=ut(t)).length;o--;)u[o]=(a?"#"+a:":scope")+" "+ht(u[o]);h=u.join(",")}try{return g.apply(n,m.querySelectorAll(h)),n}catch(e){O(t,!0)}finally{a===_&&e.removeAttribute("id")}}}return vt(t.replace(M,"$1"),e,n,s)}function tt(){var t=[];return function e(n,i){return t.push(n+" ")>s.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function et(t){return t[_]=!0,t}function nt(t){var e=l.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function st(t){return function(e){return S(e,"input")&&e.type===t}}function it(t){return function(e){return(S(e,"input")||S(e,"button"))&&e.type===t}}function ot(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&J(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function rt(t){return et((function(e){return e=+e,et((function(n,s){for(var i,o=t([],n.length,e),r=o.length;r--;)n[i=o[r]]&&(n[i]=!(s[i]=n[i]))}))}))}function at(t){return t&&void 0!==t.getElementsByTagName&&t}function ct(t){var e,n=t?t.ownerDocument||t:R;return n!=l&&9===n.nodeType&&n.documentElement&&(h=(l=n).documentElement,d=!w.isXMLDoc(l),m=h.matches||h.webkitMatchesSelector||h.msMatchesSelector,h.msMatchesSelector&&R!=l&&(e=l.defaultView)&&e.top!==e&&e.addEventListener("unload",Q),p.getById=nt((function(t){return h.appendChild(t).id=w.expando,!l.getElementsByName||!l.getElementsByName(w.expando).length})),p.disconnectedMatch=nt((function(t){return m.call(t,"*")})),p.scope=nt((function(){return l.querySelectorAll(":scope")})),p.cssHas=nt((function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}})),p.getById?(s.filter.ID=function(t){var e=t.replace($,Z);return function(t){return t.getAttribute("id")===e}},s.find.ID=function(t,e){if(void 0!==e.getElementById&&d){var n=e.getElementById(t);return n?[n]:[]}}):(s.filter.ID=function(t){var e=t.replace($,Z);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},s.find.ID=function(t,e){if(void 0!==e.getElementById&&d){var n,s,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),s=0;o=i[s++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),s.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},s.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&d)return e.getElementsByClassName(t)},f=[],nt((function(t){var e;h.appendChild(t).innerHTML="<a id='"+_+"' href='' disabled='disabled'></a><select id='"+_+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||f.push("\\["+A+"*(?:value|"+q+")"),t.querySelectorAll("[id~="+_+"-]").length||f.push("~="),t.querySelectorAll("a#"+_+"+*").length||f.push(".#.+[+~]"),t.querySelectorAll(":checked").length||f.push(":checked"),(e=l.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),h.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),(e=l.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||f.push("\\["+A+"*name"+A+"*="+A+"*(?:''|\"\")")})),p.cssHas||f.push(":has"),f=f.length&&new RegExp(f.join("|")),E=function(t,e){if(t===e)return c=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!p.sortDetached&&e.compareDocumentPosition(t)===n?t===l||t.ownerDocument==R&&K.contains(R,t)?-1:e===l||e.ownerDocument==R&&K.contains(R,e)?1:r?a.call(r,t)-a.call(r,e):0:4&n?-1:1)}),l}for(e in K.matches=function(t,e){return K(t,null,null,e)},K.matchesSelector=function(t,e){if(ct(t),d&&!O[e+" "]&&(!f||!f.test(e)))try{var n=m.call(t,e);if(n||p.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){O(e,!0)}return 0<K(e,l,null,[t]).length},K.contains=function(t,e){return(t.ownerDocument||t)!=l&&ct(t),w.contains(t,e)},K.attr=function(t,e){(t.ownerDocument||t)!=l&&ct(t);var n=s.attrHandle[e.toLowerCase()],i=n&&u.call(s.attrHandle,e.toLowerCase())?n(t,e,!d):void 0;return void 0!==i?i:t.getAttribute(e)},K.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},w.uniqueSort=function(t){var e,n=[],s=0,o=0;if(c=!p.sortStable,r=!p.sortStable&&i.call(t,0),C.call(t,E),c){for(;e=t[o++];)e===t[o]&&(s=n.push(o));for(;s--;)D.call(t,n[s],1)}return r=null,t},w.fn.uniqueSort=function(){return this.pushStack(w.uniqueSort(i.apply(this)))},(s=w.expr={cacheLength:50,createPseudo:et,match:H,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace($,Z),t[3]=(t[3]||t[4]||t[5]||"").replace($,Z),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||K.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&K.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return H.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&W.test(n)&&(e=ut(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace($,Z).toLowerCase();return"*"===t?function(){return!0}:function(t){return S(t,e)}},CLASS:function(t){var e=x[t+" "];return e||(e=new RegExp("(^|"+A+")"+t+"("+A+"|$)"))&&x(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(s){var i=K.attr(s,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&-1<i.indexOf(n):"$="===e?n&&i.slice(-n.length)===n:"~="===e?-1<(" "+i.replace(V," ")+" ").indexOf(n):"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,s,i){var o="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===s&&0===i?function(t){return!!t.parentNode}:function(e,n,c){var l,u,h,d,p,f=o!==r?"nextSibling":"previousSibling",m=e.parentNode,g=a&&e.nodeName.toLowerCase(),y=!c&&!a,x=!1;if(m){if(o){for(;f;){for(h=e;h=h[f];)if(a?S(h,g):1===h.nodeType)return!1;p=f="only"===t&&!p&&"nextSibling"}return!0}if(p=[r?m.firstChild:m.lastChild],r&&y){for(x=(d=(l=(u=m[_]||(m[_]={}))[t]||[])[0]===v&&l[1])&&l[2],h=d&&m.childNodes[d];h=++d&&h&&h[f]||(x=d=0)||p.pop();)if(1===h.nodeType&&++x&&h===e){u[t]=[v,d,x];break}}else if(y&&(x=d=(l=(u=e[_]||(e[_]={}))[t]||[])[0]===v&&l[1]),!1===x)for(;(h=++d&&h&&h[f]||(x=d=0)||p.pop())&&(!(a?S(h,g):1===h.nodeType)||!++x||(y&&((u=h[_]||(h[_]={}))[t]=[v,x]),h!==e)););return(x-=i)===s||x%s==0&&0<=x/s}}},PSEUDO:function(t,e){var n,i=s.pseudos[t]||s.setFilters[t.toLowerCase()]||K.error("unsupported pseudo: "+t);return i[_]?i(e):1<i.length?(n=[t,t,"",e],s.setFilters.hasOwnProperty(t.toLowerCase())?et((function(t,n){for(var s,o=i(t,e),r=o.length;r--;)t[s=a.call(t,o[r])]=!(n[s]=o[r])})):function(t){return i(t,0,n)}):i}},pseudos:{not:et((function(t){var e=[],n=[],s=_t(t.replace(M,"$1"));return s[_]?et((function(t,e,n,i){for(var o,r=s(t,null,i,[]),a=t.length;a--;)(o=r[a])&&(t[a]=!(e[a]=o))})):function(t,i,o){return e[0]=t,s(e,null,o,n),e[0]=null,!n.pop()}})),has:et((function(t){return function(e){return 0<K(t,e).length}})),contains:et((function(t){return t=t.replace($,Z),function(e){return-1<(e.textContent||w.text(e)).indexOf(t)}})),lang:et((function(t){return z.test(t||"")||K.error("unsupported lang: "+t),t=t.replace($,Z).toLowerCase(),function(e){var n;do{if(n=d?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===h},focus:function(t){return t===function(){try{return l.activeElement}catch(t){}}()&&l.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:ot(!1),disabled:ot(!0),checked:function(t){return S(t,"input")&&!!t.checked||S(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!s.pseudos.empty(t)},header:function(t){return U.test(t.nodeName)},input:function(t){return B.test(t.nodeName)},button:function(t){return S(t,"input")&&"button"===t.type||S(t,"button")},text:function(t){var e;return S(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:rt((function(){return[0]})),last:rt((function(t,e){return[e-1]})),eq:rt((function(t,e,n){return[n<0?n+e:n]})),even:rt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:rt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:rt((function(t,e,n){var s;for(s=n<0?n+e:e<n?e:n;0<=--s;)t.push(s);return t})),gt:rt((function(t,e,n){for(var s=n<0?n+e:n;++s<e;)t.push(s);return t}))}}).pseudos.nth=s.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[e]=st(e);for(e in{submit:!0,reset:!0})s.pseudos[e]=it(e);function lt(){}function ut(t,e){var n,i,o,r,a,c,l,u=b[t+" "];if(u)return e?0:u.slice(0);for(a=t,c=[],l=s.preFilter;a;){for(r in n&&!(i=j.exec(a))||(i&&(a=a.slice(i[0].length)||a),c.push(o=[])),n=!1,(i=L.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(M," ")}),a=a.slice(n.length)),s.filter)!(i=H[r].exec(a))||l[r]&&!(i=l[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?K.error(t):b(t,c).slice(0)}function ht(t){for(var e=0,n=t.length,s="";e<n;e++)s+=t[e].value;return s}function dt(t,e,n){var s=e.dir,i=e.next,o=i||s,r=n&&"parentNode"===o,a=y++;return e.first?function(e,n,i){for(;e=e[s];)if(1===e.nodeType||r)return t(e,n,i);return!1}:function(e,n,c){var l,u,h=[v,a];if(c){for(;e=e[s];)if((1===e.nodeType||r)&&t(e,n,c))return!0}else for(;e=e[s];)if(1===e.nodeType||r)if(u=e[_]||(e[_]={}),i&&S(e,i))e=e[s]||e;else{if((l=u[o])&&l[0]===v&&l[1]===a)return h[2]=l[2];if((u[o]=h)[2]=t(e,n,c))return!0}return!1}}function pt(t){return 1<t.length?function(e,n,s){for(var i=t.length;i--;)if(!t[i](e,n,s))return!1;return!0}:t[0]}function ft(t,e,n,s,i){for(var o,r=[],a=0,c=t.length,l=null!=e;a<c;a++)(o=t[a])&&(n&&!n(o,s,i)||(r.push(o),l&&e.push(a)));return r}function mt(t,e,n,s,i,o){return s&&!s[_]&&(s=mt(s)),i&&!i[_]&&(i=mt(i,o)),et((function(o,r,c,l){var u,h,d,p,f=[],m=[],_=r.length,v=o||function(t,e,n){for(var s=0,i=e.length;s<i;s++)K(t,e[s],n);return n}(e||"*",c.nodeType?[c]:c,[]),y=!t||!o&&e?v:ft(v,f,t,c,l);if(n?n(y,p=i||(o?t:_||s)?[]:r,c,l):p=y,s)for(u=ft(p,m),s(u,[],c,l),h=u.length;h--;)(d=u[h])&&(p[m[h]]=!(y[m[h]]=d));if(o){if(i||t){if(i){for(u=[],h=p.length;h--;)(d=p[h])&&u.push(y[h]=d);i(null,p=[],u,l)}for(h=p.length;h--;)(d=p[h])&&-1<(u=i?a.call(o,d):f[h])&&(o[u]=!(r[u]=d))}}else p=ft(p===r?p.splice(_,p.length):p),i?i(null,r,p,l):g.apply(r,p)}))}function gt(t){for(var e,n,i,r=t.length,c=s.relative[t[0].type],l=c||s.relative[" "],u=c?1:0,h=dt((function(t){return t===e}),l,!0),d=dt((function(t){return-1<a.call(e,t)}),l,!0),p=[function(t,n,s){var i=!c&&(s||n!=o)||((e=n).nodeType?h(t,n,s):d(t,n,s));return e=null,i}];u<r;u++)if(n=s.relative[t[u].type])p=[dt(pt(p),n)];else{if((n=s.filter[t[u].type].apply(null,t[u].matches))[_]){for(i=++u;i<r&&!s.relative[t[i].type];i++);return mt(1<u&&pt(p),1<u&&ht(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(M,"$1"),n,u<i&&gt(t.slice(u,i)),i<r&&gt(t=t.slice(i)),i<r&&ht(t))}p.push(n)}return pt(p)}function _t(t,e){var n,i,r,a,c,u,h=[],p=[],f=T[t+" "];if(!f){for(e||(e=ut(t)),n=e.length;n--;)(f=gt(e[n]))[_]?h.push(f):p.push(f);(f=T(t,(i=p,a=0<(r=h).length,c=0<i.length,u=function(t,e,n,u,h){var p,f,m,_=0,y="0",x=t&&[],b=[],T=o,S=t||c&&s.find.TAG("*",h),C=v+=null==T?1:Math.random()||.1,D=S.length;for(h&&(o=e==l||e||h);y!==D&&null!=(p=S[y]);y++){if(c&&p){for(f=0,e||p.ownerDocument==l||(ct(p),n=!d);m=i[f++];)if(m(p,e||l,n)){g.call(u,p);break}h&&(v=C)}a&&((p=!m&&p)&&_--,t&&x.push(p))}if(_+=y,a&&y!==_){for(f=0;m=r[f++];)m(x,b,e,n);if(t){if(0<_)for(;y--;)x[y]||b[y]||(b[y]=k.call(u));b=ft(b)}g.apply(u,b),h&&!t&&0<b.length&&1<_+r.length&&w.uniqueSort(u)}return h&&(v=C,o=T),x},a?et(u):u))).selector=t}return f}function vt(t,e,n,i){var o,r,a,c,l,u="function"==typeof t&&t,h=!i&&ut(t=u.selector||t);if(n=n||[],1===h.length){if(2<(r=h[0]=h[0].slice(0)).length&&"ID"===(a=r[0]).type&&9===e.nodeType&&d&&s.relative[r[1].type]){if(!(e=(s.find.ID(a.matches[0].replace($,Z),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=H.needsContext.test(t)?0:r.length;o--&&(a=r[o],!s.relative[c=a.type]);)if((l=s.find[c])&&(i=l(a.matches[0].replace($,Z),X.test(r[0].type)&&at(e.parentNode)||e))){if(r.splice(o,1),!(t=i.length&&ht(r)))return g.apply(n,i),n;break}}return(u||_t(t,h))(i,e,!d,n,!e||X.test(t)&&at(e.parentNode)||e),n}lt.prototype=s.filters=s.pseudos,s.setFilters=new lt,p.sortStable=_.split("").sort(E).join("")===_,ct(),p.sortDetached=nt((function(t){return 1&t.compareDocumentPosition(l.createElement("fieldset"))})),w.find=K,w.expr[":"]=w.expr.pseudos,w.unique=w.uniqueSort,K.compile=_t,K.select=vt,K.setDocument=ct,K.tokenize=ut,K.escape=w.escapeSelector,K.getText=w.text,K.isXML=w.isXMLDoc,K.selectors=w.expr,K.support=w.support,K.uniqueSort=w.uniqueSort}();var q=function(t,e,n){for(var s=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&w(t).is(n))break;s.push(t)}return s},I=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},P=w.expr.match.needsContext,F=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function V(t,e,n){return f(e)?w.grep(t,(function(t,s){return!!e.call(t,s,t)!==n})):e.nodeType?w.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?w.grep(t,(function(t){return-1<a.call(e,t)!==n})):w.filter(e,t,n)}w.filter=function(t,e,n){var s=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===s.nodeType?w.find.matchesSelector(s,t)?[s]:[]:w.find.matches(t,w.grep(e,(function(t){return 1===t.nodeType})))},w.fn.extend({find:function(t){var e,n,s=this.length,i=this;if("string"!=typeof t)return this.pushStack(w(t).filter((function(){for(e=0;e<s;e++)if(w.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<s;e++)w.find(t,i[e],n);return 1<s?w.uniqueSort(n):n},filter:function(t){return this.pushStack(V(this,t||[],!1))},not:function(t){return this.pushStack(V(this,t||[],!0))},is:function(t){return!!V(this,"string"==typeof t&&P.test(t)?w(t):t||[],!1).length}});var j,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,e,n){var s,i;if(!t)return this;if(n=n||j,"string"==typeof t){if(!(s="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:L.exec(t))||!s[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(s[1]){if(e=e instanceof w?e[0]:e,w.merge(this,w.parseHTML(s[1],e&&e.nodeType?e.ownerDocument||e:g,!0)),F.test(s[1])&&w.isPlainObject(e))for(s in e)f(this[s])?this[s](e[s]):this.attr(s,e[s]);return this}return(i=g.getElementById(s[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):f(t)?void 0!==n.ready?n.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,j=w(g);var Y=/^(?:parents|prev(?:Until|All))/,W={children:!0,contents:!0,next:!0,prev:!0};function z(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(w.contains(this,e[t]))return!0}))},closest:function(t,e){var n,s=0,i=this.length,o=[],r="string"!=typeof t&&w(t);if(!P.test(t))for(;s<i;s++)for(n=this[s];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(r?-1<r.index(n):1===n.nodeType&&w.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?w.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?a.call(w(t),this[0]):a.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return q(t,"parentNode")},parentsUntil:function(t,e,n){return q(t,"parentNode",n)},next:function(t){return z(t,"nextSibling")},prev:function(t){return z(t,"previousSibling")},nextAll:function(t){return q(t,"nextSibling")},prevAll:function(t){return q(t,"previousSibling")},nextUntil:function(t,e,n){return q(t,"nextSibling",n)},prevUntil:function(t,e,n){return q(t,"previousSibling",n)},siblings:function(t){return I((t.parentNode||{}).firstChild,t)},children:function(t){return I(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(S(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},(function(t,e){w.fn[t]=function(n,s){var i=w.map(this,e,n);return"Until"!==t.slice(-5)&&(s=n),s&&"string"==typeof s&&(i=w.filter(s,i)),1<this.length&&(W[t]||w.uniqueSort(i),Y.test(t)&&i.reverse()),this.pushStack(i)}}));var H=/[^\x20\t\r\n\f]+/g;function B(t){return t}function U(t){throw t}function G(t,e,n,s){var i;try{t&&f(i=t.promise)?i.call(t).done(e).fail(n):t&&f(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(s))}catch(t){n.apply(void 0,[t])}}w.Callbacks=function(t){var e,n;t="string"==typeof t?(e=t,n={},w.each(e.match(H)||[],(function(t,e){n[e]=!0})),n):w.extend({},t);var s,i,o,r,a=[],c=[],l=-1,u=function(){for(r=r||t.once,o=s=!0;c.length;l=-1)for(i=c.shift();++l<a.length;)!1===a[l].apply(i[0],i[1])&&t.stopOnFalse&&(l=a.length,i=!1);t.memory||(i=!1),s=!1,r&&(a=i?[]:"")},h={add:function(){return a&&(i&&!s&&(l=a.length-1,c.push(i)),function e(n){w.each(n,(function(n,s){f(s)?t.unique&&h.has(s)||a.push(s):s&&s.length&&"string"!==y(s)&&e(s)}))}(arguments),i&&!s&&u()),this},remove:function(){return w.each(arguments,(function(t,e){for(var n;-1<(n=w.inArray(e,a,n));)a.splice(n,1),n<=l&&l--})),this},has:function(t){return t?-1<w.inArray(t,a):0<a.length},empty:function(){return a&&(a=[]),this},disable:function(){return r=c=[],a=i="",this},disabled:function(){return!a},lock:function(){return r=c=[],i||s||(a=i=""),this},locked:function(){return!!r},fireWith:function(t,e){return r||(e=[t,(e=e||[]).slice?e.slice():e],c.push(e),s||u()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},w.extend({Deferred:function(e){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],s="pending",i={state:function(){return s},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return w.Deferred((function(e){w.each(n,(function(n,s){var i=f(t[s[4]])&&t[s[4]];o[s[1]]((function(){var t=i&&i.apply(this,arguments);t&&f(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[s[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(e,s,i){var o=0;function r(e,n,s,i){return function(){var a=this,c=arguments,l=function(){var t,l;if(!(e<o)){if((t=s.apply(a,c))===n.promise())throw new TypeError("Thenable self-resolution");l=t&&("object"==typeof t||"function"==typeof t)&&t.then,f(l)?i?l.call(t,r(o,n,B,i),r(o,n,U,i)):(o++,l.call(t,r(o,n,B,i),r(o,n,U,i),r(o,n,B,n.notifyWith))):(s!==B&&(a=void 0,c=[t]),(i||n.resolveWith)(a,c))}},u=i?l:function(){try{l()}catch(t){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(t,u.error),o<=e+1&&(s!==U&&(a=void 0,c=[t]),n.rejectWith(a,c))}};e?u():(w.Deferred.getErrorHook?u.error=w.Deferred.getErrorHook():w.Deferred.getStackHook&&(u.error=w.Deferred.getStackHook()),t.setTimeout(u))}}return w.Deferred((function(t){n[0][3].add(r(0,t,f(i)?i:B,t.notifyWith)),n[1][3].add(r(0,t,f(e)?e:B)),n[2][3].add(r(0,t,f(s)?s:U))})).promise()},promise:function(t){return null!=t?w.extend(t,i):i}},o={};return w.each(n,(function(t,e){var r=e[2],a=e[5];i[e[1]]=r.add,a&&r.add((function(){s=a}),n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),r.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=r.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,n=e,s=Array(n),o=i.call(arguments),r=w.Deferred(),a=function(t){return function(n){s[t]=this,o[t]=1<arguments.length?i.call(arguments):n,--e||r.resolveWith(s,o)}};if(e<=1&&(G(t,r.done(a(n)).resolve,r.reject,!e),"pending"===r.state()||f(o[n]&&o[n].then)))return r.then();for(;n--;)G(o[n],a(n),r.reject);return r.promise()}});var X=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&X.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},w.readyException=function(e){t.setTimeout((function(){throw e}))};var $=w.Deferred();function Z(){g.removeEventListener("DOMContentLoaded",Z),t.removeEventListener("load",Z),w.ready()}w.fn.ready=function(t){return $.then(t).catch((function(t){w.readyException(t)})),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0)!==t&&0<--w.readyWait||$.resolveWith(g,[w])}}),w.ready.then=$.then,"complete"===g.readyState||"loading"!==g.readyState&&!g.documentElement.doScroll?t.setTimeout(w.ready):(g.addEventListener("DOMContentLoaded",Z),t.addEventListener("load",Z));var Q=function(t,e,n,s,i,o,r){var a=0,c=t.length,l=null==n;if("object"===y(n))for(a in i=!0,n)Q(t,e,a,n[a],!0,o,r);else if(void 0!==s&&(i=!0,f(s)||(r=!0),l&&(r?(e.call(t,s),e=null):(l=e,e=function(t,e,n){return l.call(w(t),n)})),e))for(;a<c;a++)e(t[a],n,r?s:s.call(t[a],a,e(t[a],n)));return i?t:l?e.call(t):c?e(t[0],n):o},J=/^-ms-/,K=/-([a-z])/g;function tt(t,e){return e.toUpperCase()}function et(t){return t.replace(J,"ms-").replace(K,tt)}var nt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function st(){this.expando=w.expando+st.uid++}st.uid=1,st.prototype={cache:function(t){var e=t[this.expando];return e||(e={},nt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var s,i=this.cache(t);if("string"==typeof e)i[et(e)]=n;else for(s in e)i[et(s)]=e[s];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][et(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,s=t[this.expando];if(void 0!==s){if(void 0!==e){n=(e=Array.isArray(e)?e.map(et):(e=et(e))in s?[e]:e.match(H)||[]).length;for(;n--;)delete s[e[n]]}(void 0===e||w.isEmptyObject(s))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var it=new st,ot=new st,rt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,at=/[A-Z]/g;function ct(t,e,n){var s,i;if(void 0===n&&1===t.nodeType)if(s="data-"+e.replace(at,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(s))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:rt.test(i)?JSON.parse(i):i)}catch(t){}ot.set(t,e,n)}else n=void 0;return n}w.extend({hasData:function(t){return ot.hasData(t)||it.hasData(t)},data:function(t,e,n){return ot.access(t,e,n)},removeData:function(t,e){ot.remove(t,e)},_data:function(t,e,n){return it.access(t,e,n)},_removeData:function(t,e){it.remove(t,e)}}),w.fn.extend({data:function(t,e){var n,s,i,o=this[0],r=o&&o.attributes;if(void 0===t){if(this.length&&(i=ot.get(o),1===o.nodeType&&!it.get(o,"hasDataAttrs"))){for(n=r.length;n--;)r[n]&&0===(s=r[n].name).indexOf("data-")&&(s=et(s.slice(5)),ct(o,s,i[s]));it.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){ot.set(this,t)})):Q(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=ot.get(o,t))||void 0!==(n=ct(o,t))?n:void 0;this.each((function(){ot.set(this,t,e)}))}),null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each((function(){ot.remove(this,t)}))}}),w.extend({queue:function(t,e,n){var s;if(t)return e=(e||"fx")+"queue",s=it.get(t,e),n&&(!s||Array.isArray(n)?s=it.access(t,e,w.makeArray(n)):s.push(n)),s||[]},dequeue:function(t,e){e=e||"fx";var n=w.queue(t,e),s=n.length,i=n.shift(),o=w._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),s--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){w.dequeue(t,e)}),o)),!s&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return it.get(t,n)||it.access(t,n,{empty:w.Callbacks("once memory").add((function(){it.remove(t,[e+"queue",n])}))})}}),w.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?w.queue(this[0],t):void 0===e?this:this.each((function(){var n=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&w.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){w.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,s=1,i=w.Deferred(),o=this,r=this.length,a=function(){--s||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)(n=it.get(o[r],t+"queueHooks"))&&n.empty&&(s++,n.empty.add(a));return a(),i.promise(e)}});var lt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ut=new RegExp("^(?:([+-])=|)("+lt+")([a-z%]*)$","i"),ht=["Top","Right","Bottom","Left"],dt=g.documentElement,pt=function(t){return w.contains(t.ownerDocument,t)},ft={composed:!0};dt.getRootNode&&(pt=function(t){return w.contains(t.ownerDocument,t)||t.getRootNode(ft)===t.ownerDocument});var mt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&pt(t)&&"none"===w.css(t,"display")};function gt(t,e,n,s){var i,o,r=20,a=s?function(){return s.cur()}:function(){return w.css(t,e,"")},c=a(),l=n&&n[3]||(w.cssNumber[e]?"":"px"),u=t.nodeType&&(w.cssNumber[e]||"px"!==l&&+c)&&ut.exec(w.css(t,e));if(u&&u[3]!==l){for(c/=2,l=l||u[3],u=+c||1;r--;)w.style(t,e,u+l),(1-o)*(1-(o=a()/c||.5))<=0&&(r=0),u/=o;u*=2,w.style(t,e,u+l),n=n||[]}return n&&(u=+u||+c||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],s&&(s.unit=l,s.start=u,s.end=i)),i}var _t={};function vt(t,e){for(var n,s,i,o,r,a,c,l=[],u=0,h=t.length;u<h;u++)(s=t[u]).style&&(n=s.style.display,e?("none"===n&&(l[u]=it.get(s,"display")||null,l[u]||(s.style.display="")),""===s.style.display&&mt(s)&&(l[u]=(c=r=o=void 0,r=(i=s).ownerDocument,a=i.nodeName,(c=_t[a])||(o=r.body.appendChild(r.createElement(a)),c=w.css(o,"display"),o.parentNode.removeChild(o),"none"===c&&(c="block"),_t[a]=c)))):"none"!==n&&(l[u]="none",it.set(s,"display",n)));for(u=0;u<h;u++)null!=l[u]&&(t[u].style.display=l[u]);return t}w.fn.extend({show:function(){return vt(this,!0)},hide:function(){return vt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){mt(this)?w(this).show():w(this).hide()}))}});var yt,xt,bt=/^(?:checkbox|radio)$/i,wt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Tt=/^$|^module$|\/(?:java|ecma)script/i;yt=g.createDocumentFragment().appendChild(g.createElement("div")),(xt=g.createElement("input")).setAttribute("type","radio"),xt.setAttribute("checked","checked"),xt.setAttribute("name","t"),yt.appendChild(xt),p.checkClone=yt.cloneNode(!0).cloneNode(!0).lastChild.checked,yt.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!yt.cloneNode(!0).lastChild.defaultValue,yt.innerHTML="<option></option>",p.option=!!yt.lastChild;var St={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function kt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&S(t,e)?w.merge([t],n):n}function Ct(t,e){for(var n=0,s=t.length;n<s;n++)it.set(t[n],"globalEval",!e||it.get(e[n],"globalEval"))}St.tbody=St.tfoot=St.colgroup=St.caption=St.thead,St.th=St.td,p.option||(St.optgroup=St.option=[1,"<select multiple='multiple'>","</select>"]);var Dt=/<|&#?\w+;/;function At(t,e,n,s,i){for(var o,r,a,c,l,u,h=e.createDocumentFragment(),d=[],p=0,f=t.length;p<f;p++)if((o=t[p])||0===o)if("object"===y(o))w.merge(d,o.nodeType?[o]:o);else if(Dt.test(o)){for(r=r||h.appendChild(e.createElement("div")),a=(wt.exec(o)||["",""])[1].toLowerCase(),c=St[a]||St._default,r.innerHTML=c[1]+w.htmlPrefilter(o)+c[2],u=c[0];u--;)r=r.lastChild;w.merge(d,r.childNodes),(r=h.firstChild).textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",p=0;o=d[p++];)if(s&&-1<w.inArray(o,s))i&&i.push(o);else if(l=pt(o),r=kt(h.appendChild(o),"script"),l&&Ct(r),n)for(u=0;o=r[u++];)Tt.test(o.type||"")&&n.push(o);return h}var Mt=/^([^.]*)(?:\.(.+)|)/;function Ot(){return!0}function Et(){return!1}function Rt(t,e,n,s,i,o){var r,a;if("object"==typeof e){for(a in"string"!=typeof n&&(s=s||n,n=void 0),e)Rt(t,a,n,s,e[a],o);return t}if(null==s&&null==i?(i=n,s=n=void 0):null==i&&("string"==typeof n?(i=s,s=void 0):(i=s,s=n,n=void 0)),!1===i)i=Et;else if(!i)return t;return 1===o&&(r=i,(i=function(t){return w().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=w.guid++)),t.each((function(){w.event.add(this,e,i,s,n)}))}function Nt(t,e,n){n?(it.set(t,e,!1),w.event.add(t,e,{namespace:!1,handler:function(t){var n,s=it.get(this,e);if(1&t.isTrigger&&this[e]){if(s)(w.event.special[e]||{}).delegateType&&t.stopPropagation();else if(s=i.call(arguments),it.set(this,e,s),this[e](),n=it.get(this,e),it.set(this,e,!1),s!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else s&&(it.set(this,e,w.event.trigger(s[0],s.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=Ot)}})):void 0===it.get(t,e)&&w.event.add(t,e,Ot)}w.event={global:{},add:function(t,e,n,s,i){var o,r,a,c,l,u,h,d,p,f,m,g=it.get(t);if(nt(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(dt,i),n.guid||(n.guid=w.guid++),(c=g.events)||(c=g.events=Object.create(null)),(r=g.handle)||(r=g.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(H)||[""]).length;l--;)p=m=(a=Mt.exec(e[l])||[])[1],f=(a[2]||"").split(".").sort(),p&&(h=w.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=w.event.special[p]||{},u=w.extend({type:p,origType:m,data:s,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:f.join(".")},o),(d=c[p])||((d=c[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,s,f,r)||t.addEventListener&&t.addEventListener(p,r)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,u):d.push(u),w.event.global[p]=!0)},remove:function(t,e,n,s,i){var o,r,a,c,l,u,h,d,p,f,m,g=it.hasData(t)&&it.get(t);if(g&&(c=g.events)){for(l=(e=(e||"").match(H)||[""]).length;l--;)if(p=m=(a=Mt.exec(e[l])||[])[1],f=(a[2]||"").split(".").sort(),p){for(h=w.event.special[p]||{},d=c[p=(s?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=d.length;o--;)u=d[o],!i&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||s&&s!==u.selector&&("**"!==s||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));r&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,f,g.handle)||w.removeEvent(t,p,g.handle),delete c[p])}else for(p in c)w.event.remove(t,p+e[l],n,s,!0);w.isEmptyObject(c)&&it.remove(t,"handle events")}},dispatch:function(t){var e,n,s,i,o,r,a=new Array(arguments.length),c=w.event.fix(t),l=(it.get(this,"events")||Object.create(null))[c.type]||[],u=w.event.special[c.type]||{};for(a[0]=c,e=1;e<arguments.length;e++)a[e]=arguments[e];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(r=w.event.handlers.call(this,c,l),e=0;(i=r[e++])&&!c.isPropagationStopped();)for(c.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==o.namespace&&!c.rnamespace.test(o.namespace)||(c.handleObj=o,c.data=o.data,void 0!==(s=((w.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(c.result=s)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(t,e){var n,s,i,o,r,a=[],c=e.delegateCount,l=t.target;if(c&&l.nodeType&&!("click"===t.type&&1<=t.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(o=[],r={},n=0;n<c;n++)void 0===r[i=(s=e[n]).selector+" "]&&(r[i]=s.needsContext?-1<w(i,this).index(l):w.find(i,this,null,[l]).length),r[i]&&o.push(s);o.length&&a.push({elem:l,handlers:o})}return l=this,c<e.length&&a.push({elem:l,handlers:e.slice(c)}),a},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:f(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return bt.test(e.type)&&e.click&&S(e,"input")&&Nt(e,"click",!0),!1},trigger:function(t){var e=this||t;return bt.test(e.type)&&e.click&&S(e,"input")&&Nt(e,"click"),!0},_default:function(t){var e=t.target;return bt.test(e.type)&&e.click&&S(e,"input")&&it.get(e,"click")||S(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Ot:Et,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Et,isPropagationStopped:Et,isImmediatePropagationStopped:Et,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Ot,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Ot,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Ot,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},(function(t,e){function n(t){if(g.documentMode){var n=it.get(this,"handle"),s=w.event.fix(t);s.type="focusin"===t.type?"focus":"blur",s.isSimulated=!0,n(t),s.target===s.currentTarget&&n(s)}else w.event.simulate(e,t.target,w.event.fix(t))}w.event.special[t]={setup:function(){var s;if(Nt(this,t,!0),!g.documentMode)return!1;(s=it.get(this,e))||this.addEventListener(e,n),it.set(this,e,(s||0)+1)},trigger:function(){return Nt(this,t),!0},teardown:function(){var t;if(!g.documentMode)return!1;(t=it.get(this,e)-1)?it.set(this,e,t):(this.removeEventListener(e,n),it.remove(this,e))},_default:function(e){return it.get(e.target,t)},delegateType:e},w.event.special[e]={setup:function(){var s=this.ownerDocument||this.document||this,i=g.documentMode?this:s,o=it.get(i,e);o||(g.documentMode?this.addEventListener(e,n):s.addEventListener(t,n,!0)),it.set(i,e,(o||0)+1)},teardown:function(){var s=this.ownerDocument||this.document||this,i=g.documentMode?this:s,o=it.get(i,e)-1;o?it.set(i,e,o):(g.documentMode?this.removeEventListener(e,n):s.removeEventListener(t,n,!0),it.remove(i,e))}}})),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,s=t.relatedTarget,i=t.handleObj;return s&&(s===this||w.contains(this,s))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}})),w.fn.extend({on:function(t,e,n,s){return Rt(this,t,e,n,s)},one:function(t,e,n,s){return Rt(this,t,e,n,s,1)},off:function(t,e,n){var s,i;if(t&&t.preventDefault&&t.handleObj)return s=t.handleObj,w(t.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Et),this.each((function(){w.event.remove(this,t,n,e)}))}});var qt=/<script|<style|<link/i,It=/checked\s*(?:[^=]|=\s*.checked.)/i,Pt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ft(t,e){return S(t,"table")&&S(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function Vt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function jt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Lt(t,e){var n,s,i,o,r,a;if(1===e.nodeType){if(it.hasData(t)&&(a=it.get(t).events))for(i in it.remove(e,"handle events"),a)for(n=0,s=a[i].length;n<s;n++)w.event.add(e,i,a[i][n]);ot.hasData(t)&&(o=ot.access(t),r=w.extend({},o),ot.set(e,r))}}function Yt(t,e,n,s){e=o(e);var i,r,a,c,l,u,h=0,d=t.length,m=d-1,g=e[0],_=f(g);if(_||1<d&&"string"==typeof g&&!p.checkClone&&It.test(g))return t.each((function(i){var o=t.eq(i);_&&(e[0]=g.call(this,i,o.html())),Yt(o,e,n,s)}));if(d&&(r=(i=At(e,t[0].ownerDocument,!1,t,s)).firstChild,1===i.childNodes.length&&(i=r),r||s)){for(c=(a=w.map(kt(i,"script"),Vt)).length;h<d;h++)l=i,h!==m&&(l=w.clone(l,!0,!0),c&&w.merge(a,kt(l,"script"))),n.call(t[h],l,h);if(c)for(u=a[a.length-1].ownerDocument,w.map(a,jt),h=0;h<c;h++)l=a[h],Tt.test(l.type||"")&&!it.access(l,"globalEval")&&w.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&!l.noModule&&w._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):v(l.textContent.replace(Pt,""),l,u))}return t}function Wt(t,e,n){for(var s,i=e?w.filter(e,t):t,o=0;null!=(s=i[o]);o++)n||1!==s.nodeType||w.cleanData(kt(s)),s.parentNode&&(n&&pt(s)&&Ct(kt(s,"script")),s.parentNode.removeChild(s));return t}w.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var s,i,o,r,a,c,l,u=t.cloneNode(!0),h=pt(t);if(!(p.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(r=kt(u),s=0,i=(o=kt(t)).length;s<i;s++)a=o[s],"input"===(l=(c=r[s]).nodeName.toLowerCase())&&bt.test(a.type)?c.checked=a.checked:"input"!==l&&"textarea"!==l||(c.defaultValue=a.defaultValue);if(e)if(n)for(o=o||kt(t),r=r||kt(u),s=0,i=o.length;s<i;s++)Lt(o[s],r[s]);else Lt(t,u);return 0<(r=kt(u,"script")).length&&Ct(r,!h&&kt(t,"script")),u},cleanData:function(t){for(var e,n,s,i=w.event.special,o=0;void 0!==(n=t[o]);o++)if(nt(n)){if(e=n[it.expando]){if(e.events)for(s in e.events)i[s]?w.event.remove(n,s):w.removeEvent(n,s,e.handle);n[it.expando]=void 0}n[ot.expando]&&(n[ot.expando]=void 0)}}}),w.fn.extend({detach:function(t){return Wt(this,t,!0)},remove:function(t){return Wt(this,t)},text:function(t){return Q(this,(function(t){return void 0===t?w.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Yt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ft(this,t).appendChild(t)}))},prepend:function(){return Yt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ft(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Yt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Yt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(kt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return w.clone(this,t,e)}))},html:function(t){return Q(this,(function(t){var e=this[0]||{},n=0,s=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!qt.test(t)&&!St[(wt.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;n<s;n++)1===(e=this[n]||{}).nodeType&&(w.cleanData(kt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Yt(this,arguments,(function(e){var n=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(kt(this)),n&&n.replaceChild(e,this))}),t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){w.fn[t]=function(t){for(var n,s=[],i=w(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(i[a])[e](n),r.apply(s,n.get());return this.pushStack(s)}}));var zt=new RegExp("^("+lt+")(?!px)[a-z%]+$","i"),Ht=/^--/,Bt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Ut=function(t,e,n){var s,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in s=n.call(t),e)t.style[i]=o[i];return s},Gt=new RegExp(ht.join("|"),"i");function Xt(t,e,n){var s,i,o,r,a=Ht.test(e),c=t.style;return(n=n||Bt(t))&&(r=n.getPropertyValue(e)||n[e],a&&r&&(r=r.replace(M,"$1")||void 0),""!==r||pt(t)||(r=w.style(t,e)),!p.pixelBoxStyles()&&zt.test(r)&&Gt.test(e)&&(s=c.width,i=c.minWidth,o=c.maxWidth,c.minWidth=c.maxWidth=c.width=r,r=n.width,c.width=s,c.minWidth=i,c.maxWidth=o)),void 0!==r?r+"":r}function $t(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",dt.appendChild(l).appendChild(u);var e=t.getComputedStyle(u);s="1%"!==e.top,c=12===n(e.marginLeft),u.style.right="60%",r=36===n(e.right),i=36===n(e.width),u.style.position="absolute",o=12===n(u.offsetWidth/3),dt.removeChild(l),u=null}}function n(t){return Math.round(parseFloat(t))}var s,i,o,r,a,c,l=g.createElement("div"),u=g.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===u.style.backgroundClip,w.extend(p,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),r},pixelPosition:function(){return e(),s},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,n,s,i;return null==a&&(e=g.createElement("table"),n=g.createElement("tr"),s=g.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="box-sizing:content-box;border:1px solid",n.style.height="1px",s.style.height="9px",s.style.display="block",dt.appendChild(e).appendChild(n).appendChild(s),i=t.getComputedStyle(n),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===n.offsetHeight,dt.removeChild(e)),a}}))}();var Zt=["Webkit","Moz","ms"],Qt=g.createElement("div").style,Jt={};function Kt(t){return w.cssProps[t]||Jt[t]||(t in Qt?t:Jt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Zt.length;n--;)if((t=Zt[n]+e)in Qt)return t}(t)||t)}var te=/^(none|table(?!-c[ea]).+)/,ee={position:"absolute",visibility:"hidden",display:"block"},ne={letterSpacing:"0",fontWeight:"400"};function se(t,e,n){var s=ut.exec(e);return s?Math.max(0,s[2]-(n||0))+(s[3]||"px"):e}function ie(t,e,n,s,i,o){var r="width"===e?1:0,a=0,c=0,l=0;if(n===(s?"border":"content"))return 0;for(;r<4;r+=2)"margin"===n&&(l+=w.css(t,n+ht[r],!0,i)),s?("content"===n&&(c-=w.css(t,"padding"+ht[r],!0,i)),"margin"!==n&&(c-=w.css(t,"border"+ht[r]+"Width",!0,i))):(c+=w.css(t,"padding"+ht[r],!0,i),"padding"!==n?c+=w.css(t,"border"+ht[r]+"Width",!0,i):a+=w.css(t,"border"+ht[r]+"Width",!0,i));return!s&&0<=o&&(c+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-c-a-.5))||0),c+l}function oe(t,e,n){var s=Bt(t),i=(!p.boxSizingReliable()||n)&&"border-box"===w.css(t,"boxSizing",!1,s),o=i,r=Xt(t,e,s),a="offset"+e[0].toUpperCase()+e.slice(1);if(zt.test(r)){if(!n)return r;r="auto"}return(!p.boxSizingReliable()&&i||!p.reliableTrDimensions()&&S(t,"tr")||"auto"===r||!parseFloat(r)&&"inline"===w.css(t,"display",!1,s))&&t.getClientRects().length&&(i="border-box"===w.css(t,"boxSizing",!1,s),(o=a in t)&&(r=t[a])),(r=parseFloat(r)||0)+ie(t,e,n||(i?"border":"content"),o,s,r)+"px"}function re(t,e,n,s,i){return new re.prototype.init(t,e,n,s,i)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Xt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,s){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,r,a=et(e),c=Ht.test(e),l=t.style;if(c||(e=Kt(a)),r=w.cssHooks[e]||w.cssHooks[a],void 0===n)return r&&"get"in r&&void 0!==(i=r.get(t,!1,s))?i:l[e];"string"==(o=typeof n)&&(i=ut.exec(n))&&i[1]&&(n=gt(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||c||(n+=i&&i[3]||(w.cssNumber[a]?"":"px")),p.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),r&&"set"in r&&void 0===(n=r.set(t,n,s))||(c?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,s){var i,o,r,a=et(e);return Ht.test(e)||(e=Kt(a)),(r=w.cssHooks[e]||w.cssHooks[a])&&"get"in r&&(i=r.get(t,!0,n)),void 0===i&&(i=Xt(t,e,s)),"normal"===i&&e in ne&&(i=ne[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],(function(t,e){w.cssHooks[e]={get:function(t,n,s){if(n)return!te.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?oe(t,e,s):Ut(t,ee,(function(){return oe(t,e,s)}))},set:function(t,n,s){var i,o=Bt(t),r=!p.scrollboxSize()&&"absolute"===o.position,a=(r||s)&&"border-box"===w.css(t,"boxSizing",!1,o),c=s?ie(t,e,s,a,o):0;return a&&r&&(c-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-ie(t,e,"border",!1,o)-.5)),c&&(i=ut.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=w.css(t,e)),se(0,n,c)}}})),w.cssHooks.marginLeft=$t(p.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Xt(t,"marginLeft"))||t.getBoundingClientRect().left-Ut(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),w.each({margin:"",padding:"",border:"Width"},(function(t,e){w.cssHooks[t+e]={expand:function(n){for(var s=0,i={},o="string"==typeof n?n.split(" "):[n];s<4;s++)i[t+ht[s]+e]=o[s]||o[s-2]||o[0];return i}},"margin"!==t&&(w.cssHooks[t+e].set=se)})),w.fn.extend({css:function(t,e){return Q(this,(function(t,e,n){var s,i,o={},r=0;if(Array.isArray(e)){for(s=Bt(t),i=e.length;r<i;r++)o[e[r]]=w.css(t,e[r],!1,s);return o}return void 0!==n?w.style(t,e,n):w.css(t,e)}),t,e,1<arguments.length)}}),((w.Tween=re).prototype={constructor:re,init:function(t,e,n,s,i,o){this.elem=t,this.prop=n,this.easing=i||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=s,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var t=re.propHooks[this.prop];return t&&t.get?t.get(this):re.propHooks._default.get(this)},run:function(t){var e,n=re.propHooks[this.prop];return this.options.duration?this.pos=e=w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):re.propHooks._default.set(this),this}}).init.prototype=re.prototype,(re.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||!w.cssHooks[t.prop]&&null==t.elem.style[Kt(t.prop)]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=re.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},w.fx=re.prototype.init,w.fx.step={};var ae,ce,le,ue,he=/^(?:toggle|show|hide)$/,de=/queueHooks$/;function pe(){ce&&(!1===g.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(pe):t.setTimeout(pe,w.fx.interval),w.fx.tick())}function fe(){return t.setTimeout((function(){ae=void 0})),ae=Date.now()}function me(t,e){var n,s=0,i={height:t};for(e=e?1:0;s<4;s+=2-e)i["margin"+(n=ht[s])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function ge(t,e,n){for(var s,i=(_e.tweeners[e]||[]).concat(_e.tweeners["*"]),o=0,r=i.length;o<r;o++)if(s=i[o].call(n,e,t))return s}function _e(t,e,n){var s,i,o=0,r=_e.prefilters.length,a=w.Deferred().always((function(){delete c.elem})),c=function(){if(i)return!1;for(var e=ae||fe(),n=Math.max(0,l.startTime+l.duration-e),s=1-(n/l.duration||0),o=0,r=l.tweens.length;o<r;o++)l.tweens[o].run(s);return a.notifyWith(t,[l,s,n]),s<1&&r?n:(r||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:e,originalOptions:n,startTime:ae||fe(),duration:n.duration,tweens:[],createTween:function(e,n){var s=w.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(s),s},stop:function(e){var n=0,s=e?l.tweens.length:0;if(i)return this;for(i=!0;n<s;n++)l.tweens[n].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),u=l.props;for(function(t,e){var n,s,i,o,r;for(n in t)if(i=e[s=et(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==s&&(t[s]=o,delete t[n]),(r=w.cssHooks[s])&&"expand"in r)for(n in o=r.expand(o),delete t[s],o)n in t||(t[n]=o[n],e[n]=i);else e[s]=i}(u,l.opts.specialEasing);o<r;o++)if(s=_e.prefilters[o].call(l,t,u,l.opts))return f(s.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=s.stop.bind(s)),s;return w.map(u,ge,l),f(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(c,{elem:t,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(_e,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return gt(n.elem,t,ut.exec(e),n),n}]},tweener:function(t,e){f(t)?(e=t,t=["*"]):t=t.match(H);for(var n,s=0,i=t.length;s<i;s++)n=t[s],_e.tweeners[n]=_e.tweeners[n]||[],_e.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var s,i,o,r,a,c,l,u,h="width"in e||"height"in e,d=this,p={},f=t.style,m=t.nodeType&&mt(t),g=it.get(t,"fxshow");for(s in n.queue||(null==(r=w._queueHooks(t,"fx")).unqueued&&(r.unqueued=0,a=r.empty.fire,r.empty.fire=function(){r.unqueued||a()}),r.unqueued++,d.always((function(){d.always((function(){r.unqueued--,w.queue(t,"fx").length||r.empty.fire()}))}))),e)if(i=e[s],he.test(i)){if(delete e[s],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[s])continue;m=!0}p[s]=g&&g[s]||w.style(t,s)}if((c=!w.isEmptyObject(e))||!w.isEmptyObject(p))for(s in h&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(l=g&&g.display)&&(l=it.get(t,"display")),"none"===(u=w.css(t,"display"))&&(l?u=l:(vt([t],!0),l=t.style.display||l,u=w.css(t,"display"),vt([t]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===w.css(t,"float")&&(c||(d.done((function(){f.display=l})),null==l&&(u=f.display,l="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),c=!1,p)c||(g?"hidden"in g&&(m=g.hidden):g=it.access(t,"fxshow",{display:l}),o&&(g.hidden=!m),m&&vt([t],!0),d.done((function(){for(s in m||vt([t]),it.remove(t,"fxshow"),p)w.style(t,s,p[s])}))),c=ge(m?g[s]:0,s,d),s in g||(g[s]=c.start,m&&(c.end=c.start,c.start=0))}],prefilter:function(t,e){e?_e.prefilters.unshift(t):_e.prefilters.push(t)}}),w.speed=function(t,e,n){var s=t&&"object"==typeof t?w.extend({},t):{complete:n||!n&&e||f(t)&&t,duration:t,easing:n&&e||e&&!f(e)&&e};return w.fx.off?s.duration=0:"number"!=typeof s.duration&&(s.duration in w.fx.speeds?s.duration=w.fx.speeds[s.duration]:s.duration=w.fx.speeds._default),null!=s.queue&&!0!==s.queue||(s.queue="fx"),s.old=s.complete,s.complete=function(){f(s.old)&&s.old.call(this),s.queue&&w.dequeue(this,s.queue)},s},w.fn.extend({fadeTo:function(t,e,n,s){return this.filter(mt).css("opacity",0).show().end().animate({opacity:e},t,n,s)},animate:function(t,e,n,s){var i=w.isEmptyObject(t),o=w.speed(e,n,s),r=function(){var e=_e(this,w.extend({},t),o);(i||it.get(this,"finish"))&&e.stop(!0)};return r.finish=r,i||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(t,e,n){var s=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",o=w.timers,r=it.get(this);if(i)r[i]&&r[i].stop&&s(r[i]);else for(i in r)r[i]&&r[i].stop&&de.test(i)&&s(r[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||w.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=it.get(this),s=n[t+"queue"],i=n[t+"queueHooks"],o=w.timers,r=s?s.length:0;for(n.finish=!0,w.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<r;e++)s[e]&&s[e].finish&&s[e].finish.call(this);delete n.finish}))}}),w.each(["toggle","show","hide"],(function(t,e){var n=w.fn[e];w.fn[e]=function(t,s,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(me(e,!0),t,s,i)}})),w.each({slideDown:me("show"),slideUp:me("hide"),slideToggle:me("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){w.fn[t]=function(t,n,s){return this.animate(e,t,n,s)}})),w.timers=[],w.fx.tick=function(){var t,e=0,n=w.timers;for(ae=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||w.fx.stop(),ae=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){ce||(ce=!0,pe())},w.fx.stop=function(){ce=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(e,n){return e=w.fx&&w.fx.speeds[e]||e,n=n||"fx",this.queue(n,(function(n,s){var i=t.setTimeout(n,e);s.stop=function(){t.clearTimeout(i)}}))},le=g.createElement("input"),ue=g.createElement("select").appendChild(g.createElement("option")),le.type="checkbox",p.checkOn=""!==le.value,p.optSelected=ue.selected,(le=g.createElement("input")).value="t",le.type="radio",p.radioValue="t"===le.value;var ve,ye=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return Q(this,w.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each((function(){w.removeAttr(this,t)}))}}),w.extend({attr:function(t,e,n){var s,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?w.prop(t,e,n):(1===o&&w.isXMLDoc(t)||(i=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?ve:void 0)),void 0!==n?null===n?void w.removeAttr(t,e):i&&"set"in i&&void 0!==(s=i.set(t,n,e))?s:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(s=i.get(t,e))?s:null==(s=w.find.attr(t,e))?void 0:s)},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&S(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,s=0,i=e&&e.match(H);if(i&&1===t.nodeType)for(;n=i[s++];)t.removeAttribute(n)}}),ve={set:function(t,e,n){return!1===e?w.removeAttr(t,n):t.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=ye[e]||w.find.attr;ye[e]=function(t,e,s){var i,o,r=e.toLowerCase();return s||(o=ye[r],ye[r]=i,i=null!=n(t,e,s)?r:null,ye[r]=o),i}}));var xe=/^(?:input|select|textarea|button)$/i,be=/^(?:a|area)$/i;function we(t){return(t.match(H)||[]).join(" ")}function Te(t){return t.getAttribute&&t.getAttribute("class")||""}function Se(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(H)||[]}w.fn.extend({prop:function(t,e){return Q(this,w.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each((function(){delete this[w.propFix[t]||t]}))}}),w.extend({prop:function(t,e,n){var s,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(t)||(e=w.propFix[e]||e,i=w.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(s=i.set(t,n,e))?s:t[e]=n:i&&"get"in i&&null!==(s=i.get(t,e))?s:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):xe.test(t.nodeName)||be.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(w.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){w.propFix[this.toLowerCase()]=this})),w.fn.extend({addClass:function(t){var e,n,s,i,o,r;return f(t)?this.each((function(e){w(this).addClass(t.call(this,e,Te(this)))})):(e=Se(t)).length?this.each((function(){if(s=Te(this),n=1===this.nodeType&&" "+we(s)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");r=we(n),s!==r&&this.setAttribute("class",r)}})):this},removeClass:function(t){var e,n,s,i,o,r;return f(t)?this.each((function(e){w(this).removeClass(t.call(this,e,Te(this)))})):arguments.length?(e=Se(t)).length?this.each((function(){if(s=Te(this),n=1===this.nodeType&&" "+we(s)+" "){for(o=0;o<e.length;o++)for(i=e[o];-1<n.indexOf(" "+i+" ");)n=n.replace(" "+i+" "," ");r=we(n),s!==r&&this.setAttribute("class",r)}})):this:this.attr("class","")},toggleClass:function(t,e){var n,s,i,o,r=typeof t,a="string"===r||Array.isArray(t);return f(t)?this.each((function(n){w(this).toggleClass(t.call(this,n,Te(this),e),e)})):"boolean"==typeof e&&a?e?this.addClass(t):this.removeClass(t):(n=Se(t),this.each((function(){if(a)for(o=w(this),i=0;i<n.length;i++)s=n[i],o.hasClass(s)?o.removeClass(s):o.addClass(s);else void 0!==t&&"boolean"!==r||((s=Te(this))&&it.set(this,"__className__",s),this.setAttribute&&this.setAttribute("class",s||!1===t?"":it.get(this,"__className__")||""))})))},hasClass:function(t){var e,n,s=0;for(e=" "+t+" ";n=this[s++];)if(1===n.nodeType&&-1<(" "+we(Te(n))+" ").indexOf(e))return!0;return!1}});var ke=/\r/g;w.fn.extend({val:function(t){var e,n,s,i=this[0];return arguments.length?(s=f(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=s?t.call(this,n,w(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,(function(t){return null==t?"":t+""}))),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(ke,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:we(w.text(t))}},select:{get:function(t){var e,n,s,i=t.options,o=t.selectedIndex,r="select-one"===t.type,a=r?null:[],c=r?o+1:i.length;for(s=o<0?c:r?o:0;s<c;s++)if(((n=i[s]).selected||s===o)&&!n.disabled&&(!n.parentNode.disabled||!S(n.parentNode,"optgroup"))){if(e=w(n).val(),r)return e;a.push(e)}return a},set:function(t,e){for(var n,s,i=t.options,o=w.makeArray(e),r=i.length;r--;)((s=i[r]).selected=-1<w.inArray(w.valHooks.option.get(s),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],(function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<w.inArray(w(t).val(),e)}},p.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var Ce=t.location,De={guid:Date.now()},Ae=/\?/;w.parseXML=function(e){var n,s;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){}return s=n&&n.getElementsByTagName("parsererror")[0],n&&!s||w.error("Invalid XML: "+(s?w.map(s.childNodes,(function(t){return t.textContent})).join("\n"):e)),n};var Me=/^(?:focusinfocus|focusoutblur)$/,Oe=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(e,n,s,i){var o,r,a,c,l,h,d,p,_=[s||g],v=u.call(e,"type")?e.type:e,y=u.call(e,"namespace")?e.namespace.split("."):[];if(r=p=a=s=s||g,3!==s.nodeType&&8!==s.nodeType&&!Me.test(v+w.event.triggered)&&(-1<v.indexOf(".")&&(v=(y=v.split(".")).shift(),y.sort()),l=v.indexOf(":")<0&&"on"+v,(e=e[w.expando]?e:new w.Event(v,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=s),n=null==n?[e]:w.makeArray(n,[e]),d=w.event.special[v]||{},i||!d.trigger||!1!==d.trigger.apply(s,n))){if(!i&&!d.noBubble&&!m(s)){for(c=d.delegateType||v,Me.test(c+v)||(r=r.parentNode);r;r=r.parentNode)_.push(r),a=r;a===(s.ownerDocument||g)&&_.push(a.defaultView||a.parentWindow||t)}for(o=0;(r=_[o++])&&!e.isPropagationStopped();)p=r,e.type=1<o?c:d.bindType||v,(h=(it.get(r,"events")||Object.create(null))[e.type]&&it.get(r,"handle"))&&h.apply(r,n),(h=l&&r[l])&&h.apply&&nt(r)&&(e.result=h.apply(r,n),!1===e.result&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(_.pop(),n)||!nt(s)||l&&f(s[v])&&!m(s)&&((a=s[l])&&(s[l]=null),w.event.triggered=v,e.isPropagationStopped()&&p.addEventListener(v,Oe),s[v](),e.isPropagationStopped()&&p.removeEventListener(v,Oe),w.event.triggered=void 0,a&&(s[l]=a)),e.result}},simulate:function(t,e,n){var s=w.extend(new w.Event,n,{type:t,isSimulated:!0});w.event.trigger(s,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each((function(){w.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return w.event.trigger(t,e,n,!0)}});var Ee=/\[\]$/,Re=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,qe=/^(?:input|select|textarea|keygen)/i;function Ie(t,e,n,s){var i;if(Array.isArray(e))w.each(e,(function(e,i){n||Ee.test(t)?s(t,i):Ie(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,s)}));else if(n||"object"!==y(e))s(t,e);else for(i in e)Ie(t+"["+i+"]",e[i],n,s)}w.param=function(t,e){var n,s=[],i=function(t,e){var n=f(e)?e():e;s[s.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,(function(){i(this.name,this.value)}));else for(n in t)Ie(n,t[n],e,i);return s.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&qe.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!bt.test(t))})).map((function(t,e){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,(function(t){return{name:e.name,value:t.replace(Re,"\r\n")}})):{name:e.name,value:n.replace(Re,"\r\n")}})).get()}});var Pe=/%20/g,Fe=/#.*$/,Ve=/([?&])_=[^&]*/,je=/^(.*?):[ \t]*([^\r\n]*)$/gm,Le=/^(?:GET|HEAD)$/,Ye=/^\/\//,We={},ze={},He="*/".concat("*"),Be=g.createElement("a");function Ue(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var s,i=0,o=e.toLowerCase().match(H)||[];if(f(n))for(;s=o[i++];)"+"===s[0]?(s=s.slice(1)||"*",(t[s]=t[s]||[]).unshift(n)):(t[s]=t[s]||[]).push(n)}}function Ge(t,e,n,s){var i={},o=t===ze;function r(a){var c;return i[a]=!0,w.each(t[a]||[],(function(t,a){var l=a(e,n,s);return"string"!=typeof l||o||i[l]?o?!(c=l):void 0:(e.dataTypes.unshift(l),r(l),!1)})),c}return r(e.dataTypes[0])||!i["*"]&&r("*")}function Xe(t,e){var n,s,i=w.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:s||(s={}))[n]=e[n]);return s&&w.extend(!0,t,s),t}Be.href=Ce.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ce.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":He,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Xe(Xe(t,w.ajaxSettings),e):Xe(w.ajaxSettings,t)},ajaxPrefilter:Ue(We),ajaxTransport:Ue(ze),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0),n=n||{};var s,i,o,r,a,c,l,u,h,d,p=w.ajaxSetup({},n),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?w(f):w.event,_=w.Deferred(),v=w.Callbacks("once memory"),y=p.statusCode||{},x={},b={},T="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(l){if(!r)for(r={};e=je.exec(o);)r[e[1].toLowerCase()+" "]=(r[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=r[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(t,e){return null==l&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==l&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)S.always(t[S.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||T;return s&&s.abort(e),k(0,e),this}};if(_.promise(S),p.url=((e||p.url||Ce.href)+"").replace(Ye,Ce.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(H)||[""],null==p.crossDomain){c=g.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Be.protocol+"//"+Be.host!=c.protocol+"//"+c.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=w.param(p.data,p.traditional)),Ge(We,p,n,S),l)return S;for(h in(u=w.event&&p.global)&&0==w.active++&&w.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Le.test(p.type),i=p.url.replace(Fe,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Pe,"+")):(d=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(Ae.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Ve,"$1"),d=(Ae.test(i)?"&":"?")+"_="+De.guid+++d),p.url=i+d),p.ifModified&&(w.lastModified[i]&&S.setRequestHeader("If-Modified-Since",w.lastModified[i]),w.etag[i]&&S.setRequestHeader("If-None-Match",w.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+He+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(f,S,p)||l))return S.abort();if(T="abort",v.add(p.complete),S.done(p.success),S.fail(p.error),s=Ge(ze,p,n,S)){if(S.readyState=1,u&&m.trigger("ajaxSend",[S,p]),l)return S;p.async&&0<p.timeout&&(a=t.setTimeout((function(){S.abort("timeout")}),p.timeout));try{l=!1,s.send(x,k)}catch(e){if(l)throw e;k(-1,e)}}else k(-1,"No Transport");function k(e,n,r,c){var h,d,g,x,b,T=n;l||(l=!0,a&&t.clearTimeout(a),s=void 0,o=c||"",S.readyState=0<e?4:0,h=200<=e&&e<300||304===e,r&&(x=function(t,e,n){for(var s,i,o,r,a=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===s&&(s=t.mimeType||e.getResponseHeader("Content-Type"));if(s)for(i in a)if(a[i]&&a[i].test(s)){c.unshift(i);break}if(c[0]in n)o=c[0];else{for(i in n){if(!c[0]||t.converters[i+" "+c[0]]){o=i;break}r||(r=i)}o=o||r}if(o)return o!==c[0]&&c.unshift(o),n[o]}(p,S,r)),!h&&-1<w.inArray("script",p.dataTypes)&&w.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),x=function(t,e,n,s){var i,o,r,a,c,l={},u=t.dataTypes.slice();if(u[1])for(r in t.converters)l[r.toLowerCase()]=t.converters[r];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!c&&s&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(r=l[c+" "+o]||l["* "+o]))for(i in l)if((a=i.split(" "))[1]===o&&(r=l[c+" "+a[0]]||l["* "+a[0]])){!0===r?r=l[i]:!0!==l[i]&&(o=a[0],u.unshift(a[1]));break}if(!0!==r)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(t){return{state:"parsererror",error:r?t:"No conversion from "+c+" to "+o}}}return{state:"success",data:e}}(p,x,S,h),h?(p.ifModified&&((b=S.getResponseHeader("Last-Modified"))&&(w.lastModified[i]=b),(b=S.getResponseHeader("etag"))&&(w.etag[i]=b)),204===e||"HEAD"===p.type?T="nocontent":304===e?T="notmodified":(T=x.state,d=x.data,h=!(g=x.error))):(g=T,!e&&T||(T="error",e<0&&(e=0))),S.status=e,S.statusText=(n||T)+"",h?_.resolveWith(f,[d,T,S]):_.rejectWith(f,[S,T,g]),S.statusCode(y),y=void 0,u&&m.trigger(h?"ajaxSuccess":"ajaxError",[S,p,h?d:g]),v.fireWith(f,[S,T]),u&&(m.trigger("ajaxComplete",[S,p]),--w.active||w.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,n){return w.get(t,e,n,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],(function(t,e){w[e]=function(t,n,s,i){return f(n)&&(i=i||s,s=n,n=void 0),w.ajax(w.extend({url:t,type:e,dataType:i,data:n,success:s},w.isPlainObject(t)&&t))}})),w.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),w._evalUrl=function(t,e,n){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){w.globalEval(t,e,n)}})},w.fn.extend({wrapAll:function(t){var e;return this[0]&&(f(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return f(t)?this.each((function(e){w(this).wrapInner(t.call(this,e))})):this.each((function(){var e=w(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=f(t);return this.each((function(n){w(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){w(this).replaceWith(this.childNodes)})),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var $e={0:200,1223:204},Ze=w.ajaxSettings.xhr();p.cors=!!Ze&&"withCredentials"in Ze,p.ajax=Ze=!!Ze,w.ajaxTransport((function(e){var n,s;if(p.cors||Ze&&!e.crossDomain)return{send:function(i,o){var r,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)a[r]=e.xhrFields[r];for(r in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(r,i[r]);n=function(t){return function(){n&&(n=s=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o($e[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),s=a.onerror=a.ontimeout=n("error"),void 0!==a.onabort?a.onabort=s:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout((function(){n&&s()}))},n=n("abort");try{a.send(e.hasContent&&e.data||null)}catch(i){if(n)throw i}},abort:function(){n&&n()}}})),w.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),w.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(s,i){e=w("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),g.head.appendChild(e[0])},abort:function(){n&&n()}}}));var Qe,Je=[],Ke=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Je.pop()||w.expando+"_"+De.guid++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",(function(e,n,s){var i,o,r,a=!1!==e.jsonp&&(Ke.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ke.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=f(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ke,"$1"+i):!1!==e.jsonp&&(e.url+=(Ae.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return r||w.error(i+" was not called"),r[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){r=arguments},s.always((function(){void 0===o?w(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Je.push(i)),r&&f(o)&&o(r[0]),r=o=void 0})),"script"})),p.createHTMLDocument=((Qe=g.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Qe.childNodes.length),w.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(p.createHTMLDocument?((s=(e=g.implementation.createHTMLDocument("")).createElement("base")).href=g.location.href,e.head.appendChild(s)):e=g),o=!n&&[],(i=F.exec(t))?[e.createElement(i[1])]:(i=At([t],e,o),o&&o.length&&w(o).remove(),w.merge([],i.childNodes)));var s,i,o},w.fn.load=function(t,e,n){var s,i,o,r=this,a=t.indexOf(" ");return-1<a&&(s=we(t.slice(a)),t=t.slice(0,a)),f(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),0<r.length&&w.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){o=arguments,r.html(s?w("<div>").append(w.parseHTML(t)).find(s):t)})).always(n&&function(t,e){r.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},w.expr.pseudos.animated=function(t){return w.grep(w.timers,(function(e){return t===e.elem})).length},w.offset={setOffset:function(t,e,n){var s,i,o,r,a,c,l=w.css(t,"position"),u=w(t),h={};"static"===l&&(t.style.position="relative"),a=u.offset(),o=w.css(t,"top"),c=w.css(t,"left"),("absolute"===l||"fixed"===l)&&-1<(o+c).indexOf("auto")?(r=(s=u.position()).top,i=s.left):(r=parseFloat(o)||0,i=parseFloat(c)||0),f(e)&&(e=e.call(t,n,w.extend({},a))),null!=e.top&&(h.top=e.top-a.top+r),null!=e.left&&(h.left=e.left-a.left+i),"using"in e?e.using.call(t,h):u.css(h)}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){w.offset.setOffset(this,t,e)}));var e,n,s=this[0];return s?s.getClientRects().length?(e=s.getBoundingClientRect(),n=s.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,s=this[0],i={top:0,left:0};if("fixed"===w.css(s,"position"))e=s.getBoundingClientRect();else{for(e=this.offset(),n=s.ownerDocument,t=s.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==s&&1===t.nodeType&&((i=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),i.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-w.css(s,"marginTop",!0),left:e.left-i.left-w.css(s,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||dt}))}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;w.fn[t]=function(s){return Q(this,(function(t,s,i){var o;if(m(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[s];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[s]=i}),t,s,arguments.length)}})),w.each(["top","left"],(function(t,e){w.cssHooks[e]=$t(p.pixelPosition,(function(t,n){if(n)return n=Xt(t,e),zt.test(n)?w(t).position()[e]+"px":n}))})),w.each({Height:"height",Width:"width"},(function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,s){w.fn[s]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return Q(this,(function(e,n,i){var o;return m(e)?0===s.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?w.css(e,n,a):w.style(e,n,i,a)}),e,r?i:void 0,r)}}))})),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){w.fn[e]=function(t){return this.on(e,t)}})),w.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,s){return this.on(e,t,n,s)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){w.fn[e]=function(t,n){return 0<arguments.length?this.on(e,null,t,n):this.trigger(e)}}));var tn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;w.proxy=function(t,e){var n,s,o;if("string"==typeof e&&(n=t[e],e=t,t=n),f(t))return s=i.call(arguments,2),(o=function(){return t.apply(e||this,s.concat(i.call(arguments)))}).guid=t.guid=t.guid||w.guid++,o},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=S,w.isFunction=f,w.isWindow=m,w.camelCase=et,w.type=y,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},w.trim=function(t){return null==t?"":(t+"").replace(tn,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return w}));var en=t.jQuery,nn=t.$;return w.noConflict=function(e){return t.$===w&&(t.$=nn),e&&t.jQuery===w&&(t.jQuery=en),w},void 0===e&&(t.jQuery=t.$=w),w})),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Tone=e():t.Tone=e()}("undefined"!=typeof self?self:this,(()=>(()=>{var t={871:function(t,e,n){!function(t,e,n,s){"use strict";var i=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},o=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},r=function(t,e){return{startTime:e,type:"setValue",value:t}},a=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},c=function(t,e,n){var s=n.startTime,i=n.target,o=n.timeConstant;return i+(e-i)*Math.exp((s-t)/o)},l=function(t){return"exponentialRampToValue"===t.type},u=function(t){return"linearRampToValue"===t.type},h=function(t){return l(t)||u(t)},d=function(t){return"setValue"===t.type},p=function(t){return"setValueCurve"===t.type},f=function t(e,n,s,i){var o=e[n];return void 0===o?i:h(o)||d(o)?o.value:p(o)?o.values[o.values.length-1]:c(s,t(e,n-1,o.startTime,i),o)},m=function(t,e,n,s,i){return void 0===n?[s.insertTime,i]:h(n)?[n.endTime,n.value]:d(n)?[n.startTime,n.value]:p(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,f(t,e-1,n.startTime,i)]},g=function(t){return"cancelAndHold"===t.type},_=function(t){return"cancelScheduledValues"===t.type},v=function(t){return g(t)||_(t)?t.cancelTime:l(t)||u(t)?t.endTime:t.startTime},y=function(t,e,n,s){var i=s.endTime,o=s.value;return n===o?o:0<n&&0<o||n<0&&o<0?n*Math.pow(o/n,(t-e)/(i-e)):0},x=function(t,e,n,s){return n+(t-e)/(s.endTime-e)*(s.value-n)},b=function(t){return"setTarget"===t.type},w=s((function t(e){n(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e}),[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=v(t);if(g(t)||_(t)){var n=this._automationEvents.findIndex((function(n){return _(t)&&p(n)?n.startTime+n.duration>=e:v(n)>=e})),s=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),g(t)){var c=this._automationEvents[this._automationEvents.length-1];if(void 0!==s&&h(s)){if(void 0!==c&&b(c))throw new Error("The internal list is malformed.");var d=void 0===c?s.insertTime:p(c)?c.startTime+c.duration:v(c),f=void 0===c?this._defaultValue:p(c)?c.values[c.values.length-1]:c.value,m=l(s)?y(e,d,f,s):x(e,d,f,s),w=l(s)?i(m,e,this._currenTime):o(m,e,this._currenTime);this._automationEvents.push(w)}if(void 0!==c&&b(c)&&this._automationEvents.push(r(this.getValue(e),e)),void 0!==c&&p(c)&&c.startTime+c.duration>e){var T=e-c.startTime,S=(c.values.length-1)/c.duration,k=Math.max(2,1+Math.ceil(T*S)),C=T/(k-1)*S,D=c.values.slice(0,k);if(C<1)for(var A=1;A<k;A+=1){var M=C*A%1;D[A]=c.values[A-1]*(1-M)+c.values[A]*M}this._automationEvents[this._automationEvents.length-1]=a(D,c.startTime,T)}}}else{var O=this._automationEvents.findIndex((function(t){return v(t)>e})),E=-1===O?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[O-1];if(void 0!==E&&p(E)&&v(E)+E.duration>e)return!1;var R=l(t)?i(t.value,t.endTime,this._currenTime):u(t)?o(t.value,e,this._currenTime):t;if(-1===O)this._automationEvents.push(R);else{if(p(t)&&e+t.duration>v(this._automationEvents[O]))return!1;this._automationEvents.splice(O,0,R)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex((function(e){return v(e)>t}));if(e>1){var n=this._automationEvents.slice(e-1),s=n[0];b(s)&&n.unshift(r(f(this._automationEvents,e-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents.findIndex((function(e){return v(e)>t})),s=this._automationEvents[n],i=(-1===n?this._automationEvents.length:n)-1,o=this._automationEvents[i];if(void 0!==o&&b(o)&&(void 0===s||!h(s)||s.insertTime>t))return c(t,f(this._automationEvents,i-1,o.startTime,this._defaultValue),o);if(void 0!==o&&d(o)&&(void 0===s||!h(s)))return o.value;if(void 0!==o&&p(o)&&(void 0===s||!h(s)||o.startTime+o.duration>t))return t<o.startTime+o.duration?function(t,e){var n=e.duration,s=e.startTime,i=e.values;return function(t,e){var n=Math.floor(e),s=Math.ceil(e);return n===s?t[n]:(1-(e-n))*t[n]+(1-(s-e))*t[s]}(i,(t-s)/n*(i.length-1))}(t,o):o.values[o.values.length-1];if(void 0!==o&&h(o)&&(void 0===s||!h(s)))return o.value;if(void 0!==s&&l(s)){var r=m(this._automationEvents,i,o,s,this._defaultValue),a=e(r,2),g=a[0],_=a[1];return y(t,g,_,s)}if(void 0!==s&&u(s)){var w=m(this._automationEvents,i,o,s,this._defaultValue),T=e(w,2),S=T[0],k=T[1];return x(t,S,k,s)}return this._defaultValue}}]);t.AutomationEventList=w,t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=r,t.createSetValueCurveAutomationEvent=a}(e,n(821),n(805),n(989))},113:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s},t.exports.__esModule=!0,t.exports.default=t.exports},569:t=>{t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},805:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},989:(t,e,n)=>{var s=n(498);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,s(i.key),i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},474:t=>{t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var s,i,o,r,a=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=o.call(n)).done)&&(a.push(s.value),a.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(l)throw i}}return a}},t.exports.__esModule=!0,t.exports.default=t.exports},18:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},821:(t,e,n)=>{var s=n(569),i=n(474),o=n(744),r=n(18);t.exports=function(t,e){return s(t)||i(t,e)||o(t,e)||r()},t.exports.__esModule=!0,t.exports.default=t.exports},327:(t,e,n)=>{var s=n(564).default;t.exports=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},498:(t,e,n)=>{var s=n(564).default,i=n(327);t.exports=function(t){var e=i(t,"string");return"symbol"==s(e)?e:e+""},t.exports.__esModule=!0,t.exports.default=t.exports},564:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},744:(t,e,n)=>{var s=n(113);t.exports=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}},e={};function n(s){var i=e[s];if(void 0!==i)return i.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,n),o.exports}n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};return(()=>{"use strict";n.r(s),n.d(s,{AMOscillator:()=>$o,AMSynth:()=>Cr,Abs:()=>hr,Add:()=>nr,AmplitudeEnvelope:()=>Tr,Analyser:()=>Ga,AudioToGain:()=>Go,AutoFilter:()=>ua,AutoPanner:()=>da,AutoWah:()=>fa,BaseContext:()=>ki,BiquadFilter:()=>Dr,BitCrusher:()=>ga,Buffer:()=>Cc,BufferSource:()=>Ac,Buffers:()=>Dc,Channel:()=>ec,Chebyshev:()=>va,Chorus:()=>Ta,Clock:()=>go,Compressor:()=>rc,Context:()=>Ci,Convolver:()=>dc,CrossFade:()=>aa,DCMeter:()=>Qa,Delay:()=>_o,Destination:()=>_c,Distortion:()=>Sa,Draw:()=>wc,DuoSynth:()=>Er,EQ3:()=>hc,Emitter:()=>Si,Envelope:()=>yr,FFT:()=>Za,FMOscillator:()=>Zo,FMSynth:()=>Rr,FatOscillator:()=>Jo,FeedbackCombFilter:()=>Wr,FeedbackDelay:()=>Ca,Filter:()=>Ar,Follower:()=>pa,Freeverb:()=>Ea,Frequency:()=>Zi,FrequencyClass:()=>Gi,FrequencyEnvelope:()=>Mr,FrequencyShifter:()=>Aa,Gain:()=>ao,GainToAudio:()=>dr,Gate:()=>ac,GrainPlayer:()=>ur,GreaterThan:()=>gr,GreaterThanZero:()=>mr,IntervalTimeline:()=>Ao,JCReverb:()=>Ia,LFO:()=>or,Limiter:()=>cc,Listener:()=>xc,Loop:()=>$r,LowpassCombFilter:()=>Hr,Master:()=>vc,MembraneSynth:()=>Ir,Merge:()=>xa,MetalSynth:()=>qr,Meter:()=>$a,MidSideCompressor:()=>lc,MidSideMerge:()=>Wa,MidSideSplit:()=>Ya,Midi:()=>So,MidiClass:()=>To,Mono:()=>nc,MonoSynth:()=>Or,MultibandCompressor:()=>uc,MultibandSplit:()=>sc,Multiply:()=>Xo,Negate:()=>pr,Noise:()=>jo,NoiseSynth:()=>Pr,Offline:()=>bo,OfflineContext:()=>Ei,OmniOscillator:()=>er,OnePoleFilter:()=>zr,Oscillator:()=>Uo,PWMOscillator:()=>Ko,PanVol:()=>tc,Panner:()=>ha,Panner3D:()=>ic,Param:()=>eo,Part:()=>Zr,Pattern:()=>oa,Phaser:()=>ja,PingPongDelay:()=>Fa,PitchShift:()=>Va,Player:()=>cr,Players:()=>lr,PluckSynth:()=>Br,PolySynth:()=>Ur,Pow:()=>No,PulseOscillator:()=>Qo,Recorder:()=>oc,Reverb:()=>La,Sampler:()=>Gr,Scale:()=>sr,ScaleExp:()=>_r,Sequence:()=>ra,Signal:()=>uo,Solo:()=>Ka,Split:()=>ya,StateTimeline:()=>to,StereoWidener:()=>Ha,Subtract:()=>fr,SyncedSignal:()=>vr,Synth:()=>Sr,Ticks:()=>Co,TicksClass:()=>ko,Time:()=>Ui,TimeClass:()=>Bi,Timeline:()=>yi,ToneAudioBuffer:()=>Oi,ToneAudioBuffers:()=>wo,ToneAudioNode:()=>no,ToneBufferSource:()=>Vo,ToneEvent:()=>Xr,ToneOscillatorNode:()=>Bo,Transport:()=>mc,TransportTime:()=>Ji,TransportTimeClass:()=>Qi,Tremolo:()=>Ba,Unit:()=>e,UserMedia:()=>zo,Vibrato:()=>Ua,Volume:()=>vo,WaveShaper:()=>Ro,Waveform:()=>Ja,Zero:()=>ir,connect:()=>io,connectSeries:()=>so,connectSignal:()=>ho,context:()=>Sc,dbToGain:()=>Fi,debug:()=>t,defaultArg:()=>ui,disconnect:()=>oo,fanIn:()=>ro,ftom:()=>Yi,gainToDb:()=>Vi,getContext:()=>qi,getDestination:()=>yc,getDraw:()=>Tc,getListener:()=>bc,getTransport:()=>gc,immediate:()=>fc,intervalToFrequencyRatio:()=>ji,isArray:()=>Vs,isBoolean:()=>Fs,isDefined:()=>Ns,isFunction:()=>qs,isNote:()=>Ls,isNumber:()=>Is,isObject:()=>Ps,isString:()=>js,isUndef:()=>Rs,loaded:()=>kc,mtof:()=>zi,now:()=>pc,optionsFromArguments:()=>li,setContext:()=>Ii,start:()=>Pi,supported:()=>Es,version:()=>i});var t={};n.r(t),n.d(t,{assert:()=>Ys,assertContextRunning:()=>zs,assertRange:()=>Ws,assertUsedScheduleTime:()=>Gs,enterScheduledCallback:()=>Us,log:()=>Zs,setLogger:()=>$s,warn:()=>Qs});var e={};n.r(e);const i="15.0.4";var o=n(871);const r=new WeakSet,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g={construct:()=>g},_=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,v=(t,e)=>{const n=[];let s=t.replace(/^[\s]+/,""),i=s.match(_);for(;null!==i;){const t=i[1].slice(1,-1),o=i[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(o),s=s.slice(i[0].length).replace(/^[\s]+/,""),i=s.match(_)}return[n.join(";"),s]},y=t=>{if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},x=t=>{if(!(t=>{try{new new Proxy(t,g)}catch{return!1}return!0})(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},b=(t,e)=>{const n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},w=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[s]=n;return t.delete(s),s},T=(t,e,n,s)=>{const i=b(t,e),o=w(i,(t=>t[0]===n&&t[1]===s));return 0===i.size&&t.delete(e),o},S=t=>b(d,t),k=t=>{if(r.has(t))throw new Error("The AudioNode is already stored.");r.add(t),S(t).forEach((t=>t(!0)))},C=t=>"port"in t,D=t=>{if(!r.has(t))throw new Error("The AudioNode is not stored.");r.delete(t),S(t).forEach((t=>t(!1)))},A=(t,e)=>{!C(t)&&e.every((t=>0===t.size))&&D(t)},M={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},O=(t,e)=>t.context===e,E=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},R=()=>new DOMException("","IndexSizeError"),N=t=>{var e;t.getChannelData=(e=t.getChannelData,n=>{try{return e.call(t,n)}catch(t){if(12===t.code)throw R();throw t}})},q={numberOfChannels:1},I=-34028234663852886e22,P=-I,F=t=>r.has(t),V={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},j=t=>b(a,t),L=t=>b(l,t),Y=(t,e)=>{const{activeInputs:n}=j(t);n.forEach((n=>n.forEach((([n])=>{e.includes(t)||Y(n,[...e,t])}))));const s=(t=>"playbackRate"in t)(t)?[t.playbackRate]:C(t)?Array.from(t.parameters.values()):(t=>"frequency"in t&&"gain"in t)(t)?[t.Q,t.detune,t.frequency,t.gain]:(t=>"offset"in t)(t)?[t.offset]:(t=>!("frequency"in t)&&"gain"in t)(t)?[t.gain]:(t=>"detune"in t&&"frequency"in t)(t)?[t.detune,t.frequency]:(t=>"pan"in t)(t)?[t.pan]:[];for(const t of s){const n=L(t);void 0!==n&&n.activeInputs.forEach((([t])=>Y(t,e)))}F(t)&&D(t)},W=t=>{Y(t.destination,[])},z=t=>"context"in t,H=t=>z(t[0]),B=(t,e,n,s)=>{for(const e of t)if(n(e)){if(s)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},U=(t,e,[n,s],i)=>{B(t,[e,n,s],(t=>t[0]===e&&t[1]===n),i)},G=(t,[e,n,s],i)=>{const o=t.get(e);void 0===o?t.set(e,new Set([[n,s]])):B(o,[n,s],(t=>t[0]===n),i)},X=t=>"inputs"in t,$=(t,e,n,s)=>{if(X(e)){const i=e.inputs[s];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,s),[e,n,s]},Z=(t,e,n)=>{for(const s of t)if(s[0]===e&&s[1]===n)return t.delete(s),s;return null},Q=(t,e)=>{if(!S(t).delete(e))throw new Error("Missing the expected event listener.")},J=(t,e,n)=>{const s=b(t,e),i=w(s,(t=>t[0]===n));return 0===s.size&&t.delete(e),i},K=(t,e,n,s)=>{X(e)?t.disconnect(e.inputs[s],n,0):t.disconnect(e,n,s)},tt=t=>b(c,t),et=t=>b(u,t),nt=t=>p.has(t),st=t=>!r.has(t),it=(t,e)=>new Promise((n=>{if(null!==e)n(!0);else{const e=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const r=t.createBufferSource();r.buffer=i,r.loop=!0,r.connect(e).connect(t.destination),r.connect(s),r.disconnect(s),e.onaudioprocess=s=>{const i=s.inputBuffer.getChannelData(0);Array.prototype.some.call(i,(t=>1===t))?n(!0):n(!1),r.stop(),e.onaudioprocess=null,r.disconnect(e),e.disconnect(t.destination)},r.start()}})),ot=(t,e)=>{const n=new Map;for(const e of t)for(const t of e){const e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach(((t,n)=>e(n,t)))},rt=t=>"context"in t,at=(t,e,n,s,i)=>{const[o,r]=((t,e,n,s)=>{const{activeInputs:i,passiveInputs:o}=j(e),r=Z(i[s],t,n);return null===r?[T(o,t,n,s)[2],!1]:[r[2],!0]})(t,n,s,i);if(null!==o&&(Q(t,o),!r||e||nt(t)||K(tt(t),tt(n),s,i)),F(n)){const{activeInputs:t}=j(n);A(n,t)}},ct=(t,e,n,s)=>{const[i,o]=((t,e,n)=>{const{activeInputs:s,passiveInputs:i}=L(e),o=Z(s,t,n);return null===o?[J(i,t,n)[1],!1]:[o[2],!0]})(t,n,s);null!==i&&(Q(t,i),!o||e||nt(t)||tt(t).disconnect(et(n),s))};class lt{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach(((n,s)=>t.call(e,n,s,this)))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const ut={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function ht(t,e,n,s,i){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],s,i);else{const o=t.getChannelData(s);if(0===e[n].byteLength)e[n]=o.slice(i,i+128);else{const t=new Float32Array(o.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}const dt=(t,e,n,s,i)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],s,i):0!==e[n].byteLength&&t.getChannelData(s).set(e[n],i)},pt=(t,e)=>{const n=[];for(let s=0;s<t;s+=1){const t=[],i="number"==typeof e?e:e[s];for(let e=0;e<i;e+=1)t.push(new Float32Array(128));n.push(t)}return n},ft=async(t,e,n,s,i,o,r)=>{const a=null===e?128*Math.ceil(t.context.length/128):e.length,c=s.channelCount*s.numberOfInputs,l=i.reduce(((t,e)=>t+e),0),u=0===l?null:n.createBuffer(l,a,n.sampleRate);if(void 0===o)throw new Error("Missing the processor constructor.");const h=j(t),d=await((t,e)=>{const n=b(m,t),s=tt(e);return b(n,s)})(n,t),p=pt(s.numberOfInputs,s.channelCount),f=pt(s.numberOfOutputs,i),g=Array.from(t.parameters.keys()).reduce(((t,e)=>({...t,[e]:new Float32Array(128)})),{});for(let l=0;l<a;l+=128){if(s.numberOfInputs>0&&null!==e)for(let t=0;t<s.numberOfInputs;t+=1)for(let n=0;n<s.channelCount;n+=1)ht(e,p[t],n,n,l);void 0!==o.parameterDescriptors&&null!==e&&o.parameterDescriptors.forEach((({name:t},n)=>{ht(e,g,t,c+n,l)}));for(let t=0;t<s.numberOfInputs;t+=1)for(let e=0;e<i[t];e+=1)0===f[t][e].byteLength&&(f[t][e]=new Float32Array(128));try{const t=p.map(((t,e)=>0===h.activeInputs[e].size?[]:t)),e=r(l/n.sampleRate,n.sampleRate,(()=>d.process(t,f,g)));if(null!==u)for(let t=0,e=0;t<s.numberOfOutputs;t+=1){for(let n=0;n<i[t];n+=1)dt(u,f[t],n,e+n,l);e+=i[t]}if(!e)break}catch(e){t.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}));break}}return u},mt={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},gt={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},_t={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},vt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},yt={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},xt=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise((s=>{const i=()=>{n.onmessage=null,e.close(),n.close(),s()};n.onmessage=()=>i();try{e.postMessage(t,[t])}catch{}finally{i()}}))},bt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},wt=(t,e,n)=>{const s=e[n];if(void 0===s)throw t();return s},Tt={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},St={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},kt=()=>new DOMException("","InvalidStateError"),Ct=()=>new DOMException("","InvalidAccessError"),Dt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},At=(t,e,n,s,i,o,r,a,c,l,u)=>{const h=l.length;let d=a;for(let a=0;a<h;a+=1){let h=n[0]*l[a];for(let e=1;e<i;e+=1){const s=d-e&c-1;h+=n[e]*o[s],h-=t[e]*r[s]}for(let t=i;t<s;t+=1)h+=n[t]*o[d-t&c-1];for(let n=i;n<e;n+=1)h-=t[n]*r[d-n&c-1];o[d]=l[a],r[d]=h,d=d+1&c-1,u[a]=h}return d},Mt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Ot=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch{}return!1},Et=(t,e,n)=>{const s=e[n];void 0!==s&&s!==t[n]&&(t[n]=s)},Rt=(t,e)=>{Et(t,e,"channelCount"),Et(t,e,"channelCountMode"),Et(t,e,"channelInterpretation")},Nt=t=>"function"==typeof t.getFloatTimeDomainData,qt=(t,e,n)=>{const s=e[n];void 0!==s&&s!==t[n].value&&(t[n].value=s)},It=t=>{t.start=(e=>(n=0,s=0,i)=>{if("number"==typeof i&&i<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,s,i)})(t.start)},Pt=t=>{var e;t.stop=(e=t.stop,(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})},Ft=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),Vt=(t,e)=>{const n=t.createBiquadFilter();return Rt(n,e),qt(n,e,"Q"),qt(n,e,"detune"),qt(n,e,"frequency"),qt(n,e,"gain"),Et(n,e,"type"),n},jt=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Rt(n,e),(t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw kt()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw kt()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw kt()}})})(n),n},Lt=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),Yt=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Rt(n,e),qt(n,e,"delayTime"),n},Wt=(t,e)=>{const n=t.createGain();return Rt(n,e),qt(n,e,"gain"),n};function zt(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function Ht(t,e){let n=[0,0];for(let o=t.length-1;o>=0;o-=1)i=e,n=[(s=n)[0]*i[0]-s[1]*i[1],s[0]*i[1]+s[1]*i[0]],n[0]+=t[o];var s,i;return n}const Bt=(t,e,n,s)=>t.createScriptProcessor(e,n,s),Ut=()=>new DOMException("","NotSupportedError"),Gt={numberOfChannels:1},Xt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},$t={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Zt={disableNormalization:!1},Qt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Jt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Kt=(t,e,n)=>void 0===t.copyFromChannel?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),te=t=>{if(null===t)return!1;const e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},ee=(t,e,n,s)=>{let i=t;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:o,set:r}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(o),set:s(r)})},ne=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(s){if(9!==s.code)throw s;ne(t,e,n+1e-7)}},se=t=>{const e=t.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},ie=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},oe=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},re=()=>{try{new DOMException}catch{return!1}return!0},ae=()=>new Promise((t=>{const e=new ArrayBuffer(0),{port1:n,port2:s}=new MessageChannel;n.onmessage=({data:e})=>t(null!==e),s.postMessage(e,[e])})),ce=(t,e)=>{const n=e.createGain();t.connect(n);const s=(e=>()=>{e.call(t,n),t.removeEventListener("ended",s)})(t.disconnect);t.addEventListener("ended",s),Lt(t,n),t.stop=(e=>{let s=!1;return(i=0)=>{if(s)try{e.call(t,i)}catch{n.gain.setValueAtTime(0,i)}else e.call(t,i),s=!0}})(t.stop)},le=(t,e)=>n=>{const s={value:t};return Object.defineProperties(n,{currentTarget:s,target:s}),"function"==typeof e?e.call(t,n):e.handleEvent.call(t,n)},ue=(t=>(e,n,[s,i,o],r)=>{t(e[i],[n,s,o],(t=>t[0]===n&&t[1]===s),r)})(B),he=(t=>(e,n,[s,i,o],r)=>{const a=e.get(s);void 0===a?e.set(s,new Set([[i,n,o]])):t(a,[i,n,o],(t=>t[0]===i&&t[1]===n),r)})(B),de=(t=>(e,n,s,i)=>t(e[i],(t=>t[0]===n&&t[1]===s)))(w),pe=new WeakMap,fe=(t=>e=>{var n;return null!==(n=t.get(e))&&void 0!==n?n:0})(pe),me=(ge=new Map,_e=new WeakMap,(t,e)=>{const n=_e.get(t);if(void 0!==n)return n;const s=ge.get(t);if(void 0!==s)return s;try{const n=e();return n instanceof Promise?(ge.set(t,n),n.catch((()=>!1)).then((e=>(ge.delete(t),_e.set(t,e),e)))):(_e.set(t,n),n)}catch{return _e.set(t,!1),!1}});var ge,_e;const ve="undefined"==typeof window?null:window,ye=((t,e)=>(n,s)=>{const i=n.createAnalyser();if(Rt(i,s),!(s.maxDecibels>s.minDecibels))throw e();return Et(i,s,"fftSize"),Et(i,s,"maxDecibels"),Et(i,s,"minDecibels"),Et(i,s,"smoothingTimeConstant"),t(Nt,(()=>Nt(i)))||(t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const s=Math.max(n.length,t.fftSize);for(let t=0;t<s;t+=1)e[t]=.0078125*(n[t]-128);return e}})(i),i})(me,R),xe=(t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(j),be=((t,e,n)=>async(s,i,o)=>{const r=t(s);await Promise.all(r.activeInputs.map(((t,r)=>Array.from(t).map((async([t,a])=>{const c=e(t),l=await c.render(t,i),u=s.context.destination;n(t)||s===u&&n(s)||l.connect(o,a,r)})))).reduce(((t,e)=>[...t,...e]),[]))})(j,xe,nt),we=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,o){const r=s.get(o);return void 0!==r?Promise.resolve(r):(async(i,o)=>{let r=e(i);if(!O(r,o)){const e={channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,fftSize:r.fftSize,maxDecibels:r.maxDecibels,minDecibels:r.minDecibels,smoothingTimeConstant:r.smoothingTimeConstant};r=t(o,e)}return s.set(o,r),await n(i,o,r),r})(i,o)}}})(ye,tt,be),Te=(Se=h,t=>{const e=Se.get(t);if(void 0===e)throw kt();return e});var Se;const ke=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(ve),Ce=(t=>e=>null!==t&&e instanceof t)(ke),De=new WeakMap,Ae=(t=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(e,n,s){if(null!==n){let i=this._listeners.get(n);void 0===i&&(i=t(this,n),"function"==typeof n&&this._listeners.set(n,i)),this._nativeEventTarget.addEventListener(e,i,s)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){const s=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===s?null:s,n)}})(le),Me=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(ve),Oe=(t=>e=>null!==t&&e instanceof t)(Me),Ee=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(ve),Re=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(ve),Ne=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(ve),qe=((t,e,n,s,i,o,r,a,l,u,h,p,f,m,g,_)=>class extends u{constructor(e,s,i,o){super(i),this._context=e,this._nativeAudioNode=i;const r=h(e);p(r)&&!0!==n(it,(()=>it(r,_)))&&(t=>{const e=new Map;t.connect=(t=>(n,s=0,i=0)=>{const o=rt(n)?t(n,s,i):t(n,s),r=e.get(n);return void 0===r?e.set(n,[{input:i,output:s}]):r.every((t=>t.input!==i||t.output!==s))&&r.push({input:i,output:s}),o})(t.connect.bind(t)),t.disconnect=(n=>(s,i,o)=>{if(n.apply(t),void 0===s)e.clear();else if("number"==typeof s)for(const[t,n]of e){const i=n.filter((t=>t.output!==s));0===i.length?e.delete(t):e.set(t,i)}else if(e.has(s))if(void 0===i)e.delete(s);else{const t=e.get(s);if(void 0!==t){const n=t.filter((t=>t.output!==i&&(t.input!==o||void 0===o)));0===n.length?e.delete(s):e.set(s,n)}}for(const[n,s]of e)s.forEach((e=>{rt(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)}))})(t.disconnect)})(i),c.set(this,i),d.set(this,new Set),"closed"!==e.state&&s&&k(this),t(this,o,i)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,a=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw i();const c=h(this._context),u=g(c);if(f(t)||m(t))throw o();if(z(t)){const i=tt(t);try{const e=$(this._nativeAudioNode,i,n,a),s=st(this);(u||s)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!s&&st(t)&&k(t)}catch(t){if(12===t.code)throw o();throw t}if(e(this,t,n,a,u)){const e=l([this],t);ot(e,s(u))}return t}const d=et(t);if("playbackRate"===d.name&&1024===d.maxValue)throw r();try{this._nativeAudioNode.connect(d,n),(u||st(this))&&this._nativeAudioNode.disconnect(d,n)}catch(t){if(12===t.code)throw o();throw t}if(((t,e,n,s)=>{const{activeInputs:i,passiveInputs:o}=L(e),{outputs:r}=j(t),a=S(t),c=r=>{const a=tt(t),c=et(e);if(r){const e=J(o,t,n);U(i,t,e,!1),s||nt(t)||a.connect(c,n)}else{const e=((t,e,n)=>w(t,(t=>t[0]===e&&t[1]===n)))(i,t,n);G(o,e,!1),s||nt(t)||a.disconnect(c,n)}};return!!B(r,[e,n],(t=>t[0]===e&&t[1]===n),!0)&&(a.add(c),F(t)?U(i,t,[n,c],!0):G(o,[t,n,c],!0),!0)})(this,t,n,u)){const e=l([this],t);ot(e,s(u))}}disconnect(t,e,n){let s;const r=h(this._context),c=g(r);if(void 0===t)s=((t,e)=>{const n=j(t),s=[];for(const i of n.outputs)H(i)?at(t,e,...i):ct(t,e,...i),s.push(i[0]);return n.outputs.clear(),s})(this,c);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw i();s=((t,e,n)=>{const s=j(t),i=[];for(const o of s.outputs)o[1]===n&&(H(o)?at(t,e,...o):ct(t,e,...o),i.push(o[0]),s.outputs.delete(o));return i})(this,c,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw i();if(z(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw i();if(s=((t,e,n,s,i)=>{const o=j(t);return Array.from(o.outputs).filter((t=>!(t[0]!==n||void 0!==s&&t[1]!==s||void 0!==i&&t[2]!==i))).map((n=>(H(n)?at(t,e,...n):ct(t,e,...n),o.outputs.delete(n),n[0])))})(this,c,t,e,n),0===s.length)throw o()}for(const t of s){const e=l([this],t);ot(e,a)}}})((Ie=a,(t,e,n)=>{const s=[];for(let t=0;t<n.numberOfInputs;t+=1)s.push(new Set);Ie.set(t,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:e})}),((t,e,n,s,i,o,r,a,c,l,u,h,d)=>{const p=new WeakMap;return(f,m,g,_,v)=>{const{activeInputs:y,passiveInputs:x}=o(m),{outputs:b}=o(f),w=a(f),S=o=>{const a=c(m),l=c(f);if(o){const e=T(x,f,g,_);t(y,f,e,!1),v||h(f)||n(l,a,g,_),d(m)&&k(m)}else{const t=s(y,f,g,_);e(x,_,t,!1),v||h(f)||i(l,a,g,_);const n=r(m);if(0===n)u(m)&&A(m,y);else{const t=p.get(m);void 0!==t&&clearTimeout(t),p.set(m,setTimeout((()=>{u(m)&&A(m,y)}),1e3*n))}}};return!!l(b,[m,g,_],(t=>t[0]===m&&t[1]===g&&t[2]===_),!0)&&(w.add(S),u(f)?t(y,f,[g,_,S],!0):e(x,_,[f,g,S],!0),!0)}})(ue,he,$,de,K,j,fe,S,tt,B,F,nt,st),me,((t,e,n,s,i,o)=>r=>(a,c)=>{const l=t.get(a);if(void 0===l){if(!r&&o(a)){const t=s(a),{outputs:o}=n(a);for(const n of o)if(H(n)){const i=s(n[0]);e(t,i,n[1],n[2])}else{const e=i(n[0]);t.disconnect(e,n[1])}}t.set(a,c)}else t.set(a,l+c)})(p,K,j,tt,et,F),R,Ct,Ut,((t,e,n,s,i,o,r,a)=>(c,l)=>{const u=e.get(c);if(void 0===u)throw new Error("Missing the expected cycle count.");const h=o(c.context),d=a(h);if(u===l){if(e.delete(c),!d&&r(c)){const e=s(c),{outputs:o}=n(c);for(const n of o)if(H(n)){const i=s(n[0]);t(e,i,n[1],n[2])}else{const t=i(n[0]);e.connect(t,n[1])}}}else e.set(c,u-l)})($,p,j,tt,et,Te,F,Ce),((t,e,n)=>function s(i,o){const r=z(o)?o:n(t,o);if((t=>"delayTime"in t)(r))return[];if(i[0]===r)return[i];if(i.includes(r))return[];const{outputs:a}=e(r);return Array.from(a).map((t=>s([...i,r],t[0]))).reduce(((t,e)=>t.concat(e)),[])})(De,j,b),Ae,Te,Oe,Ee,Re,Ce,Ne);var Ie;const Pe=((t,e,n,s,i,o)=>class extends t{constructor(t,n){const r=i(t),a={...M,...n},c=s(r,a);super(t,!1,c,o(r)?e():null),this._nativeAnalyserNode=c}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){const e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){const e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}})(qe,we,R,ye,Te,Ce),Fe=new WeakSet,Ve=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(ve),je=(Le=new Uint32Array(1),t=>(Le[0]=t,Le[0]));var Le;const Ye=((t,e)=>n=>{n.copyFromChannel=(s,i,o=0)=>{const r=t(o),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=s.length;for(let t=r<0?-r:0;t+r<c&&t<u;t+=1)s[t]=l[t+r]},n.copyToChannel=(s,i,o=0)=>{const r=t(o),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=s.length;for(let t=r<0?-r:0;t+r<c&&t<u;t+=1)l[t+r]=s[t]}})(je,R),We=(t=>e=>{e.copyFromChannel=(n=>(s,i,o=0)=>{const r=t(o),a=t(i);if(r<e.length)return n.call(e,s,a,r)})(e.copyFromChannel),e.copyToChannel=(n=>(s,i,o=0)=>{const r=t(o),a=t(i);if(r<e.length)return n.call(e,s,a,r)})(e.copyToChannel)})(je),ze=((t,e,n,s,i,o,r,a)=>{let c=null;return class l{constructor(l){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:u,numberOfChannels:h,sampleRate:d}={...q,...l};null===c&&(c=new i(1,1,44100));const p=null!==s&&e(o,o)?new s({length:u,numberOfChannels:h,sampleRate:d}):c.createBuffer(h,u,d);if(0===p.numberOfChannels)throw n();return"function"!=typeof p.copyFromChannel?(r(p),N(p)):e(E,(()=>E(p)))||a(p),t.add(p),p}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===l.prototype||t.has(e)}}})(Fe,me,Ut,Ve,ke,(t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0})(Ve),Ye,We),He=(t=>(e,n)=>{const s=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(e.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(s),s.disconnect()};n.addEventListener("ended",i)})(Wt),Be=((t,e,n)=>async(s,i,o)=>{const r=e(s);await Promise.all(Array.from(r.activeInputs).map((async([e,s])=>{const r=t(e),a=await r.render(e,i);n(e)||a.connect(o,s)})))})(xe,L,nt),Ue=(t=>(e,n,s)=>t(n,e,s))(Be),Ge=((t,e,n,s,i,o,r,a,c,l,u)=>(c,h)=>{const d=c.createBufferSource();return Rt(d,h),qt(d,h,"playbackRate"),Et(d,h,"buffer"),Et(d,h,"loop"),Et(d,h,"loopEnd"),Et(d,h,"loopStart"),e(n,(()=>n(c)))||(t=>{t.start=(e=>{let n=!1;return(s=0,i=0,o)=>{if(n)throw kt();e.call(t,s,i,o),n=!0}})(t.start)})(d),e(s,(()=>s(c)))||(t=>{t.start=(e=>(n=0,s=0,i)=>{const o=t.buffer,r=null===o?s:Math.min(o.duration,s);null!==o&&r>o.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,r,i)})(t.start)})(d),e(i,(()=>i(c)))||l(d,c),e(o,(()=>o(c)))||It(d),e(r,(()=>r(c)))||u(d,c),e(a,(()=>a(c)))||Pt(d),t(c,d),d})(He,me,(t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1}),(t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0}),(t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0}),se,ie,oe,0,(t=>(e,n)=>{const s=n.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=s),t(e,"buffer",(t=>()=>{const n=t.call(e);return n===s?null:n}),(t=>n=>t.call(e,null===n?s:n)))})(ee),ce),Xe=((t,e)=>(n,s,i)=>(t(s).replay(i),e(s,n,i)))((t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(L),Be),$e=((t,e,n,s,i)=>()=>{const o=new WeakMap;let r=null,a=null;return{set start(t){r=t},set stop(t){a=t},render(c,l){const u=o.get(l);return void 0!==u?Promise.resolve(u):(async(c,l)=>{let u=n(c);const h=O(u,l);if(!h){const t={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,loop:u.loop,loopEnd:u.loopEnd,loopStart:u.loopStart,playbackRate:u.playbackRate.value};u=e(l,t),null!==r&&u.start(...r),null!==a&&u.stop(a)}return o.set(l,u),h?await t(l,c.playbackRate,u.playbackRate):await s(l,c.playbackRate,u.playbackRate),await i(c,l,u),u})(c,l)}}})(Ue,Ge,tt,Xe,be),Ze=((t,e,n,s,i,r,a,c,l,u,h,d,p)=>(s,f,m,g=null,_=null)=>{const v=m.value,y=new o.AutomationEventList(v),x=f?(t=>({replay(e){for(const n of t)if("exponentialRampToValue"===n.type){const{endTime:t,value:s}=n;e.exponentialRampToValueAtTime(s,t)}else if("linearRampToValue"===n.type){const{endTime:t,value:s}=n;e.linearRampToValueAtTime(s,t)}else if("setTarget"===n.type){const{startTime:t,target:s,timeConstant:i}=n;e.setTargetAtTime(s,t,i)}else if("setValue"===n.type){const{startTime:t,value:s}=n;e.setValueAtTime(s,t)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:t,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,t)}}}}))(y):null,b={get defaultValue(){return v},get maxValue(){return null===g?m.maxValue:g},get minValue(){return null===_?m.minValue:_},get value(){return m.value},set value(t){m.value=t,b.setValueAtTime(t,s.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof m.cancelAndHoldAtTime)null===x&&y.flush(s.context.currentTime),y.add(i(t)),m.cancelAndHoldAtTime(t);else{const e=Array.from(y).pop();null===x&&y.flush(s.context.currentTime),y.add(i(t));const n=Array.from(y).pop();m.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return b},cancelScheduledValues:t=>(null===x&&y.flush(s.context.currentTime),y.add(r(t)),m.cancelScheduledValues(t),b),exponentialRampToValueAtTime(t,e){if(0===t)throw new RangeError;if(!Number.isFinite(e)||e<0)throw new RangeError;const n=s.context.currentTime;return null===x&&y.flush(n),0===Array.from(y).length&&(y.add(u(v,n)),m.setValueAtTime(v,n)),y.add(a(t,e)),m.exponentialRampToValueAtTime(t,e),b},linearRampToValueAtTime(t,e){const n=s.context.currentTime;return null===x&&y.flush(n),0===Array.from(y).length&&(y.add(u(v,n)),m.setValueAtTime(v,n)),y.add(c(t,e)),m.linearRampToValueAtTime(t,e),b},setTargetAtTime:(t,e,n)=>(null===x&&y.flush(s.context.currentTime),y.add(l(t,e,n)),m.setTargetAtTime(t,e,n),b),setValueAtTime:(t,e)=>(null===x&&y.flush(s.context.currentTime),y.add(u(t,e)),m.setValueAtTime(t,e),b),setValueCurveAtTime(t,e,n){const i=t instanceof Float32Array?t:new Float32Array(t);if(null!==d&&"webkitAudioContext"===d.name){const t=e+n,o=s.context.sampleRate,r=Math.ceil(e*o),a=Math.floor(t*o),c=a-r,l=new Float32Array(c);for(let t=0;t<c;t+=1){const s=(i.length-1)/n*((r+t)/o-e),a=Math.floor(s),c=Math.ceil(s);l[t]=a===c?i[a]:(1-(s-a))*i[a]+(1-(c-s))*i[c]}null===x&&y.flush(s.context.currentTime),y.add(h(l,e,n)),m.setValueCurveAtTime(l,e,n);const u=a/o;u<t&&p(b,l[l.length-1],u),p(b,i[i.length-1],t)}else null===x&&y.flush(s.context.currentTime),y.add(h(i,e,n)),m.setValueCurveAtTime(i,e,n);return b}};return n.set(b,m),e.set(b,s),t(b,x),b})((Qe=l,(t,e)=>{Qe.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})}),De,u,0,o.createCancelAndHoldAutomationEvent,o.createCancelScheduledValuesAutomationEvent,o.createExponentialRampToValueAutomationEvent,o.createLinearRampToValueAutomationEvent,o.createSetTargetAutomationEvent,o.createSetValueAutomationEvent,o.createSetValueCurveAutomationEvent,Me,ne);var Qe;const Je=((t,e,n,s,i,o,r,a)=>class extends t{constructor(t,s){const a=o(t),c={...V,...s},l=i(a,c),u=r(a),h=u?e():null;super(t,!1,l,h),this._audioBufferSourceNodeRenderer=h,this._isBufferNullified=!1,this._isBufferSet=null!==c.buffer,this._nativeAudioBufferSourceNode=l,this._onended=null,this._playbackRate=n(this,u,l.playbackRate,P,I)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){const e="function"==typeof t?a(this,t):null;this._nativeAudioBufferSourceNode.onended=e;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){k(this);const t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),F(this)&&D(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}})(qe,$e,Ze,kt,Ge,Te,Ce,le),Ke=((t,e,n,s,i,o,r,a)=>class extends t{constructor(t,e){const n=o(t),s=r(n),c=i(n,e,s);super(t,!1,c,s?(t=>{const e=new WeakMap;return{render(n,s){const i=e.get(s);return void 0!==i?Promise.resolve(i):(async(n,s)=>{const i=s.destination;return e.set(s,i),await t(n,s,i),i})(n,s)}}})(a):null),this._isNodeOfNativeOfflineAudioContext=s,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(qe,0,R,kt,((t,e)=>(n,s,i)=>{const o=n.destination;if(o.channelCount!==s)try{o.channelCount=s}catch{}i&&"explicit"!==o.channelCountMode&&(o.channelCountMode="explicit"),0===o.maxChannelCount&&Object.defineProperty(o,"maxChannelCount",{value:s});const r=t(n,{channelCount:s,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(r,"channelCount",(t=>()=>t.call(r)),(t=>e=>{t.call(r,e);try{o.channelCount=e}catch(t){if(e>o.maxChannelCount)throw t}})),e(r,"channelCountMode",(t=>()=>t.call(r)),(t=>e=>{t.call(r,e),o.channelCountMode=e})),e(r,"channelInterpretation",(t=>()=>t.call(r)),(t=>e=>{t.call(r,e),o.channelInterpretation=e})),Object.defineProperty(r,"maxChannelCount",{get:()=>o.maxChannelCount}),r.connect(o),r})(Wt,ee),Te,Ce,be),tn=((t,e,n,s,i)=>()=>{const o=new WeakMap;return{render(r,a){const c=o.get(a);return void 0!==c?Promise.resolve(c):(async(r,a)=>{let c=n(r);const l=O(c,a);if(!l){const t={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(a,t)}return o.set(a,c),l?(await t(a,r.Q,c.Q),await t(a,r.detune,c.detune),await t(a,r.frequency,c.frequency),await t(a,r.gain,c.gain)):(await s(a,r.Q,c.Q),await s(a,r.detune,c.detune),await s(a,r.frequency,c.frequency),await s(a,r.gain,c.gain)),await i(r,a,c),c})(r,a)}}})(Ue,Vt,tt,Xe,be),en=(t=>(e,n)=>t.set(e,n))(pe),nn=((t,e,n,s,i,o,r,a)=>class extends t{constructor(t,s){const c=o(t),l={...mt,...s},u=i(c,l),h=r(c);super(t,!1,u,h?n():null),this._Q=e(this,h,u.Q,P,I),this._detune=e(this,h,u.detune,1200*Math.log2(P),-1200*Math.log2(P)),this._frequency=e(this,h,u.frequency,t.sampleRate/2,0),this._gain=e(this,h,u.gain,40*Math.log10(P),I),this._nativeBiquadFilterNode=u,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(t){if(11===t.code)throw s();throw t}if(t.length!==e.length||e.length!==n.length)throw s()}})(qe,Ze,tn,Ct,Vt,Te,Ce,en),sn=((t,e)=>(n,s,i)=>{const o=new Set;return n.connect=(i=>(r,a=0,c=0)=>{const l=0===o.size;if(e(r))return i.call(n,r,a,c),t(o,[r,a,c],(t=>t[0]===r&&t[1]===a&&t[2]===c),!0),l&&s(),r;i.call(n,r,a),t(o,[r,a],(t=>t[0]===r&&t[1]===a),!0),l&&s()})(n.connect),n.disconnect=(t=>(s,r,a)=>{const c=o.size>0;if(void 0===s)t.apply(n),o.clear();else if("number"==typeof s){t.call(n,s);for(const t of o)t[1]===s&&o.delete(t)}else{e(s)?t.call(n,s,r,a):t.call(n,s,r);for(const t of o)t[0]!==s||void 0!==r&&t[1]!==r||void 0!==a&&t[2]!==a||o.delete(t)}const l=0===o.size;c&&l&&i()})(n.disconnect),n})(B,Ee),on=((t,e)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const i=n.createBufferSource();e(s,(()=>{const t=s.numberOfInputs;for(let e=0;e<t;e+=1)i.connect(s,0,e)}),(()=>i.disconnect(s)))})(kt,sn),rn=((t,e)=>(n,s)=>{const i=n.createChannelMerger(s.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,i),Rt(i,s),i})(Me,on),an=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,o){const r=s.get(o);return void 0!==r?Promise.resolve(r):(async(i,o)=>{let r=e(i);if(!O(r,o)){const e={channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,numberOfInputs:r.numberOfInputs};r=t(o,e)}return s.set(o,r),await n(i,o,r),r})(i,o)}}})(rn,tt,be),cn=((t,e,n,s,i)=>class extends t{constructor(t,o){const r=s(t),a={...gt,...o};super(t,!1,n(r,a),i(r)?e():null)}})(qe,an,rn,Te,Ce),ln=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,o){const r=s.get(o);return void 0!==r?Promise.resolve(r):(async(i,o)=>{let r=e(i);if(!O(r,o)){const e={channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,numberOfOutputs:r.numberOfOutputs};r=t(o,e)}return s.set(o,r),await n(i,o,r),r})(i,o)}}})(jt,tt,be),un=((t,e,n,s,i,o)=>class extends t{constructor(t,o){const r=s(t),a=(t=>({...t,channelCount:t.numberOfOutputs}))({..._t,...o});super(t,!1,n(r,a),i(r)?e():null)}})(qe,ln,jt,Te,Ce),hn=((t,e,n,s)=>(i,{offset:o,...r})=>{const a=i.createBuffer(1,2,44100),c=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(i,{...r,gain:o}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(t){l.channelCount=t},get channelCountMode(){return l.channelCountMode},set channelCountMode(t){l.channelCountMode=t},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(t){l.channelInterpretation=t},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(t){c.onended=t},addEventListener:(...t)=>c.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>c.dispatchEvent(t[0]),removeEventListener:(...t)=>c.removeEventListener(t[0],t[1],t[2]),start(t=0){c.start.call(c,t)},stop(t=0){c.stop.call(c,t)}};return t(i,c),s(Lt(h,l),(()=>c.connect(l)),(()=>c.disconnect(l)))})(He,Ge,Wt,sn),dn=((t,e,n,s,i)=>(o,r)=>{if(void 0===o.createConstantSource)return n(o,r);const a=o.createConstantSource();return Rt(a,r),qt(a,r,"offset"),e(s,(()=>s(o)))||It(a),e(i,(()=>i(o)))||Pt(a),t(o,a),a})(He,me,hn,se,oe),pn=((t,e,n,s,i)=>()=>{const o=new WeakMap;let r=null,a=null;return{set start(t){r=t},set stop(t){a=t},render(c,l){const u=o.get(l);return void 0!==u?Promise.resolve(u):(async(c,l)=>{let u=n(c);const h=O(u,l);if(!h){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,offset:u.offset.value};u=e(l,t),null!==r&&u.start(r),null!==a&&u.stop(a)}return o.set(l,u),h?await t(l,c.offset,u.offset):await s(l,c.offset,u.offset),await i(c,l,u),u})(c,l)}}})(Ue,dn,tt,Xe,be),fn=((t,e,n,s,i,o,r)=>class extends t{constructor(t,r){const a=i(t),c={...vt,...r},l=s(a,c),u=o(a),h=u?n():null;super(t,!1,l,h),this._constantSourceNodeRenderer=h,this._nativeConstantSourceNode=l,this._offset=e(this,u,l.offset,P,I),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){const e="function"==typeof t?r(this,t):null;this._nativeConstantSourceNode.onended=e;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){k(this);const t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),F(this)&&D(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}})(qe,Ze,pn,dn,Te,Ce,le),mn=((t,e)=>(n,s)=>{const i=n.createConvolver();if(Rt(i,s),s.disableNormalization===i.normalize&&(i.normalize=!s.disableNormalization),Et(i,s,"buffer"),s.channelCount>2)throw t();if(e(i,"channelCount",(t=>()=>t.call(i)),(e=>n=>{if(n>2)throw t();return e.call(i,n)})),"max"===s.channelCountMode)throw t();return e(i,"channelCountMode",(t=>()=>t.call(i)),(e=>n=>{if("max"===n)throw t();return e.call(i,n)})),i})(Ut,ee),gn=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,o){const r=s.get(o);return void 0!==r?Promise.resolve(r):(async(i,o)=>{let r=e(i);if(!O(r,o)){const e={buffer:r.buffer,channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,disableNormalization:!r.normalize};r=t(o,e)}return s.set(o,r),X(r)?await n(i,o,r.inputs[0]):await n(i,o,r),r})(i,o)}}})(mn,tt,be),_n=((t,e,n,s,i,o)=>class extends t{constructor(t,r){const a=s(t),c={...yt,...r},l=n(a,c);super(t,!1,l,i(a)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=l,null!==c.buffer&&o(this,c.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){const t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,t.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}})(qe,gn,mn,Te,Ce,en),vn=((t,e,n,s,i)=>o=>{const r=new WeakMap;return{render(a,c){const l=r.get(c);return void 0!==l?Promise.resolve(l):(async(a,c)=>{let l=n(a);const u=O(l,c);if(!u){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:o};l=e(c,t)}return r.set(c,l),u?await t(c,a.delayTime,l.delayTime):await s(c,a.delayTime,l.delayTime),await i(a,c,l),l})(a,c)}}})(Ue,Yt,tt,Xe,be),yn=((t,e,n,s,i,o,r)=>class extends t{constructor(t,a){const c=i(t),l={...bt,...a},u=s(c,l),h=o(c);super(t,!1,u,h?n(l.maxDelayTime):null),this._delayTime=e(this,h,u.delayTime),r(this,l.maxDelayTime)}get delayTime(){return this._delayTime}})(qe,Ze,vn,Yt,Te,Ce,en),xn=(t=>(e,n)=>{const s=e.createDynamicsCompressor();if(Rt(s,n),n.channelCount>2)throw t();if("max"===n.channelCountMode)throw t();return qt(s,n,"attack"),qt(s,n,"knee"),qt(s,n,"ratio"),qt(s,n,"release"),qt(s,n,"threshold"),s})(Ut),bn=((t,e,n,s,i)=>()=>{const o=new WeakMap;return{render(r,a){const c=o.get(a);return void 0!==c?Promise.resolve(c):(async(r,a)=>{let c=n(r);const l=O(c,a);if(!l){const t={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(a,t)}return o.set(a,c),l?(await t(a,r.attack,c.attack),await t(a,r.knee,c.knee),await t(a,r.ratio,c.ratio),await t(a,r.release,c.release),await t(a,r.threshold,c.threshold)):(await s(a,r.attack,c.attack),await s(a,r.knee,c.knee),await s(a,r.ratio,c.ratio),await s(a,r.release,c.release),await s(a,r.threshold,c.threshold)),await i(r,a,c),c})(r,a)}}})(Ue,xn,tt,Xe,be),wn=((t,e,n,s,i,o,r,a)=>class extends t{constructor(t,i){const c=o(t),l={...Tt,...i},u=s(c,l),h=r(c);super(t,!1,u,h?n():null),this._attack=e(this,h,u.attack),this._knee=e(this,h,u.knee),this._nativeDynamicsCompressorNode=u,this._ratio=e(this,h,u.ratio),this._release=e(this,h,u.release),this._threshold=e(this,h,u.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){const e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){const e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(qe,Ze,bn,xn,Ut,Te,Ce,en),Tn=((t,e,n,s,i)=>()=>{const o=new WeakMap;return{render(r,a){const c=o.get(a);return void 0!==c?Promise.resolve(c):(async(r,a)=>{let c=n(r);const l=O(c,a);if(!l){const t={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(a,t)}return o.set(a,c),l?await t(a,r.gain,c.gain):await s(a,r.gain,c.gain),await i(r,a,c),c})(r,a)}}})(Ue,Wt,tt,Xe,be),Sn=((t,e,n,s,i,o)=>class extends t{constructor(t,r){const a=i(t),c={...St,...r},l=s(a,c),u=o(a);super(t,!1,l,u?n():null),this._gain=e(this,u,l.gain,P,I)}get gain(){return this._gain}})(qe,Ze,Tn,Wt,Te,Ce),kn=((t,e,n,s)=>(i,o,{channelCount:r,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=Ft(o,i.sampleRate),d=l instanceof Float64Array?l:new Float64Array(l),p=u instanceof Float64Array?u:new Float64Array(u),f=d.length,m=p.length,g=Math.min(f,m);if(0===f||f>20)throw s();if(0===d[0])throw e();if(0===m||m>20)throw s();if(0===p[0])throw e();if(1!==d[0]){for(let t=0;t<m;t+=1)p[t]/=d[0];for(let t=1;t<f;t+=1)d[t]/=d[0]}const _=n(i,h,r,r);_.channelCount=r,_.channelCountMode=a,_.channelInterpretation=c;const v=[],y=[],x=[];for(let t=0;t<r;t+=1){v.push(0);const t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),y.push(t),x.push(e)}_.onaudioprocess=t=>{const e=t.inputBuffer,n=t.outputBuffer,s=e.numberOfChannels;for(let t=0;t<s;t+=1){const s=e.getChannelData(t),i=n.getChannelData(t);v[t]=At(d,f,p,m,g,y[t],x[t],v[t],32,s,i)}};const b=i.sampleRate/2;return Lt({get bufferSize(){return h},get channelCount(){return _.channelCount},set channelCount(t){_.channelCount=t},get channelCountMode(){return _.channelCountMode},set channelCountMode(t){_.channelCountMode=t},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(t){_.channelInterpretation=t},get context(){return _.context},get inputs(){return[_]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},addEventListener:(...t)=>_.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>_.dispatchEvent(t[0]),getFrequencyResponse(e,n,s){if(e.length!==n.length||n.length!==s.length)throw t();const i=e.length;for(let t=0;t<i;t+=1){const i=-Math.PI*(e[t]/b),o=[Math.cos(i),Math.sin(i)],r=zt(Ht(p,o),Ht(d,o));n[t]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),s[t]=Math.atan2(r[1],r[0])}},removeEventListener:(...t)=>_.removeEventListener(t[0],t[1],t[2])},_)})(Ct,kt,Bt,Ut),Cn=((t,e,n,s)=>i=>t(Ot,(()=>Ot(i)))?Promise.resolve(t(s,s)).then((t=>{if(!t){const t=n(i,512,0,1);i.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>i.currentTime,t.connect(i.destination)}return i.startRendering()})):new Promise((t=>{const n=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(i.destination),i.startRendering()})))(me,Wt,Bt,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);const n=new e(1,1,44100),s=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((t=>{n.oncomplete=()=>{s.disconnect(),t(0!==n.currentTime)},n.startRendering()}))})(Wt,ke)),Dn=((t,e,n,s,i)=>(o,r)=>{const a=new WeakMap;let c=null;return{render(l,u){const h=a.get(u);return void 0!==h?Promise.resolve(h):(async(l,u)=>{let h=null,d=e(l);const p=O(d,u);if(void 0===u.createIIRFilter?h=t(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(d=u.createIIRFilter(r,o)),a.set(u,null===h?d:h),null!==h){if(null===c){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new n(l.context.destination.channelCount,l.context.length,u.sampleRate);c=(async()=>(await s(l,t,t.destination),((t,e,n,s)=>{const i=n instanceof Float64Array?n:new Float64Array(n),o=s instanceof Float64Array?s:new Float64Array(s),r=i.length,a=o.length,c=Math.min(r,a);if(1!==i[0]){for(let t=0;t<r;t+=1)o[t]/=i[0];for(let t=1;t<a;t+=1)i[t]/=i[0]}const l=new Float32Array(32),u=new Float32Array(32),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),d=t.numberOfChannels;for(let e=0;e<d;e+=1){const n=t.getChannelData(e),s=h.getChannelData(e);l.fill(0),u.fill(0),At(i,r,o,a,c,l,u,0,32,n,s)}return h})(await i(t),u,o,r)))()}const t=await c;return h.buffer=t,h.start(0),h}return await s(l,u,d),d})(l,u)}}})(Ge,tt,ke,be,Cn),An=(t=>(e,n,s)=>{if(void 0===e.createIIRFilter)return t(e,n,s);const i=e.createIIRFilter(s.feedforward,s.feedback);return Rt(i,s),i})(kn),Mn=((t,e,n,s,i,o)=>class extends t{constructor(t,r){const a=s(t),c=i(a),l={...Dt,...r},u=e(a,c?null:t.baseLatency,l);super(t,!1,u,c?n(l.feedback,l.feedforward):null),(t=>{var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,(n,s,i)=>{if(n.length!==s.length||s.length!==i.length)throw Ct();return e.call(t,n,s,i)})})(u),this._nativeIIRFilterNode=u,o(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}})(qe,An,Dn,Te,Ce,en),On=((t,e,n,s,i,o,r,a)=>(c,l)=>{const u=l.listener,{forwardX:h,forwardY:d,forwardZ:p,positionX:f,positionY:m,positionZ:g,upX:_,upY:v,upZ:y}=void 0===u.forwardX?(()=>{const h=new Float32Array(1),d=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),p=r(l);let f=!1,m=[0,0,-1,0,1,0],g=[0,0,0];const _=()=>{if(f)return;f=!0;const t=s(l,256,9,0);t.onaudioprocess=({inputBuffer:t})=>{const e=[o(t,h,0),o(t,h,1),o(t,h,2),o(t,h,3),o(t,h,4),o(t,h,5)];e.some(((t,e)=>t!==m[e]))&&(u.setOrientation(...e),m=e);const n=[o(t,h,6),o(t,h,7),o(t,h,8)];n.some(((t,e)=>t!==g[e]))&&(u.setPosition(...n),g=n)},d.connect(t)},v=t=>e=>{e!==m[t]&&(m[t]=e,u.setOrientation(...m))},y=t=>e=>{e!==g[t]&&(g[t]=e,u.setPosition(...g))},x=(e,s,o)=>{const r=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:s});r.connect(d,0,e),r.start(),Object.defineProperty(r.offset,"defaultValue",{get:()=>s});const u=t({context:c},p,r.offset,P,I);var h,f,m,g,v,y,x;return a(u,"value",(t=>()=>t.call(u)),(t=>e=>{try{t.call(u,e)}catch(t){if(9!==t.code)throw t}_(),p&&o(e)})),u.cancelAndHoldAtTime=(h=u.cancelAndHoldAtTime,p?()=>{throw i()}:(...t)=>{const e=h.apply(u,t);return _(),e}),u.cancelScheduledValues=(f=u.cancelScheduledValues,p?()=>{throw i()}:(...t)=>{const e=f.apply(u,t);return _(),e}),u.exponentialRampToValueAtTime=(m=u.exponentialRampToValueAtTime,p?()=>{throw i()}:(...t)=>{const e=m.apply(u,t);return _(),e}),u.linearRampToValueAtTime=(g=u.linearRampToValueAtTime,p?()=>{throw i()}:(...t)=>{const e=g.apply(u,t);return _(),e}),u.setTargetAtTime=(v=u.setTargetAtTime,p?()=>{throw i()}:(...t)=>{const e=v.apply(u,t);return _(),e}),u.setValueAtTime=(y=u.setValueAtTime,p?()=>{throw i()}:(...t)=>{const e=y.apply(u,t);return _(),e}),u.setValueCurveAtTime=(x=u.setValueCurveAtTime,p?()=>{throw i()}:(...t)=>{const e=x.apply(u,t);return _(),e}),u};return{forwardX:x(0,0,v(0)),forwardY:x(1,0,v(1)),forwardZ:x(2,-1,v(2)),positionX:x(6,0,y(0)),positionY:x(7,0,y(1)),positionZ:x(8,0,y(2)),upX:x(3,0,v(3)),upY:x(4,1,v(4)),upZ:x(5,0,v(5))}})():u;return{get forwardX(){return h},get forwardY(){return d},get forwardZ(){return p},get positionX(){return f},get positionY(){return m},get positionZ(){return g},get upX(){return _},get upY(){return v},get upZ(){return y}}})(Ze,rn,dn,Bt,Ut,Kt,Ce,ee),En=new WeakMap,Rn=((t,e,n,s,i,o)=>class extends n{constructor(n,o){super(n),this._nativeContext=n,h.set(this,n),s(n)&&i.set(n,new Set),this._destination=new t(this,o),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e="function"==typeof t?o(this,t):null;this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(Ke,On,Ae,Ce,En,le),Nn=((t,e,n,s,i,o)=>(r,a)=>{const c=r.createOscillator();return Rt(c,a),qt(c,a,"detune"),qt(c,a,"frequency"),void 0!==a.periodicWave?c.setPeriodicWave(a.periodicWave):Et(c,a,"type"),e(n,(()=>n(r)))||It(c),e(s,(()=>s(r)))||o(c,r),e(i,(()=>i(r)))||Pt(c),t(r,c),c})(He,me,se,ie,oe,ce),qn=((t,e,n,s,i)=>()=>{const o=new WeakMap;let r=null,a=null,c=null;return{set periodicWave(t){r=t},set start(t){a=t},set stop(t){c=t},render(l,u){const h=o.get(u);return void 0!==h?Promise.resolve(h):(async(l,u)=>{let h=n(l);const d=O(h,u);if(!d){const t={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:null===r?void 0:r,type:h.type};h=e(u,t),null!==a&&h.start(a),null!==c&&h.stop(c)}return o.set(u,h),d?(await t(u,l.detune,h.detune),await t(u,l.frequency,h.frequency)):(await s(u,l.detune,h.detune),await s(u,l.frequency,h.frequency)),await i(l,u,h),h})(l,u)}}})(Ue,Nn,tt,Xe,be),In=((t,e,n,s,i,o,r)=>class extends t{constructor(t,r){const a=i(t),c={...Xt,...r},l=n(a,c),u=o(a),h=u?s():null,d=t.sampleRate/2;super(t,!1,l,h),this._detune=e(this,u,l.detune,153600,-153600),this._frequency=e(this,u,l.frequency,d,-d),this._nativeOscillatorNode=l,this._onended=null,this._oscillatorNodeRenderer=h,null!==this._oscillatorNodeRenderer&&void 0!==c.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=c.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){const e="function"==typeof t?r(this,t):null;this._nativeOscillatorNode.onended=e;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){k(this);const t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),F(this)&&D(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}})(qe,Ze,Nn,qn,Te,Ce,le),Pn=(t=>(e,n)=>{const s=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return s.buffer=i,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}})(Ge),Fn=((t,e,n,s,i)=>(o,{curve:r,oversample:a,...c})=>{const l=o.createWaveShaper(),u=o.createWaveShaper();Rt(l,c),Rt(u,c);const h=n(o,{...c,gain:1}),d=n(o,{...c,gain:-1}),p=n(o,{...c,gain:1}),f=n(o,{...c,gain:-1});let m=null,g=!1,_=null;const v={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(t){h.channelCount=t,d.channelCount=t,l.channelCount=t,p.channelCount=t,u.channelCount=t,f.channelCount=t},get channelCountMode(){return l.channelCountMode},set channelCountMode(t){h.channelCountMode=t,d.channelCountMode=t,l.channelCountMode=t,p.channelCountMode=t,u.channelCountMode=t,f.channelCountMode=t},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(t){h.channelInterpretation=t,d.channelInterpretation=t,l.channelInterpretation=t,p.channelInterpretation=t,u.channelInterpretation=t,f.channelInterpretation=t},get context(){return l.context},get curve(){return _},set curve(n){if(null!==n&&n.length<2)throw e();if(null===n)l.curve=n,u.curve=n;else{const t=n.length,e=new Float32Array(t+2-t%2),s=new Float32Array(t+2-t%2);e[0]=n[0],s[0]=-n[t-1];const i=Math.ceil((t+1)/2),o=(t+1)/2-1;for(let r=1;r<i;r+=1){const a=r/i*o,c=Math.floor(a),l=Math.ceil(a);e[r]=c===l?n[c]:(1-(a-c))*n[c]+(1-(l-a))*n[l],s[r]=c===l?-n[t-1-c]:-(1-(a-c))*n[t-1-c]-(1-(l-a))*n[t-1-l]}e[i]=t%2==1?n[i-1]:(n[i-2]+n[i-1])/2,l.curve=e,u.curve=s}_=n,g&&(s(_)&&null===m?m=t(o,h):null!==m&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(t){l.oversample=t,u.oversample=t},addEventListener:(...t)=>h.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>h.dispatchEvent(t[0]),removeEventListener:(...t)=>h.removeEventListener(t[0],t[1],t[2])};return null!==r&&(v.curve=r instanceof Float32Array?r:new Float32Array(r)),a!==v.oversample&&(v.oversample=a),i(Lt(v,p),(()=>{h.connect(l).connect(p),h.connect(d).connect(u).connect(f).connect(p),g=!0,s(_)&&(m=t(o,h))}),(()=>{h.disconnect(l),l.disconnect(p),h.disconnect(d),d.disconnect(u),u.disconnect(f),f.disconnect(p),g=!1,null!==m&&(m(),m=null)}))})(Pn,kt,Wt,te,sn),Vn=((t,e,n,s,i,o,r)=>(a,c)=>{const l=a.createWaveShaper();if(null!==o&&"webkitAudioContext"===o.name&&void 0===a.createGain().gain.automationRate)return n(a,c);Rt(l,c);const u=null===c.curve||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(null!==u&&u.length<2)throw e();Et(l,{curve:u},"curve"),Et(l,c,"oversample");let h=null,d=!1;return r(l,"curve",(t=>()=>t.call(l)),(e=>n=>(e.call(l,n),d&&(s(n)&&null===h?h=t(a,l):s(n)||null===h||(h(),h=null)),n))),i(l,(()=>{d=!0,s(l.curve)&&(h=t(a,l))}),(()=>{d=!1,null!==h&&(h(),h=null)}))})(Pn,kt,Fn,te,sn,Me,ee),jn=((t,e,n,s,i,o,r,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:p,distanceModel:f,maxDistance:m,orientationX:g,orientationY:_,orientationZ:v,panningModel:y,positionX:x,positionY:b,positionZ:w,refDistance:T,rolloffFactor:S,...k})=>{const C=u.createPanner();if(k.channelCount>2)throw r();if("max"===k.channelCountMode)throw r();Rt(C,k);const D={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},A=n(u,{...D,channelInterpretation:"speakers",numberOfInputs:6}),M=s(u,{...k,gain:1}),O=s(u,{...D,gain:1}),E=s(u,{...D,gain:0}),R=s(u,{...D,gain:0}),N=s(u,{...D,gain:0}),q=s(u,{...D,gain:0}),I=s(u,{...D,gain:0}),P=i(u,256,6,1),F=o(u,{...D,curve:new Float32Array([1,1]),oversample:"none"});let V=[g,_,v],j=[x,b,w];const L=new Float32Array(1);P.onaudioprocess=({inputBuffer:t})=>{const e=[c(t,L,0),c(t,L,1),c(t,L,2)];e.some(((t,e)=>t!==V[e]))&&(C.setOrientation(...e),V=e);const n=[c(t,L,3),c(t,L,4),c(t,L,5)];n.some(((t,e)=>t!==j[e]))&&(C.setPosition(...n),j=n)},Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0});const Y={get bufferSize(){},get channelCount(){return C.channelCount},set channelCount(t){if(t>2)throw r();M.channelCount=t,C.channelCount=t},get channelCountMode(){return C.channelCountMode},set channelCountMode(t){if("max"===t)throw r();M.channelCountMode=t,C.channelCountMode=t},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(t){M.channelInterpretation=t,C.channelInterpretation=t},get coneInnerAngle(){return C.coneInnerAngle},set coneInnerAngle(t){C.coneInnerAngle=t},get coneOuterAngle(){return C.coneOuterAngle},set coneOuterAngle(t){C.coneOuterAngle=t},get coneOuterGain(){return C.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();C.coneOuterGain=t},get context(){return C.context},get distanceModel(){return C.distanceModel},set distanceModel(t){C.distanceModel=t},get inputs(){return[M]},get maxDistance(){return C.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;C.maxDistance=t},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get orientationX(){return O.gain},get orientationY(){return E.gain},get orientationZ(){return R.gain},get panningModel(){return C.panningModel},set panningModel(t){C.panningModel=t},get positionX(){return N.gain},get positionY(){return q.gain},get positionZ(){return I.gain},get refDistance(){return C.refDistance},set refDistance(t){if(t<0)throw new RangeError;C.refDistance=t},get rolloffFactor(){return C.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;C.rolloffFactor=t},addEventListener:(...t)=>M.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>M.dispatchEvent(t[0]),removeEventListener:(...t)=>M.removeEventListener(t[0],t[1],t[2])};return h!==Y.coneInnerAngle&&(Y.coneInnerAngle=h),d!==Y.coneOuterAngle&&(Y.coneOuterAngle=d),p!==Y.coneOuterGain&&(Y.coneOuterGain=p),f!==Y.distanceModel&&(Y.distanceModel=f),m!==Y.maxDistance&&(Y.maxDistance=m),g!==Y.orientationX.value&&(Y.orientationX.value=g),_!==Y.orientationY.value&&(Y.orientationY.value=_),v!==Y.orientationZ.value&&(Y.orientationZ.value=v),y!==Y.panningModel&&(Y.panningModel=y),x!==Y.positionX.value&&(Y.positionX.value=x),b!==Y.positionY.value&&(Y.positionY.value=b),w!==Y.positionZ.value&&(Y.positionZ.value=w),T!==Y.refDistance&&(Y.refDistance=T),S!==Y.rolloffFactor&&(Y.rolloffFactor=S),1===V[0]&&0===V[1]&&0===V[2]||C.setOrientation(...V),0===j[0]&&0===j[1]&&0===j[2]||C.setPosition(...j),l(Lt(Y,C),(()=>{M.connect(C),t(M,F,0,0),F.connect(O).connect(A,0,0),F.connect(E).connect(A,0,1),F.connect(R).connect(A,0,2),F.connect(N).connect(A,0,3),F.connect(q).connect(A,0,4),F.connect(I).connect(A,0,5),A.connect(P).connect(u.destination)}),(()=>{M.disconnect(C),a(M,F,0,0),F.disconnect(O),O.disconnect(A),F.disconnect(E),E.disconnect(A),F.disconnect(R),R.disconnect(A),F.disconnect(N),N.disconnect(A),F.disconnect(q),q.disconnect(A),F.disconnect(I),I.disconnect(A),A.disconnect(P),P.disconnect(u.destination)}))})($,kt,rn,Wt,Bt,Vn,Ut,K,Kt,sn),Ln=(t=>(e,n)=>{const s=e.createPanner();return void 0===s.orientationX?t(e,n):(Rt(s,n),qt(s,n,"orientationX"),qt(s,n,"orientationY"),qt(s,n,"orientationZ"),qt(s,n,"positionX"),qt(s,n,"positionY"),qt(s,n,"positionZ"),Et(s,n,"coneInnerAngle"),Et(s,n,"coneOuterAngle"),Et(s,n,"coneOuterGain"),Et(s,n,"distanceModel"),Et(s,n,"maxDistance"),Et(s,n,"panningModel"),Et(s,n,"refDistance"),Et(s,n,"rolloffFactor"),s)})(jn),Yn=((t,e,n,s,i,o,r,a,c,l)=>()=>{const u=new WeakMap;let h=null;return{render(d,p){const f=u.get(p);return void 0!==f?Promise.resolve(f):(async(d,p)=>{let f=null,m=o(d);const g={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},_={...g,coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor},v=O(m,p);if("bufferSize"in m)f=s(p,{...g,gain:1});else if(!v){const t={..._,orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value};m=i(p,t)}if(u.set(p,null===f?m:f),null!==f){if(null===h){if(null===r)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new r(6,d.context.length,p.sampleRate),s=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});s.connect(t.destination),h=(async()=>{const e=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map((async(e,s)=>{const i=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===s?1:0});return await a(t,e,i.offset),i})));for(let t=0;t<6;t+=1)e[t].connect(s,0,t),e[t].start(0);return l(t)})()}const t=await h,o=s(p,{...g,gain:1});await c(d,p,o);const u=[];for(let e=0;e<t.numberOfChannels;e+=1)u.push(t.getChannelData(e));let m=[u[0][0],u[1][0],u[2][0]],v=[u[3][0],u[4][0],u[5][0]],y=s(p,{...g,gain:1}),x=i(p,{..._,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:v[0],positionY:v[1],positionZ:v[2]});o.connect(y).connect(x.inputs[0]),x.connect(f);for(let e=128;e<t.length;e+=128){const t=[u[0][e],u[1][e],u[2][e]],n=[u[3][e],u[4][e],u[5][e]];if(t.some(((t,e)=>t!==m[e]))||n.some(((t,e)=>t!==v[e]))){m=t,v=n;const r=e/p.sampleRate;y.gain.setValueAtTime(0,r),y=s(p,{...g,gain:0}),x=i(p,{..._,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:v[0],positionY:v[1],positionZ:v[2]}),y.gain.setValueAtTime(1,r),o.connect(y).connect(x.inputs[0]),x.connect(f)}}return f}return v?(await t(p,d.orientationX,m.orientationX),await t(p,d.orientationY,m.orientationY),await t(p,d.orientationZ,m.orientationZ),await t(p,d.positionX,m.positionX),await t(p,d.positionY,m.positionY),await t(p,d.positionZ,m.positionZ)):(await a(p,d.orientationX,m.orientationX),await a(p,d.orientationY,m.orientationY),await a(p,d.orientationZ,m.orientationZ),await a(p,d.positionX,m.positionX),await a(p,d.positionY,m.positionY),await a(p,d.positionZ,m.positionZ)),X(m)?await c(d,p,m.inputs[0]):await c(d,p,m),m})(d,p)}}})(Ue,rn,dn,Wt,Ln,tt,ke,Xe,be,Cn),Wn=((t,e,n,s,i,o,r)=>class extends t{constructor(t,a){const c=i(t),l={...$t,...a},u=n(c,l),h=o(c);super(t,!1,u,h?s():null),this._nativePannerNode=u,this._orientationX=e(this,h,u.orientationX,P,I),this._orientationY=e(this,h,u.orientationY,P,I),this._orientationZ=e(this,h,u.orientationZ,P,I),this._positionX=e(this,h,u.positionX,P,I),this._positionY=e(this,h,u.positionY,P,I),this._positionZ=e(this,h,u.positionZ,P,I),r(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}})(qe,Ze,Ln,Yn,Te,Ce,en),zn=(t=>(e,{disableNormalization:n,imag:s,real:i})=>{const o=s instanceof Float32Array?s:new Float32Array(s),r=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(r,o,{disableNormalization:n});if(Array.from(s).length<2)throw t();return a})(R),Hn=((t,e,n,s)=>class s{constructor(s,i){const o=e(s),r=(t=>{const{imag:e,real:n}=t;return void 0===e?void 0===n?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,(()=>0)),real:n}:void 0===n?{...t,imag:e,real:Array.from(e,(()=>0))}:{...t,imag:e,real:n}})({...Zt,...i}),a=t(o,r);return n.add(a),a}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===s.prototype||n.has(t)}})(zn,Te,new WeakSet),Bn=((t,e,n,s,i,o)=>{const r=16385,a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(t,o,h,d,p)=>{if(1===o)return((t,e,i,o)=>{const h=new Float32Array(r),d=new Float32Array(r);for(let t=0;t<r;t+=1){const e=t/16384*c;h[t]=Math.cos(e),d[t]=Math.sin(e)}const p=n(t,{...l,gain:0}),f=s(t,{...u,curve:h}),m=s(t,{...u,curve:a}),g=n(t,{...l,gain:0}),_=s(t,{...u,curve:d});return{connectGraph(){e.connect(p),e.connect(void 0===m.inputs?m:m.inputs[0]),e.connect(g),m.connect(i),i.connect(void 0===f.inputs?f:f.inputs[0]),i.connect(void 0===_.inputs?_:_.inputs[0]),f.connect(p.gain),_.connect(g.gain),p.connect(o,0,0),g.connect(o,0,1)},disconnectGraph(){e.disconnect(p),e.disconnect(void 0===m.inputs?m:m.inputs[0]),e.disconnect(g),m.disconnect(i),i.disconnect(void 0===f.inputs?f:f.inputs[0]),i.disconnect(void 0===_.inputs?_:_.inputs[0]),f.disconnect(p.gain),_.disconnect(g.gain),p.disconnect(o,0,0),g.disconnect(o,0,1)}}})(t,h,d,p);if(2===o)return((t,i,o,h)=>{const d=new Float32Array(r),p=new Float32Array(r),f=new Float32Array(r),m=new Float32Array(r),g=Math.floor(8192.5);for(let t=0;t<r;t+=1)if(t>g){const e=(t-g)/(16384-g)*c;d[t]=Math.cos(e),p[t]=Math.sin(e),f[t]=0,m[t]=1}else{const e=t/(16384-g)*c;d[t]=1,p[t]=0,f[t]=Math.cos(e),m[t]=Math.sin(e)}const _=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),v=n(t,{...l,gain:0}),y=s(t,{...u,curve:d}),x=n(t,{...l,gain:0}),b=s(t,{...u,curve:p}),w=s(t,{...u,curve:a}),T=n(t,{...l,gain:0}),S=s(t,{...u,curve:f}),k=n(t,{...l,gain:0}),C=s(t,{...u,curve:m});return{connectGraph(){i.connect(_),i.connect(void 0===w.inputs?w:w.inputs[0]),_.connect(v,0),_.connect(x,0),_.connect(T,1),_.connect(k,1),w.connect(o),o.connect(void 0===y.inputs?y:y.inputs[0]),o.connect(void 0===b.inputs?b:b.inputs[0]),o.connect(void 0===S.inputs?S:S.inputs[0]),o.connect(void 0===C.inputs?C:C.inputs[0]),y.connect(v.gain),b.connect(x.gain),S.connect(T.gain),C.connect(k.gain),v.connect(h,0,0),T.connect(h,0,0),x.connect(h,0,1),k.connect(h,0,1)},disconnectGraph(){i.disconnect(_),i.disconnect(void 0===w.inputs?w:w.inputs[0]),_.disconnect(v,0),_.disconnect(x,0),_.disconnect(T,1),_.disconnect(k,1),w.disconnect(o),o.disconnect(void 0===y.inputs?y:y.inputs[0]),o.disconnect(void 0===b.inputs?b:b.inputs[0]),o.disconnect(void 0===S.inputs?S:S.inputs[0]),o.disconnect(void 0===C.inputs?C:C.inputs[0]),y.disconnect(v.gain),b.disconnect(x.gain),S.disconnect(T.gain),C.disconnect(k.gain),v.disconnect(h,0,0),T.disconnect(h,0,0),x.disconnect(h,0,1),k.disconnect(h,0,1)}}})(t,h,d,p);throw i()};return(e,{channelCount:s,channelCountMode:r,pan:a,...c})=>{if("max"===r)throw i();const l=t(e,{...c,channelCount:1,channelCountMode:r,numberOfInputs:2}),u=n(e,{...c,channelCount:s,channelCountMode:r,gain:1}),d=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:a});let{connectGraph:p,disconnectGraph:f}=h(e,s,u,d,l);Object.defineProperty(d.gain,"defaultValue",{get:()=>0}),Object.defineProperty(d.gain,"maxValue",{get:()=>1}),Object.defineProperty(d.gain,"minValue",{get:()=>-1});const m={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(t){u.channelCount!==t&&(g&&f(),({connectGraph:p,disconnectGraph:f}=h(e,t,u,d,l)),g&&p()),u.channelCount=t},get channelCountMode(){return u.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw i();u.channelCountMode=t},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(t){u.channelInterpretation=t},get context(){return u.context},get inputs(){return[u]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get pan(){return d.gain},addEventListener:(...t)=>u.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>u.dispatchEvent(t[0]),removeEventListener:(...t)=>u.removeEventListener(t[0],t[1],t[2])};let g=!1;return o(Lt(m,l),(()=>{p(),g=!0}),(()=>{f(),g=!1}))}})(rn,jt,Wt,Vn,Ut,sn),Un=((t,e)=>(n,s)=>{const i=s.channelCountMode;if("clamped-max"===i)throw e();if(void 0===n.createStereoPanner)return t(n,s);const o=n.createStereoPanner();return Rt(o,s),qt(o,s,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>i,set:t=>{if(t!==i)throw e()}}),o})(Bn,Ut),Gn=((t,e,n,s,i)=>()=>{const o=new WeakMap;return{render(r,a){const c=o.get(a);return void 0!==c?Promise.resolve(c):(async(r,a)=>{let c=n(r);const l=O(c,a);if(!l){const t={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(a,t)}return o.set(a,c),l?await t(a,r.pan,c.pan):await s(a,r.pan,c.pan),X(c)?await i(r,a,c.inputs[0]):await i(r,a,c),c})(r,a)}}})(Ue,Un,tt,Xe,be),Xn=((t,e,n,s,i,o)=>class extends t{constructor(t,r){const a=i(t),c={...Qt,...r},l=n(a,c),u=o(a);super(t,!1,l,u?s():null),this._pan=e(this,u,l.pan)}get pan(){return this._pan}})(qe,Ze,Un,Gn,Te,Ce),$n=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,o){const r=s.get(o);return void 0!==r?Promise.resolve(r):(async(i,o)=>{let r=e(i);if(!O(r,o)){const e={channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,curve:r.curve,oversample:r.oversample};r=t(o,e)}return s.set(o,r),X(r)?await n(i,o,r.inputs[0]):await n(i,o,r),r})(i,o)}}})(Vn,tt,be),Zn=((t,e,n,s,i,o,r)=>class extends t{constructor(t,e){const a=i(t),c={...Jt,...e},l=n(a,c);super(t,!0,l,o(a)?s():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=l,r(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}})(qe,kt,Vn,$n,Te,Ce,en),Qn=(t=>null!==t&&t.isSecureContext)(ve),Jn=(t=>(e,n,s)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return s()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(ve),Kn=new WeakMap,ts=((t,e)=>n=>{let s=t.get(n);if(void 0!==s)return s;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),t.set(n,s),s})(Kn,ke),es=Qn?((t,e,n,s,i,o,r,a,c,l,u,h,d)=>{let p=0;return(m,g,_={credentials:"omit"})=>{const b=u.get(m);if(void 0!==b&&b.has(g))return Promise.resolve();const w=l.get(m);if(void 0!==w){const t=w.get(g);if(void 0!==t)return t}const T=o(m),S=void 0===T.audioWorklet?i(g).then((([t,e])=>{const[s,i]=v(t,e);return n(`${s};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${i}\n})})(window,'_AWGS')`)})).then((()=>{const t=d._AWGS.pop();if(void 0===t)throw new SyntaxError;s(T.currentTime,T.sampleRate,(()=>t(class{},void 0,((t,n)=>{if(""===t.trim())throw e();const s=f.get(T);if(void 0!==s){if(s.has(t))throw e();x(n),y(n.parameterDescriptors),s.set(t,n)}else x(n),y(n.parameterDescriptors),f.set(T,new Map([[t,n]]))}),T.sampleRate,void 0,void 0)))})):Promise.all([i(g),Promise.resolve(t(h,h))]).then((([[t,e],n])=>{const s=p+1;p=s;const[i,o]=v(t,e),l=new Blob([`${i};((AudioWorkletProcessor,registerProcessor)=>{${o}\n})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${s}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),u=URL.createObjectURL(l);return T.audioWorklet.addModule(u,_).then((()=>{if(a(T))return T;const t=r(T);return t.audioWorklet.addModule(u,_).then((()=>t))})).then((t=>{if(null===c)throw new SyntaxError;try{new c(t,`__sac${s}`)}catch{throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(u)))}));return void 0===w?l.set(m,new Map([[g,S]])):w.set(g,S),S.then((()=>{const t=u.get(m);void 0===t?u.set(m,new Set([g])):t.add(g)})).finally((()=>{const t=l.get(m);void 0!==t&&t.delete(g)})),S}})(me,Ut,(t=>e=>new Promise(((n,s)=>{if(null===t)return void s(new SyntaxError);const i=t.document.head;if(null===i)s(new SyntaxError);else{const o=t.document.createElement("script"),r=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(r),c=t.onerror,l=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(e,n,i,o,r)=>n===a||n===t.location.href&&1===i&&1===o?(l(),s(r),!1):null!==c?c(e,n,i,o,r):void 0,o.onerror=()=>{l(),s(new SyntaxError)},o.onload=()=>{l(),n()},o.src=a,o.type="module",i.appendChild(o)}})))(ve),Jn,(async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw new DOMException("","AbortError")}),Te,ts,Ce,Ne,new WeakMap,new WeakMap,((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),i=URL.createObjectURL(n);let o=!1,r=!1;try{await s.audioWorklet.addModule(i);const e=new t(s,"a",{numberOfOutputs:0}),n=s.createOscillator();e.port.onmessage=()=>o=!0,e.onprocessorerror=()=>r=!0,n.connect(e),n.start(0),await s.startRendering(),await new Promise((t=>setTimeout(t)))}catch{}finally{URL.revokeObjectURL(i)}return o&&!r})(Ne,ke),ve):void 0,ns=((t,e)=>n=>t(n)||e(n))(Oe,Ce),ss=((t,e,n,s,i,o,r,a,c,l,u)=>(n,s)=>{const h=r(n)?n:o(n);if(i.has(s)){const t=new DOMException("","DataCloneError");return Promise.reject(t)}try{i.add(s)}catch{}return e(c,(()=>c(h)))?h.decodeAudioData(s).then((n=>(xt(s).catch((()=>{})),e(a,(()=>a(n)))||u(n),t.add(n),n))):new Promise(((e,n)=>{const i=async()=>{try{await xt(s)}catch{}},o=t=>{n(t),i()};try{h.decodeAudioData(s,(n=>{"function"!=typeof n.copyFromChannel&&(l(n),N(n)),t.add(n),i().then((()=>e(n)))}),(t=>{o(null===t?new DOMException("","EncodingError"):t)}))}catch(t){o(t)}}))})(Fe,me,0,0,new WeakSet,Te,ns,E,Ot,Ye,We),is=((t,e,n,s,i,o,r,a,c,l,u,h,d,p,f,m,g,_,v,y)=>class extends f{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(t,e,s){return new n({length:e,numberOfChannels:t,sampleRate:s})}createBufferSource(){return new s(this)}createChannelMerger(t=6){return new o(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new r(this,{numberOfOutputs:t})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(t=1){return new u(this,{maxDelayTime:t})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(t,e){return new p(this,{feedback:e,feedforward:t})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new _(this,{...n,imag:e,real:t})}createStereoPanner(){return new v(this)}createWaveShaper(){return new y(this)}decodeAudioData(t,e,n){return l(this._nativeContext,t).then((t=>("function"==typeof e&&e(t),t)),(t=>{throw"function"==typeof n&&n(t),t}))}})(es,Pe,ze,Je,nn,cn,un,fn,_n,ss,yn,wn,Sn,Mn,Rn,In,Wn,Hn,Xn,Zn),os=((t,e,n,s)=>class extends t{constructor(t,e){const i=n(t),o=((t,e)=>t.createMediaElementSource(e.mediaElement))(i,e);if(s(i))throw TypeError();super(t,!0,o,null),this._nativeMediaElementAudioSourceNode=o}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(qe,0,Te,Ce),rs=((t,e,n,s)=>class extends t{constructor(t,e){const i=n(t);if(s(i))throw new TypeError;const o=((t,e)=>{const n=t.createMediaStreamDestination();return Rt(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n})(i,{...Mt,...e});super(t,!1,o,null),this._nativeMediaStreamAudioDestinationNode=o}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(qe,0,Te,Ce),as=((t,e,n,s)=>class extends t{constructor(t,e){const i=n(t),o=((t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort(((t,e)=>t.id<e.id?-1:t.id>e.id?1:0));const s=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(i,"mediaStream",{value:e}),i})(i,e);if(s(i))throw new TypeError;super(t,!0,o,null),this._nativeMediaStreamAudioSourceNode=o}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(qe,0,Te,Ce),cs=((t,e)=>(n,{mediaStreamTrack:s})=>{if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(s);const i=new MediaStream([s]),o=n.createMediaStreamSource(i);if("audio"!==s.kind)throw t();if(e(n))throw new TypeError;return o})(kt,Ce),ls=((t,e,n)=>class extends t{constructor(t,s){const i=n(t);super(t,!0,e(i,s),null)}})(qe,cs,Te),us=((t,e,n,s,i,o,r,a,c)=>class extends t{constructor(t={}){if(null===c)throw new Error("Missing the native AudioContext constructor.");let e;try{e=new c(t)}catch(t){if(12===t.code&&"sampleRate is not in range"===t.message)throw n();throw t}if(null===e)throw s();if(!(t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t))(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:i}=t,{sampleRate:o}=e;if(this._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===i?512/o:"interactive"===i||void 0===i?256/o:"playback"===i?1024/o:128*Math.max(2,Math.min(128,Math.round(i*o/128)))/o,this._nativeAudioContext=e,"webkitAudioContext"===c.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),W(this)})))}createMediaElementSource(t){return new i(this,{mediaElement:t})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(t){return new r(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new a(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise(((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((t=>{if(void 0===t||15===t.code)throw e();throw t}))}suspend(){return this._nativeAudioContext.suspend().catch((t=>{if(void 0===t)throw e();throw t}))}})(is,kt,Ut,(()=>new DOMException("","UnknownError")),os,rs,as,ls,Me),hs=(t=>e=>{const n=t.get(e);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(En),ds=(t=>(e,n)=>{t(e).add(n)})(hs),ps=(t=>(e,n,s=0,i=0)=>{const o=e[s];if(void 0===o)throw t();return rt(n)?o.connect(n,0,i):o.connect(n,0)})(R),fs=(t=>(e,n)=>{t(e).delete(n)})(hs),ms=(t=>(e,n=void 0,s=void 0,i=0)=>void 0===n?e.forEach((t=>t.disconnect())):"number"==typeof n?wt(t,e,n).disconnect():rt(n)?void 0===s?e.forEach((t=>t.disconnect(n))):void 0===i?wt(t,e,s).disconnect(n,0):wt(t,e,s).disconnect(n,0,i):void 0===s?e.forEach((t=>t.disconnect(n))):wt(t,e,s).disconnect(n,0))(R),gs=new WeakMap,_s=((t,e)=>n=>e(t,n))(gs,b),vs=((t,e,n,s,i,o,r,a,c,l,u,h,d)=>(p,f,g,_)=>{if(0===_.numberOfInputs&&0===_.numberOfOutputs)throw c();const v=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(v.some((t=>t<1)))throw c();if(v.length!==_.numberOfOutputs)throw e();if("explicit"!==_.channelCountMode)throw c();const y=_.channelCount*_.numberOfInputs,x=v.reduce(((t,e)=>t+e),0),b=void 0===g.parameterDescriptors?0:g.parameterDescriptors.length;if(y+b>6||x>6)throw c();const w=new MessageChannel,T=[],S=[];for(let t=0;t<_.numberOfInputs;t+=1)T.push(r(p,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),S.push(i(p,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const k=[];if(void 0!==g.parameterDescriptors)for(const{defaultValue:t,maxValue:e,minValue:n,name:s}of g.parameterDescriptors){const i=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==_.parameterData[s]?_.parameterData[s]:void 0===t?0:t});Object.defineProperties(i.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?P:e},minValue:{get:()=>void 0===n?I:n}}),k.push(i)}const C=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+b)}),D=Ft(f,p.sampleRate),A=a(p,D,y+b,Math.max(1,x)),M=i(p,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),O=[];for(let t=0;t<_.numberOfOutputs;t+=1)O.push(s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[t]}));for(let t=0;t<_.numberOfInputs;t+=1){T[t].connect(S[t]);for(let e=0;e<_.channelCount;e+=1)S[t].connect(C,e,t*_.channelCount+e)}const E=new lt(void 0===g.parameterDescriptors?[]:g.parameterDescriptors.map((({name:t},e)=>{const n=k[e];return n.connect(C,0,y+e),n.start(0),[t,n.offset]})));C.connect(A);let R=_.channelInterpretation,N=null;const q=0===_.numberOfOutputs?[A]:O,F={get bufferSize(){return D},get channelCount(){return _.channelCount},set channelCount(t){throw n()},get channelCountMode(){return _.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return R},set channelInterpretation(t){for(const e of T)e.channelInterpretation=t;R=t},get context(){return A.context},get inputs(){return T},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get onprocessorerror(){return N},set onprocessorerror(t){"function"==typeof N&&F.removeEventListener("processorerror",N),N="function"==typeof t?t:null,"function"==typeof N&&F.addEventListener("processorerror",N)},get parameters(){return E},get port(){return w.port2},addEventListener:(...t)=>A.addEventListener(t[0],t[1],t[2]),connect:t.bind(null,q),disconnect:l.bind(null,q),dispatchEvent:(...t)=>A.dispatchEvent(t[0]),removeEventListener:(...t)=>A.removeEventListener(t[0],t[1],t[2])},V=new Map;var j,L;w.port1.addEventListener=(j=w.port1.addEventListener,(...t)=>{if("message"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=V.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{u(p.currentTime,p.sampleRate,(()=>e(t)))},V.set(e,t[1]))}}return j.call(w.port1,t[0],t[1],t[2])}),w.port1.removeEventListener=(L=w.port1.removeEventListener,(...t)=>{if("message"===t[0]){const e=V.get(t[1]);void 0!==e&&(V.delete(t[1]),t[1]=e)}return L.call(w.port1,t[0],t[1],t[2])});let Y=null;Object.defineProperty(w.port1,"onmessage",{get:()=>Y,set:t=>{"function"==typeof Y&&w.port1.removeEventListener("message",Y),Y="function"==typeof t?t:null,"function"==typeof Y&&(w.port1.addEventListener("message",Y),w.port1.start())}}),g.prototype.port=w.port1;let W=null;const z=((t,e,n,s)=>{let i=m.get(t);void 0===i&&(i=new WeakMap,m.set(t,i));const o=(async(t,e)=>{const n=await(t=>new Promise(((e,n)=>{const{port1:s,port2:i}=new MessageChannel;s.onmessage=({data:t})=>{s.close(),i.close(),e(t)},s.onmessageerror=({data:t})=>{s.close(),i.close(),n(t)},i.postMessage(t)})))(e);return new t(n)})(n,s);return i.set(e,o),o})(p,F,g,_);z.then((t=>W=t));const H=pt(_.numberOfInputs,_.channelCount),B=pt(_.numberOfOutputs,v),U=void 0===g.parameterDescriptors?[]:g.parameterDescriptors.reduce(((t,{name:e})=>({...t,[e]:new Float32Array(128)})),{});let G=!0;const X=()=>{_.numberOfOutputs>0&&A.disconnect(M);for(let t=0,e=0;t<_.numberOfOutputs;t+=1){const n=O[t];for(let s=0;s<v[t];s+=1)M.disconnect(n,e+s,s);e+=v[t]}},$=new Map;A.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==W){const n=h(F);for(let s=0;s<D;s+=128){for(let e=0;e<_.numberOfInputs;e+=1)for(let n=0;n<_.channelCount;n+=1)ht(t,H[e],n,n,s);void 0!==g.parameterDescriptors&&g.parameterDescriptors.forEach((({name:e},n)=>{ht(t,U,e,y+n,s)}));for(let t=0;t<_.numberOfInputs;t+=1)for(let e=0;e<v[t];e+=1)0===B[t][e].byteLength&&(B[t][e]=new Float32Array(128));try{const t=H.map(((t,e)=>{if(n[e].size>0)return $.set(e,D/128),t;const s=$.get(e);return void 0===s?[]:(t.every((t=>t.every((t=>0===t))))&&(1===s?$.delete(e):$.set(e,s-1)),t)})),i=u(p.currentTime+s/p.sampleRate,p.sampleRate,(()=>W.process(t,B,U)));G=i;for(let t=0,n=0;t<_.numberOfOutputs;t+=1){for(let i=0;i<v[t];i+=1)dt(e,B[t],i,n+i,s);n+=v[t]}}catch(t){G=!1,F.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}))}if(!G){for(let t=0;t<_.numberOfInputs;t+=1){T[t].disconnect(S[t]);for(let e=0;e<_.channelCount;e+=1)S[s].disconnect(C,e,t*_.channelCount+e)}if(void 0!==g.parameterDescriptors){const t=g.parameterDescriptors.length;for(let e=0;e<t;e+=1){const t=k[e];t.disconnect(C,0,y+e),t.stop()}}C.disconnect(A),A.onaudioprocess=null,Z?X():K();break}}}};let Z=!1;const Q=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),J=()=>A.connect(Q).connect(p.destination),K=()=>{A.disconnect(Q),Q.disconnect()};return J(),d(F,(()=>{if(G){K(),_.numberOfOutputs>0&&A.connect(M);for(let t=0,e=0;t<_.numberOfOutputs;t+=1){const n=O[t];for(let s=0;s<v[t];s+=1)M.connect(n,e+s,s);e+=v[t]}}Z=!0}),(()=>{G&&(J(),X()),Z=!1}))})(ps,R,kt,rn,jt,dn,Wt,Bt,Ut,ms,Jn,_s,sn),ys=((t,e,n,s,i)=>(o,r,a,c,l,u)=>{if(null!==a)try{const e=new a(o,c,u),s=new Map;let r=null;if(Object.defineProperties(e,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>r,set:t=>{"function"==typeof r&&e.removeEventListener("processorerror",r),r="function"==typeof t?t:null,"function"==typeof r&&e.addEventListener("processorerror",r)}}}),e.addEventListener=(d=e.addEventListener,(...t)=>{if("processorerror"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=s.get(t[1]);void 0!==n?t[1]=n:(t[1]=n=>{"error"===n.type?(Object.defineProperties(n,{type:{value:"processorerror"}}),e(n)):e(new ErrorEvent(t[0],{...n}))},s.set(e,t[1]))}}return d.call(e,"error",t[1],t[2]),d.call(e,...t)}),e.removeEventListener=(h=e.removeEventListener,(...t)=>{if("processorerror"===t[0]){const e=s.get(t[1]);void 0!==e&&(s.delete(t[1]),t[1]=e)}return h.call(e,"error",t[1],t[2]),h.call(e,t[0],t[1],t[2])}),0!==u.numberOfOutputs){const t=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return e.connect(t).connect(o.destination),i(e,(()=>t.disconnect()),(()=>t.connect(o.destination)))}return e}catch(t){if(11===t.code)throw s();throw t}var h,d;if(void 0===l)throw s();return(t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}})(u),e(o,r,l,u)})(kt,vs,Wt,Ut,sn),xs=((t,e,n,s,i,o,r,a,c,l,u,h,d,p,f,m)=>(g,_,v)=>{const y=new WeakMap;let x=null;return{render(b,w){a(w,b);const T=y.get(w);return void 0!==T?Promise.resolve(T):(async(a,b)=>{let w=u(a),T=null;const S=O(w,b),k=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(null===h){const t=k.reduce(((t,e)=>t+e),0),n=i(b,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),o=[];for(let t=0;t<a.numberOfOutputs;t+=1)o.push(s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:k[t]}));const l=r(b,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1});l.connect=e.bind(null,o),l.disconnect=c.bind(null,o),T=[n,o,l]}else S||(w=new h(b,g));if(y.set(b,null===T?w:T[2]),null!==T){if(null===x){if(void 0===v)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const t=a.channelCount*a.numberOfInputs,e=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length,n=t+e,c=async()=>{const c=new d(n,128*Math.ceil(a.context.length/128),b.sampleRate),l=[],u=[];for(let t=0;t<_.numberOfInputs;t+=1)l.push(r(c,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),u.push(i(c,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const h=await Promise.all(Array.from(a.parameters.values()).map((async t=>{const e=o(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await p(c,t,e.offset),e}))),g=s(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<_.numberOfInputs;t+=1){l[t].connect(u[t]);for(let e=0;e<_.channelCount;e+=1)u[t].connect(g,e,t*_.channelCount+e)}for(const[e,n]of h.entries())n.connect(g,0,t+e),n.start(0);return g.connect(c.destination),await Promise.all(l.map((t=>f(a,c,t)))),m(c)};x=ft(a,0===n?null:await c(),b,_,k,v,l)}const t=await x,e=n(b,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[c,u,h]=T;null!==t&&(e.buffer=t,e.start(0)),e.connect(c);for(let t=0,e=0;t<a.numberOfOutputs;t+=1){const n=u[t];for(let s=0;s<k[t];s+=1)c.connect(n,e+s,s);e+=k[t]}return h}if(S)for(const[e,n]of a.parameters.entries())await t(b,n,w.parameters.get(e));else for(const[t,e]of a.parameters.entries())await p(b,e,w.parameters.get(t));return await f(a,b,w),w})(b,w)}}})(Ue,ps,Ge,rn,jt,dn,Wt,fs,ms,Jn,tt,Ne,ke,Xe,be,Cn),bs=(t=>e=>t.get(e))(Kn),ws=(t=>(e,n)=>{t.set(e,n)})(gs),Ts=Qn?((t,e,n,s,i,o,r,a,c,l,u,h,d,p)=>class extends e{constructor(e,u,d){var p;const m=a(e),g=c(m),_=(t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},(()=>1))}))({...ut,...d});(t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}})(_);const v=f.get(m),y=null==v?void 0:v.get(u),x=g||"closed"!==m.state?m:null!==(p=r(m))&&void 0!==p?p:m,b=i(x,g?null:e.baseLatency,l,u,y,_);super(e,!0,b,g?s(u,_,y):null);const w=[];b.parameters.forEach(((t,e)=>{const s=n(this,g,t);w.push([e,s])})),this._nativeAudioWorkletNode=b,this._onprocessorerror=null,this._parameters=new lt(w),g&&t(m,this);const{activeInputs:T}=o(this);h(b,T)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){const e="function"==typeof t?p(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(ds,qe,Ze,xs,ys,j,bs,Te,Ce,Ne,0,ws,0,le):void 0,Ss=((t,e)=>(n,s,i)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,s,i)}catch(e){if("SyntaxError"===e.name)throw t();throw e}})(Ut,ke),ks=((t,e,n,s,i,o,r,a)=>(c,l)=>n(c).render(c,l).then((()=>Promise.all(Array.from(s(l)).map((t=>n(t).render(t,l)))))).then((()=>i(l))).then((n=>("function"!=typeof n.copyFromChannel?(r(n),N(n)):e(o,(()=>o(n)))||a(n),t.add(n),n))))(Fe,me,xe,hs,Cn,E,Ye,We),Cs=((t,e,n,s,i)=>class extends t{constructor(t,n,i){let o;if("number"==typeof t&&void 0!==n&&void 0!==i)o={length:n,numberOfChannels:t,sampleRate:i};else{if("object"!=typeof t)throw new Error("The given parameters are not valid.");o=t}const{length:r,numberOfChannels:a,sampleRate:c}={...Gt,...o},l=s(a,r,c);e(Ot,(()=>Ot(l)))||l.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(l.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(l,a),this._length=r,this._nativeOfflineAudioContext=l,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally((()=>{this._state=null,W(this)})))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout((()=>this._waitForThePromiseToSettle(t)))}})(is,me,kt,Ss,ks),Ds=((t,e)=>n=>{const s=t.get(n);return e(s)||e(n)})(h,Oe),As=((t,e)=>n=>t.has(n)||e(n))(c,Ee),Ms=((t,e)=>n=>t.has(n)||e(n))(u,Re),Os=((t,e)=>n=>{const s=t.get(n);return e(s)||e(n)})(h,Ce),Es=()=>(async(t,e,n,s,i,o,r,a,c,l,u,h,d,p,f,m)=>!!(t(e,e)&&t(n,n)&&t(i,i)&&t(o,o)&&t(a,a)&&t(c,c)&&t(l,l)&&t(u,u)&&t(h,h)&&t(d,d)&&t(p,p))&&(await Promise.all([t(s,s),t(r,r),t(f,f),t(m,m)])).every((t=>t)))(me,(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createBuffer(1,1,44100);if(void 0===e.copyToChannel)return!0;const n=new Float32Array(2);try{e.copyFromChannel(n,0,0)}catch{return!1}return!0})(ke),(t=>()=>{if(null===t)return!1;if(void 0!==t.prototype&&void 0!==t.prototype.close)return!0;const e=new t,n=void 0!==e.close;try{e.close()}catch{}return n})(Me),(t=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100);return new Promise((t=>{let n=!0;const s=s=>{n&&(n=!1,e.startRendering(),t(s instanceof TypeError))};let i;try{i=e.decodeAudioData(null,(()=>{}),s)}catch(t){s(t)}void 0!==i&&i.catch(s)}))})(ke),(t=>()=>{if(null===t)return!1;let e;try{e=new t({latencyHint:"balanced"})}catch{return!1}return e.close(),!0})(Me),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createGain(),n=e.connect(e)===e;return e.disconnect(e),n})(ke),((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new MessageChannel,i=new e(1,128,44100),o=URL.createObjectURL(n);let r=!1;try{await i.audioWorklet.addModule(o);const e=new t(i,"a",{numberOfOutputs:0}),n=i.createOscillator();await new Promise((t=>{e.port.onmessage=()=>t(),e.port.postMessage(s.port2,[s.port2])})),e.port.onmessage=()=>r=!0,n.connect(e),n.start(0),await i.startRendering(),r=await new Promise((t=>{s.port1.onmessage=({data:e})=>t(1===e),s.port1.postMessage(0)}))}catch{}finally{s.port1.close(),URL.revokeObjectURL(o)}return r})(Ne,ke),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createChannelMerger();if("max"===e.channelCountMode)return!0;try{e.channelCount=2}catch{return!0}return!1})(ke),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100);return void 0===e.createConstantSource||e.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY})(ke),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100),n=e.createConvolver();n.buffer=e.createBuffer(1,1,e.sampleRate);try{n.buffer=e.createBuffer(1,1,e.sampleRate)}catch{return!1}return!0})(ke),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createConvolver();try{e.channelCount=1}catch{return!1}return!0})(ke),re,(t=>()=>null!==t&&t.hasOwnProperty("isSecureContext"))(ve),(t=>()=>{if(null===t)return!1;const e=new t;try{return e.createMediaStreamSource(new MediaStream),!1}catch(t){return!0}finally{e.close()}})(Me),(t=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100);if(void 0===e.createStereoPanner)return Promise.resolve(!0);if(void 0===e.createConstantSource)return Promise.resolve(!0);const n=e.createConstantSource(),s=e.createStereoPanner();return n.channelCount=1,n.offset.value=1,s.channelCount=1,n.start(),n.connect(s).connect(e.destination),e.startRendering().then((t=>1!==t.getChannelData(0)[0]))})(ke),ae);function Rs(t){return void 0===t}function Ns(t){return void 0!==t}function qs(t){return"function"==typeof t}function Is(t){return"number"==typeof t}function Ps(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function Fs(t){return"boolean"==typeof t}function Vs(t){return Array.isArray(t)}function js(t){return"string"==typeof t}function Ls(t){return js(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function Ys(t,e){if(!t)throw new Error(e)}function Ws(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function zs(t){t.isOffline||"running"===t.state||Qs('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Hs=!1,Bs=!1;function Us(t){Hs=t}function Gs(t){Rs(t)&&Hs&&!Bs&&(Bs=!0,Qs("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let Xs=console;function $s(t){Xs=t}function Zs(...t){Xs.log(...t)}function Qs(...t){Xs.warn(...t)}const Js="object"==typeof self?self:null,Ks=Js&&(Js.hasOwnProperty("AudioContext")||Js.hasOwnProperty("webkitAudioContext"));function ti(t,e,n,s){var i,o=arguments.length,r=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(o<3?i(r):o>3?i(e,n,r):i(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r}function ei(t,e,n,s){return new(n||(n=Promise))((function(i,o){function r(t){try{c(s.next(t))}catch(t){o(t)}}function a(t){try{c(s.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((s=s.apply(t,e||[])).next())}))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;class ni{constructor(t,e,n,s){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout((()=>{this._createTimeout(),this._callback()}),1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),"worker"===this._type&&(null===(e=this._worker)||void 0===e||e.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function si(t){return Ms(t)}function ii(t){return As(t)}function oi(t){return Os(t)}function ri(t){return Ds(t)}function ai(t,e){return"value"===t||si(e)||ii(e)||function(t){return t instanceof ze}(e)}function ci(t,...e){if(!e.length)return t;const n=e.shift();if(Ps(t)&&Ps(n))for(const e in n)ai(e,n[e])?t[e]=n[e]:Ps(n[e])?(t[e]||Object.assign(t,{[e]:{}}),ci(t[e],n[e])):Object.assign(t,{[e]:n[e]});return ci(t,...e)}function li(t,e,n=[],s){const i={},o=Array.from(e);if(Ps(o[0])&&s&&!Reflect.has(o[0],s)&&(Object.keys(o[0]).some((e=>Reflect.has(t,e)))||(ci(i,{[s]:o[0]}),n.splice(n.indexOf(s),1),o.shift())),1===o.length&&Ps(o[0]))ci(i,o[0]);else for(let t=0;t<n.length;t++)Ns(o[t])&&(i[n[t]]=o[t]);return ci(t,i)}function ui(t,e){return Rs(t)?e:t}function hi(t,e){return e.forEach((e=>{Reflect.has(t,e)&&delete t[e]})),t}class di{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||Js&&this.toString()===Js.TONE_DEBUG_CLASS)&&Zs(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}di.version=i;const pi=1e-6;function fi(t,e){return t>e+pi}function mi(t,e){return fi(t,e)||_i(t,e)}function gi(t,e){return t+pi<e}function _i(t,e){return Math.abs(t-e)<pi}function vi(t,e,n){return Math.max(Math.min(t,n),e)}class yi extends di{constructor(){super(),this.name="Timeline",this._timeline=[];const t=li(yi.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Ys(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];Ys(mi(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const n=this._search(t,e);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(_i(this._timeline[e].time,t)){for(let n=e;n>=0&&_i(this._timeline[n].time,t);n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&mi(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let n=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][e]<=t)return s-1;for(;n<i;){let s=Math.floor(n+(i-n)/2);const o=this._timeline[s],r=this._timeline[s+1];if(_i(o[e],t)){for(let n=s;n<this._timeline.length&&_i(this._timeline[n][e],t);n++)s=n;return s}if(gi(o[e],t)&&fi(r[e],t))return s;fi(o[e],t)?i=s:n=s+1}return-1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const n=this._search(t);return-1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){const n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let s=this._search(t),i=this._search(e);return-1!==s&&-1!==i?(this._timeline[s].time!==t&&(s+=1),this._timeline[i].time===e&&(i-=1),this._iterate(n,s,i)):-1===s&&this._iterate(n,0,i),this}forEachFrom(t,e){let n=this._search(t);for(;n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){const n=this._search(t);if(-1!==n&&_i(this._timeline[n].time,t)){let s=n;for(let e=n;e>=0&&_i(this._timeline[e].time,t);e--)s=e;this._iterate((t=>{e(t)}),s,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const xi=[];function bi(t){xi.push(t)}const wi=[];function Ti(t){wi.push(t)}class Si extends di{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach((t=>{Rs(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)})),this}once(t,e){const n=(...s)=>{e(...s),this.off(t,n)};return this.on(t,n),this}off(t,e){return t.split(/\W+/).forEach((t=>{if(Rs(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(Rs(e))this._events[t]=[];else{const n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}})),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const n=this._events[t].slice(0);for(let t=0,s=n.length;t<s;t++)n[t].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach((e=>{const n=Object.getOwnPropertyDescriptor(Si.prototype,e);Object.defineProperty(t.prototype,e,n)}))}dispose(){return super.dispose(),this._events=void 0,this}}class ki extends Si{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Ci extends ki{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new yi,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const n=li(Ci.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=(null===(t=arguments[0])||void 0===t?void 0:t.latencyHint)||""):(this._context=function(t){return new us(t)}({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new ni(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[(null===(e=arguments[0])||void 0===e?void 0:e.hasOwnProperty("updateInterval"))?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var t;return this._initialized||(t=this,xi.forEach((e=>e(t))),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return Ys(ri(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return Ys(ri(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return Ys(ri(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Ys(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Ys(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Ys(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Ys(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return function(t,e,n){return Ys(Ns(Ts),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof(null==Js?void 0:Js.BaseAudioContext)?null==Js?void 0:Js.AudioWorkletNode:Ts)(t,e,n)}(this.rawContext,t,e)}addAudioWorkletModule(t){return ei(this,void 0,void 0,(function*(){Ys(Ns(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise}))}workletsAreReady(){return ei(this,void 0,void 0,(function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()}))}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return ri(this._context)?this._context.resume():Promise.resolve()}close(){return ei(this,void 0,void 0,(function*(){var t;ri(this._context)&&"closed"!==this.state&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&(t=this,wi.forEach((e=>e(t))))}))}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let e=0;e<n.length;e++)n[e]=t;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=e,s.loop=!0,s.start(0),this._constants.set(t,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((t=>this._constants[t].disconnect())),this.close(),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach((e=>{e.id===t&&this._timeouts.remove(e)})),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const n=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{t(),s()},id:n,time:i+e})};return s(),n}}function Di(t,e){Vs(e)?e.forEach((e=>Di(t,e))):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Ai(t,e){Vs(e)?e.forEach((e=>Ai(t,e))):Object.defineProperty(t,e,{writable:!0})}const Mi=()=>{};class Oi extends di{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Mi;const t=li(Oi.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,js(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:Mi,onload:Mi,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:qi().sampleRate}set(t){return t instanceof Oi?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return ei(this,void 0,void 0,(function*(){const e=Oi.load(t).then((t=>{this.set(t),this.onload(this)}));Oi.downloads.push(e);try{yield e}finally{const t=Oi.downloads.indexOf(e);Oi.downloads.splice(t,1)}return this}))}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=Vs(t)&&t[0].length>0,n=e?t.length:1,s=e?t[0].length:t.length,i=qi(),o=i.createBuffer(n,s,i.sampleRate),r=e||1!==n?t:[t];for(let t=0;t<n;t++)o.copyToChannel(r[t],t);return this._buffer=o,this}toMono(t){if(Is(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length);const e=this.numberOfChannels;for(let n=0;n<e;n++){const e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map((t=>t/e)),this.fromArray(t)}return this}toArray(t){if(Is(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{const t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){Ys(this.loaded,"Buffer is not loaded");const n=Math.floor(t*this.sampleRate),s=Math.floor(e*this.sampleRate);Ys(n<s,"The start time must be less than the end time");const i=s-n,o=qi().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let t=0;t<this.numberOfChannels;t++)o.copyToChannel(this.getChannelData(t).subarray(n,s),t);return new Oi(o)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return(new Oi).fromArray(t)}static fromUrl(t){return ei(this,void 0,void 0,(function*(){const e=new Oi;return yield e.load(t)}))}static load(t){return ei(this,void 0,void 0,(function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const n=e[1].split("|");let s=n[0];for(const t of n)if(Oi.supportsType(t)){s=t;break}t=t.replace(e[0],s)}const n=""===Oi.baseUrl||Oi.baseUrl.endsWith("/")?Oi.baseUrl:Oi.baseUrl+"/",s=document.createElement("a");s.href=n+t,s.pathname=(s.pathname+s.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(s.href);if(!i.ok)throw new Error(`could not load url: ${t}`);const o=yield i.arrayBuffer();return yield qi().decodeAudioData(o)}))}static supportsType(t){const e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return ei(this,void 0,void 0,(function*(){for(yield Promise.resolve();Oi.downloads.length;)yield Oi.downloads[0]}))}}Oi.baseUrl="",Oi.downloads=[];class Ei extends Ci{constructor(){var t,e,n;super({clockSource:"offline",context:oi(arguments[0])?arguments[0]:(t=arguments[0],e=arguments[1]*arguments[2],n=arguments[2],new Cs(t,e,n)),lookAhead:0,updateInterval:oi(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=oi(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return ei(this,void 0,void 0,(function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const n=Math.floor(this.sampleRate/128);t&&e%n==0&&(yield new Promise((t=>setTimeout(t,1))))}}))}render(){return ei(this,arguments,void 0,(function*(t=!0){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Oi(e)}))}close(){return Promise.resolve()}}const Ri=new class extends ki{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return ei(this,void 0,void 0,(function*(){return Promise.resolve()}))}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};let Ni=Ri;function qi(){return Ni===Ri&&Ks&&Ii(new Ci),Ni}function Ii(t,e=!1){e&&Ni.dispose(),Ni=ri(t)?new Ci(t):oi(t)?new Ei(t):t}function Pi(){return Ni.resume()}if(Js&&!Js.TONE_SILENCE_LOGGING){let t="v";"dev"===i&&(t="");const e=` * Tone.js ${t}${i} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function Fi(t){return Math.pow(10,t/20)}function Vi(t){return Math.log(t)/Math.LN10*20}function ji(t){return Math.pow(2,t/12)}let Li=440;function Yi(t){return Math.round(Wi(t))}function Wi(t){return 69+12*Math.log2(t/Li)}function zi(t){return Li*Math.pow(2,(t-69)/12)}class Hi extends di{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const n=parseInt(t,10),s="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/n)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let s=0;return t&&"0"!==t&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(s+=this._beatsToUnits(parseFloat(n)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Hi&&this.fromType(this._val),Rs(this._val))return this._noArg();if(js(this._val)&&Rs(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Ps(this._val)){let t=0;for(const e in this._val)if(Ns(this._val[e])){const n=this._val[e];t+=new this.constructor(this.context,e).valueOf()*n}return t}if(Ns(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return js(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class Bi extends Hi{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Bi(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const n=new this.constructor(this.context,t).valueOf(),s=this.valueOf();return s+(Math.round(s/n)*n-s)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let t=1;t<9;t++){const n=Math.pow(2,t);e.push(n+"n."),e.push(n+"n"),e.push(n+"t")}e.push("0");let n=e[0],s=new Bi(this.context,e[0]).toSeconds();return e.forEach((e=>{const i=new Bi(this.context,e).toSeconds();Math.abs(i-t)<Math.abs(s-t)&&(n=e,s=i)})),n}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const n=Math.floor(e/this._getTimeSignature());let s=e%1*4;e=Math.floor(e)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[n,e,s].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Yi(this.toFrequency())}_now(){return this.context.now()}}function Ui(t,e){return new Bi(qi(),t,e)}class Gi extends Bi{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Li}static set A4(t){!function(t){Li=t}(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:Gi.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){const n=Xi[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?n:Gi.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let s=1;return t&&"0"!==t&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(s*=this._beatsToUnits(parseFloat(n)/4)),s}}})}transpose(t){return new Gi(this.context,this.valueOf()*ji(t))}harmonize(t){return t.map((t=>this.transpose(t)))}toMidi(){return Yi(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/Gi.A4);let n=Math.round(12*e)+57;const s=Math.floor(n/12);return s<0&&(n+=-12*s),$i[n%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return zi(t)}static ftom(t){return Yi(t)}}const Xi={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},$i=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Zi(t,e){return new Gi(qi(),t,e)}class Qi extends Bi{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function Ji(t,e){return new Qi(qi(),t,e)}class Ki extends di{constructor(){super();const t=li(Ki.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:qi()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return Gs(t),new Bi(this.context,t).toSeconds()}toFrequency(t){return new Gi(this.context,t).toFrequency()}toTicks(t){return new Qi(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach((n=>{Rs(t[n])&&delete e[n]})),e}get(){const t=this.constructor.getDefaults();return Object.keys(t).forEach((e=>{if(Reflect.has(this,e)){const n=this[e];Ns(n)&&Ns(n.value)&&Ns(n.setValueAtTime)?t[e]=n.value:n instanceof Ki?t[e]=n._getPartialProperties(t[e]):Vs(n)||Is(n)||js(n)||Fs(n)?t[e]=n:delete t[e]}})),t}set(t){return Object.keys(t).forEach((e=>{Reflect.has(this,e)&&Ns(this[e])&&(this[e]&&Ns(this[e].value)&&Ns(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof Ki?this[e].set(t[e]):this[e]=t[e])})),this}}class to extends yi{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return Ws(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){for(let n=this._search(e);n>=0;n--){const e=this._timeline[n];if(e.state===t)return e}}getNextState(t,e){const n=this._search(e);if(-1!==n)for(let e=n;e<this._timeline.length;e++){const n=this._timeline[e];if(n.state===t)return n}}}class eo extends Ki{constructor(){const t=li(eo.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Ys(Ns(t.param)&&(si(t.param)||t.param instanceof eo),"param must be an AudioParam");!si(t.param);)t.param=t.param._param;this._swappable=!!Ns(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new yi(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Ns(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ki.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Ns(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Ns(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Ns(this.maxValue)&&Ns(this.minValue)&&Ws(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Fi(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?Vi(t):t}setValueAtTime(t,e){const n=this.toSeconds(e),s=this._fromType(t);return Ys(isFinite(s)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),s=this._events.get(e);let i=this._initialValue;if(null===s)i=this._initialValue;else if("setTargetAtTime"!==s.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)i=s.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=s.value;if("setTargetAtTime"===s.type){const e=this._events.getBefore(s.time);t=null===e?this._initialValue:e.value}i="linearRampToValueAtTime"===n.type?this._linearInterpolate(s.time,t,n.time,n.value,e):this._exponentialInterpolate(s.time,t,n.time,n.value,e)}else i=s.value;else{const t=this._events.getBefore(s.time);let n;n=null===t?this._initialValue:t.value,"setTargetAtTime"===s.type&&(i=this._exponentialApproach(s.time,n,s.value,s.constant,e))}return this._toType(i)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const n=this._fromType(t),s=this.toSeconds(e);return Ys(isFinite(n)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:s,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,s),this._param.linearRampToValueAtTime(n,s),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=_i(n,0)?this._minOutput:n,this._assertRange(n);const s=this.toSeconds(e);return Ys(isFinite(n)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,s),this._param.exponentialRampToValueAtTime(n,s),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);const s=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,s),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){const s=this._fromType(t);Ys(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(e);return this._assertRange(s),Ys(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",t,i,n),this._param.setTargetAtTime(s,i,n),this}setValueCurveAtTime(t,e,n,s=1){n=this.toSeconds(n),e=this.toSeconds(e);const i=this._fromType(t[0])*s;this.setValueAtTime(this._toType(i),e);const o=n/(t.length-1);for(let n=1;n<t.length;n++){const i=this._fromType(t[n])*s;this.linearRampToValueAtTime(this._toType(i),e+n*o)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return Ys(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));Ys(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);const s=this._events.get(e),i=this._events.getAfter(e);return s&&_i(s.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){const s=this._events.getAfter(n.time),i=s?s.time:e+2,o=(i-e)/10;for(let n=e;n<i;n+=o)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,(e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)})),this}setParam(t){Ys(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,s,i){return n+(e-n)*Math.exp(-(i-t)/s)}_linearInterpolate(t,e,n,s,i){return e+(i-t)/(n-t)*(s-e)}_exponentialInterpolate(t,e,n,s,i){return e*Math.pow(s/e,(i-t)/(n-t))}}class no extends Ki{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Ns(this.input)?si(this.input)||this.input instanceof eo?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ns(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Ns(t)&&(t instanceof no||ii(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach((e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation}))}_getChannelProperties(){const t=this._getInternalNodes();Ys(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return io(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Qs("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return oo(this,t,e,n),this}chain(...t){return so(this,...t),this}fan(...t){return t.forEach((t=>this.connect(t))),this}dispose(){return super.dispose(),Ns(this.input)&&(this.input instanceof no?this.input.dispose():ii(this.input)&&this.input.disconnect()),Ns(this.output)&&(this.output instanceof no?this.output.dispose():ii(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function so(...t){const e=t.shift();t.reduce(((t,e)=>(t instanceof no?t.connect(e):ii(t)&&io(t,e),e)),e)}function io(t,e,n=0,s=0){for(Ys(Ns(t),"Cannot connect from undefined node"),Ys(Ns(e),"Cannot connect to undefined node"),(e instanceof no||ii(e))&&Ys(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Ys(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof no||e instanceof eo;)Ns(e.input)&&(e=e.input);for(;t instanceof no;)Ns(t.output)&&(t=t.output);si(e)?t.connect(e,n):t.connect(e,n,s)}function oo(t,e,n=0,s=0){if(Ns(e))for(;e instanceof no;)e=e.input;for(;!ii(t);)Ns(t.output)&&(t=t.output);si(e)?t.disconnect(e,n):ii(e)?t.disconnect(e,n,s):t.disconnect()}function ro(...t){const e=t.pop();Ns(e)&&t.forEach((t=>io(t,e)))}class ao extends no{constructor(){const t=li(ao.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new eo({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Di(this,"gain")}static getDefaults(){return Object.assign(no.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class co extends no{constructor(t){super(t),this.onended=Mi,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ao({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(no.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Mi})}_startGain(t,e=1){Ys(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Ys(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((()=>{const t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()}),this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Mi&&(this.onended(this),this.onended=Mi,!this.context.isOffline)){const t=()=>this.dispose();void 0!==window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Ys(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Mi,this}}class lo extends co{constructor(){const t=li(lo.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),io(this._source,this._gainNode),this.offset=new eo({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(co.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class uo extends no{constructor(){const t=li(uo.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new lo({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(no.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,n=0){return ho(this,t,e,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,s){return this._param.setValueCurveAtTime(t,e,n,s),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function ho(t,e,n,s){(e instanceof eo||si(e)||e instanceof uo&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof uo&&(e.overridden=!0)),io(t,e,n,s)}class po extends eo{constructor(){const t=li(po.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new yi(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(eo.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);const s=this._fromType(t),i=this._events.get(e),o=Math.round(Math.max(1/n,1));for(let t=0;t<=o;t++){const o=n*t+e,r=this._exponentialApproach(i.time,i.value,s,n,o);this.linearRampToValueAtTime(this._toType(r),o)}return this}setValueAtTime(t,e){const n=this.toSeconds(e);super.setValueAtTime(t,e);const s=this._events.get(n),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(o,0),this}linearRampToValueAtTime(t,e){const n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const s=this._events.get(n),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const n=this._fromType(t),s=this._events.get(e),i=Math.round(Math.max(10*(e-s.time),1)),o=(e-s.time)/i;for(let t=0;t<=i;t++){const i=o*t+s.time,r=this._exponentialInterpolate(s.time,s.value,e,n,i);this.linearRampToValueAtTime(this._toType(r),i)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Rs(t.ticks)){const e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}const n=this._fromType(this.getValueAtTime(t.time));let s=this._fromType(this.getValueAtTime(e));const i=this._events.get(e);return i&&i.time===e&&"setValueAtTime"===i.type&&(s=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+s)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){const n=this.toSeconds(e),s=this.getTicksAtTime(e);return this.getTimeOfTick(s+t)-n}getTimeOfTick(t){const e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){const s=this._fromType(this.getValueAtTime(e.time)),i=(this._fromType(this.getValueAtTime(n.time))-s)/(n.time-e.time),o=Math.sqrt(Math.pow(s,2)-2*i*(e.ticks-t)),r=(-s+o)/i;return(r>0?r:(-s-o)/i)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const n=this.toSeconds(e),s=this.toSeconds(t),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+s)-i}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class fo extends uo{constructor(){const t=li(fo.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new po({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(uo.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class mo extends Ki{constructor(){const t=li(mo.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new to,this._tickOffset=new yi,this._ticksAtTime=new yi,this._secondsAtTime=new yi,this.frequency=new fo({context:this.context,units:t.units,value:t.frequency}),Di(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ki.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),Ns(e)&&this.setTicksAtTime(e,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),n=this._state.getLastState("stopped",e),s=this._ticksAtTime.get(e),i={state:"paused",time:e};this._state.add(i);let o=s||n,r=s?s.ticks:0,a=null;return this._state.forEachBetween(o.time,e+this.sampleTime,(t=>{let e=o.time;const n=this._tickOffset.get(t.time);n&&n.time>=o.time&&(r=n.ticks,e=n.time),"started"===o.state&&"started"!==t.state&&(r+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e),t.time!==i.time&&(a={state:t.state,time:t.time,ticks:r})),o=t})),this._state.remove(i),a&&this._ticksAtTime.add(a),r}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);const s=this._secondsAtTime.get(t);let i=s||e,o=s?s.seconds:0,r=null;return this._state.forEachBetween(i.time,t+this.sampleTime,(t=>{let e=i.time;const s=this._tickOffset.get(t.time);s&&s.time>=i.time&&(o=s.seconds,e=s.time),"started"===i.state&&"started"!==t.state&&(o+=t.time-e,t.time!==n.time&&(r={state:t.state,time:t.time,seconds:o})),i=t})),this._state.remove(n),r&&this._secondsAtTime.add(r),o}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const n=this._tickOffset.get(e),s=this._state.get(e),i=Math.max(n.time,s.time),o=this.frequency.getTicksAtTime(i)+t-n.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(t,e,n){let s=this._state.get(t);this._state.forEachBetween(t,e,(e=>{s&&"started"===s.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(s.time,t),e.time-this.sampleTime,n),s=e}));let i=null;if(s&&"started"===s.state){const o=Math.max(s.time,t),r=this.frequency.getTicksAtTime(o),a=r-this.frequency.getTicksAtTime(s.time);let c=Math.ceil(a)-a;c=_i(c,1)?0:c;let l=this.frequency.getTimeOfTick(r+c);for(;l<e;){try{n(l,Math.round(this.getTicksAtTime(l)))}catch(t){i=t;break}l+=this.frequency.getDurationOfTicks(1,l)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class go extends Ki{constructor(){const t=li(go.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=Mi,this._lastUpdate=0,this._state=new to("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new mo({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Di(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ki.getDefaults(),{callback:Mi,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){zs(this.context);const n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const n=this.toSeconds(e),s=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(s+t,n)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,(t=>{switch(t.state){case"started":const e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}})),this._tickSource.forEachTickBetween(t,e,((t,e)=>{this.callback(t,e)})))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Si.mixin(go);class _o extends no{constructor(){const t=li(_o.getDefaults(),arguments,["delayTime","maxDelay"]);super(t),this.name="Delay";const e=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(e,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(e),this.delayTime=new eo({context:this.context,param:this._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),Di(this,"delayTime")}static getDefaults(){return Object.assign(no.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class vo extends no{constructor(){const t=li(vo.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new ao({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,Di(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(no.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class yo extends no{constructor(){const t=li(yo.getDefaults(),arguments);super(t),this.name="Destination",this.input=new vo({context:this.context}),this.output=new ao({context:this.context}),this.volume=this.input.volume,so(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(no.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),so(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}bi((t=>{t.destination=new yo({context:t})})),Ti((t=>{t.destination.dispose()}));class xo extends no{constructor(){super(...arguments),this.name="Listener",this.positionX=new eo({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new eo({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new eo({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new eo({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new eo({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new eo({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new eo({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new eo({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new eo({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(no.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}function bo(t,e){return ei(this,arguments,void 0,(function*(t,e,n=2,s=qi().sampleRate){const i=qi(),o=new Ei(n,e,s);Ii(o),yield t(o);const r=o.render();Ii(i);const a=yield r;return new Oi(a)}))}bi((t=>{t.listener=new xo({context:t})})),Ti((t=>{t.listener.dispose()}));class wo extends di{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=li(wo.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach((e=>{this._loadingCount++;const n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)}))}static getDefaults(){return{baseUrl:"",onerror:Mi,onload:Mi,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Ys(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every((([t,e])=>e.loaded))}add(t,e,n=Mi,s=Mi){return js(e)?(this.baseUrl&&"data:audio/"===e.trim().substring(0,11).toLowerCase()&&(this.baseUrl=""),this._buffers.set(t.toString(),new Oi(this.baseUrl+e,n,s))):this._buffers.set(t.toString(),new Oi(e,n,s)),this}dispose(){return super.dispose(),this._buffers.forEach((t=>t.dispose())),this._buffers.clear(),this}}class To extends Gi{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return Yi(super._frequencyToUnits(t))}_ticksToUnits(t){return Yi(super._ticksToUnits(t))}_beatsToUnits(t){return Yi(super._beatsToUnits(t))}_secondsToUnits(t){return Yi(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return zi(this.toMidi())}transpose(t){return new To(this.context,this.toMidi()+t)}}function So(t,e){return new To(qi(),t,e)}class ko extends Qi{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function Co(t,e){return new ko(qi(),t,e)}class Do extends Ki{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new yi,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}bi((t=>{t.draw=new Do({context:t})})),Ti((t=>{t.draw.dispose()}));class Ao extends di{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Ys(Ns(t.time),"Events must have a time property"),Ys(Ns(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new Mo(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const n of e)if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,(t=>this.remove(t))),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e,n=null;if(t.getBalance()>0)if(null===t.left.right)e=t.left,e.right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)e=t.right,e.left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()}_rotateLeft(t){const e=t.parent,n=t.isLeftChild(),s=t.right;s&&(t.right=s.left,s.left=t),null!==e?n?e.left=s:e.right=s:this._setRoot(s)}_rotateRight(t){const e=t.parent,n=t.isLeftChild(),s=t.left;s&&(t.left=s.right,s.right=t),null!==e?n?e.left=s:e.right=s:this._setRoot(s)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse((t=>e.push(t))),e.forEach((e=>{e.event&&t(e.event)}))}return this}forEachAtTime(t,e){if(null!==this._root){const n=[];this._root.search(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}forEachFrom(t,e){if(null!==this._root){const n=[];this._root.searchAfter(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse((t=>t.dispose())),this._root=null,this}}class Mo{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Oo extends di{constructor(t){super(),this.name="TimelineValue",this._timeline=new yi({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class Eo extends no{constructor(){super(li(Eo.getDefaults(),arguments,["context"]))}connect(t,e=0,n=0){return ho(this,t,e,n),this}}class Ro extends Eo{constructor(){const t=li(Ro.getDefaults(),arguments,["mapping","length"]);super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Vs(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):qs(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(uo.getDefaults(),{length:1024})}setMap(t,e=1024){const n=new Float32Array(e);for(let s=0,i=e;s<i;s++){const e=s/(i-1)*2-1;n[s]=t(e,s)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){Ys(["none","2x","4x"].some((e=>e.includes(t))),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class No extends Eo{constructor(){const t=li(No.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new Ro({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(Eo.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class qo{constructor(t,e){this.id=qo._eventId++,this._remainderTime=0;const n=Object.assign(qo.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:Mi,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}qo._eventId=0;class Io extends qo{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(Io.getDefaults(),e);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},qo.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return gi(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new ko(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){gi(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ko(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const e=this.transport.getTicksAtTime(t);fi(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Po extends Ki{constructor(){const t=li(Po.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new Oo(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new yi,this._repeatedEvents=new Ao,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new go({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Di(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Ki.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const n=e%(2*this._swingTicks)/(2*this._swingTicks),s=Math.sin(n*Math.PI)*this._swingAmount;t+=new ko(this.context,2*this._swingTicks/3).toSeconds()*s}Us(!0),this._timeline.forEachAtTime(e,(e=>e.invoke(t))),Us(!1)}schedule(t,e){const n=new qo(this,{callback:t,time:new Qi(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n,s=1/0){const i=new Io(this,{callback:t,duration:new Bi(this.context,s).toTicks(),interval:new Bi(this.context,e).toTicks(),time:new Qi(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(t,e){const n=new qo(this,{callback:t,once:!0,time:new Qi(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,(t=>this.clear(t.id))),this._repeatedEvents.forEachFrom(e,(t=>this.clear(t.id))),this}_bindClockEvents(){this._clock.on("start",((t,e)=>{e=new ko(this.context,e).toSeconds(),this.emit("start",t,e)})),this._clock.on("stop",(t=>{this.emit("stop",t)})),this._clock.on("pause",(t=>{this.emit("pause",t)}))}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return this.context.resume(),Ns(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){Vs(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Bi(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Bi(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new ko(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new ko(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(e),s=e+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e);this.emit("stop",s),this._clock.setTicksAtTime(t,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)}}syncSignal(t,e){const n=this.now();let s=this.bpm,i=1/(60/s.getValueAtTime(n)/this.PPQ),o=[];if("time"===t.units){const t=1/64/i,e=new ao(t),n=new No(-1),r=new ao(t);s.chain(e,n,r),s=r,i=1/i,o=[e,n,r]}e||(e=0!==t.getValueAtTime(n)?t.getValueAtTime(n)/i:0);const r=new ao(e);return s.connect(r),r.connect(t._param),o.push(r),this._syncedSignals.push({initial:t.value,nodes:o,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const n=this._syncedSignals[e];n.signal===t&&(n.nodes.forEach((t=>t.dispose())),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Ai(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Si.mixin(Po),bi((t=>{t.transport=new Po({context:t})})),Ti((t=>{t.transport.dispose()}));class Fo extends no{constructor(t){super(t),this.input=void 0,this._state=new to("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Mi,this._syncedStop=Mi,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new vo({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,Di(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(no.getDefaults(),{mute:!1,onstop:Mi,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let s=Rs(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(s=this._clampToCurrentTime(s),this._synced||"started"!==this._state.getValueAtTime(s))if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const t=this._state.get(s);t&&(t.offset=this.toSeconds(ui(e,0)),t.duration=n?this.toSeconds(n):void 0);const i=this.context.transport.schedule((t=>{this._start(t,e,n)}),s);this._scheduled.push(i),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else zs(this.context),this._start(s,e,n);else Ys(fi(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,e,n);return this}stop(t){let e=Rs(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||Ns(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(fi(e,0)){const n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){const s=e-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-s),this._start(t,this.toSeconds(n.offset)+s,i)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((t=>this.context.transport.clear(t))),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Mi,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Vo extends co{constructor(){const t=li(Vo.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,io(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new eo({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Oi(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(co.getDefaults(),{url:new Oi,loop:!1,loopEnd:0,loopStart:0,onload:Mi,onerror:Mi,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n,s=1){Ys(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(t);this._startGain(i,s),e=this.loop?ui(e,this.loopStart):ui(e,0);let o=Math.max(this.toSeconds(e),0);if(this.loop){const t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;mi(o,t)&&(o=(o-e)%n+e),_i(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,gi(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),Ns(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(i+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class jo extends Fo{constructor(){const t=li(jo.getDefaults(),arguments,["type"]);super(t),this.name="Noise",this._source=null,this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Fo.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if(Ys(t in Wo,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const e=Wo[this._type];this._source=new Vo({url:e,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Lo=220500,Yo={brown:null,pink:null,white:null},Wo={get brown(){if(!Yo.brown){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Lo);t[e]=n;let s=0;for(let t=0;t<Lo;t++){const e=2*Math.random()-1;n[t]=(s+.02*e)/1.02,s=n[t],n[t]*=3.5}}Yo.brown=(new Oi).fromArray(t)}return Yo.brown},get pink(){if(!Yo.pink){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Lo);let s,i,o,r,a,c,l;t[e]=n,s=i=o=r=a=c=l=0;for(let t=0;t<Lo;t++){const e=2*Math.random()-1;s=.99886*s+.0555179*e,i=.99332*i+.0750759*e,o=.969*o+.153852*e,r=.8665*r+.3104856*e,a=.55*a+.5329522*e,c=-.7616*c-.016898*e,n[t]=s+i+o+r+a+c+l+.5362*e,n[t]*=.11,l=.115926*e}}Yo.pink=(new Oi).fromArray(t)}return Yo.pink},get white(){if(!Yo.white){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Lo);t[e]=n;for(let t=0;t<Lo;t++)n[t]=2*Math.random()-1}Yo.white=(new Oi).fromArray(t)}return Yo.white}};class zo extends no{constructor(){const t=li(zo.getDefaults(),arguments,["volume"]);super(t),this.name="UserMedia",this._volume=this.output=new vo({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Di(this,"volume"),this.mute=t.mute}static getDefaults(){return Object.assign(no.getDefaults(),{mute:!1,volume:0})}open(t){return ei(this,void 0,void 0,(function*(){Ys(zo.supported,"UserMedia is not supported"),"started"===this.state&&this.close();const e=yield zo.enumerateDevices();Is(t)?this._device=e[t]:(this._device=e.find((e=>e.label===t||e.deviceId===t)),!this._device&&e.length>0&&(this._device=e[0]),Ys(Ns(this._device),`No matching device ${t}`));const n={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(n.audio.deviceId=this._device.deviceId);const s=yield navigator.mediaDevices.getUserMedia(n);if(!this._stream){this._stream=s;const t=this.context.createMediaStreamSource(s);io(t,this.output),this._mediaStream=t}return this}))}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach((t=>{t.stop()})),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return ei(this,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((t=>"audioinput"===t.kind))}))}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){return this._device?this._device.deviceId:void 0}get groupId(){return this._device?this._device.groupId:void 0}get label(){return this._device?this._device.label:void 0}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return Ns(navigator.mediaDevices)&&Ns(navigator.mediaDevices.getUserMedia)}}function Ho(t,e){return ei(this,void 0,void 0,(function*(){const n=e/t.context.sampleRate,s=new Ei(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)}))}class Bo extends co{constructor(){const t=li(Bo.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],io(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new eo({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new eo({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),Di(this,["frequency","detune"])}static getDefaults(){return Object.assign(co.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Uo extends Fo{constructor(){const t=li(Uo.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new uo({context:this.context,units:"frequency",value:t.frequency}),Di(this,"frequency"),this.detune=new uo({context:this.context,units:"cents",value:t.detune}),Di(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(Fo.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),n=new Bo({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return Uo._periodicWaveCache.find((t=>{return t.phase===this._phase&&(e=t.partials,n=this._partials,e.length===n.length&&e.every(((t,e)=>n[e]===t)));var e,n}));{const t=Uo._periodicWaveCache.find((t=>t.type===this._type&&t.phase===this._phase));return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{const e=this._getCachedPeriodicWave();if(Ns(e)){const{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[e,n]=this._getRealImaginary(t,this._phase),s=this.context.createPeriodicWave(e,n);this._wave=s,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),Uo._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),Uo._periodicWaveCache.length>100&&Uo._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Ws(t,0);let e=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{const e=new Float32Array(t);this._partials.forEach(((t,n)=>e[n]=t)),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){let n=2048;const s=new Float32Array(n),i=new Float32Array(n);let o=1;if("custom"===t){if(o=this._partials.length+1,this._partialCount=this._partials.length,n=o,0===this._partials.length)return[s,i]}else{const e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(o=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],o=Math.max(o,2),n=o):this._partialCount=0,this._partials=[]}for(let r=1;r<n;++r){const n=2/(r*Math.PI);let a;switch(t){case"sine":a=r<=o?1:0,this._partials[r-1]=a;break;case"square":a=1&r?2*n:0,this._partials[r-1]=a;break;case"sawtooth":a=n*(1&r?1:-1),this._partials[r-1]=a;break;case"triangle":a=1&r?n*n*2*(r-1>>1&1?-1:1):0,this._partials[r-1]=a;break;case"custom":a=this._partials[r-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==a?(s[r]=-a*Math.sin(e*r),i[r]=a*Math.cos(e*r)):(s[r]=0,i[r]=0)}return[s,i]}_inverseFFT(t,e,n){let s=0;const i=t.length;for(let o=0;o<i;o++)s+=t[o]*Math.cos(o*n)+e[o]*Math.sin(o*n);return s}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let n=0;const s=2*Math.PI;for(let i=0;i<32;i++)n=Math.max(this._inverseFFT(t,e,i/32*s),n);return vi(-this._inverseFFT(t,e,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return ei(this,arguments,void 0,(function*(t=1024){return Ho(this,t)}))}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Uo._periodicWaveCache=[];class Go extends Eo{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Ro({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Xo extends uo{constructor(){const t=li(Xo.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new ao({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(uo.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class $o extends Fo{constructor(){const t=li($o.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new Go({context:this.context}),this._modulationNode=new ao({context:this.context}),this._carrier=new Uo({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Uo({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Xo({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Di(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Uo.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return ei(this,arguments,void 0,(function*(t=1024){return Ho(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Zo extends Fo{constructor(){const t=li(Zo.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new ao({context:this.context,gain:0}),this._carrier=new Uo({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new uo({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Uo({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Xo({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new Xo({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Di(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Uo.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return ei(this,arguments,void 0,(function*(t=1024){return Ho(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Qo extends Fo{constructor(){const t=li(Qo.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new ao({context:this.context,gain:0}),this._thresh=new Ro({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new uo({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Uo({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Di(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Fo.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return ei(this,arguments,void 0,(function*(t=1024){return Ho(this,t)}))}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Jo extends Fo{constructor(){const t=li(Jo.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new uo({context:this.context,units:"frequency",value:t.frequency}),this.detune=new uo({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,Di(this,["frequency","detune"])}static getDefaults(){return Object.assign(Uo.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach((e=>e.start(t)))}_stop(t){t=this.toSeconds(t),this._forEach((e=>e.stop(t)))}_restart(t){this._forEach((e=>e.restart(t)))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach((e=>e.type=t))}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,n=t/(this._oscillators.length-1);this._forEach(((t,s)=>t.detune.value=e+n*s))}}get count(){return this._oscillators.length}set count(t){if(Ws(t,1),this._oscillators.length!==t){this._forEach((t=>t.dispose())),this._oscillators=[];for(let e=0;e<t;e++){const n=new Uo({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):Mi});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach((t=>t.start()))}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach(((t,e)=>t.phase=this._phase+e/this.count*360))}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach((e=>e.baseType=t)),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach((e=>e.partials=t)))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach((e=>e.partialCount=t)),this._type=this._oscillators[0].type}asArray(){return ei(this,arguments,void 0,(function*(t=1024){return Ho(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach((t=>t.dispose())),this}}class Ko extends Fo{constructor(){const t=li(Ko.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Xo({context:this.context,value:2}),this._pulse=new Qo({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Uo({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Di(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Fo.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return ei(this,arguments,void 0,(function*(t=1024){return Ho(this,t)}))}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const tr={am:$o,fat:Jo,fm:Zo,oscillator:Uo,pulse:Qo,pwm:Ko};class er extends Fo{constructor(){const t=li(er.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new uo({context:this.context,units:"frequency",value:t.frequency}),this.detune=new uo({context:this.context,units:"cents",value:t.detune}),Di(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Uo.getDefaults(),Zo.getDefaults(),$o.getDefaults(),Jo.getDefaults(),Qo.getDefaults(),Ko.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some((t=>this._sourceType===t))&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=tr[t],n=this.now();if(this._oscillator){const t=this._oscillator;t.stop(n),this.context.setTimeout((()=>t.dispose()),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof tr[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&Is(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&Is(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&js(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(){return ei(this,arguments,void 0,(function*(t=1024){return Ho(this,t)}))}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class nr extends uo{constructor(){super(li(nr.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new ao({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,so(this._constantSource,this._sum)}static getDefaults(){return Object.assign(uo.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class sr extends Eo{constructor(){const t=li(sr.getDefaults(),arguments,["min","max"]);super(t),this.name="Scale",this._mult=this.input=new Xo({context:this.context,value:t.max-t.min}),this._add=this.output=new nr({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Eo.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class ir extends Eo{constructor(){super(li(ir.getDefaults(),arguments)),this.name="Zero",this._gain=new ao({context:this.context}),this.output=this._gain,this.input=void 0,io(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),oo(this.context.getConstant(0),this._gain),this}}class or extends no{constructor(){const t=li(or.getDefaults(),arguments,["frequency","min","max"]);super(t),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=eo.prototype._fromType,this._toType=eo.prototype._toType,this._is=eo.prototype._is,this._clampValue=eo.prototype._clampValue,this._oscillator=new Uo(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new ao({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new uo({context:this.context,units:"audioRange",value:0}),this._zeros=new ir({context:this.context}),this._a2g=new Go({context:this.context}),this._scaler=this.output=new sr({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Di(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(Uo.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const e=this.min,n=this.max;this._units=t,this.min=e,this.max=n}get state(){return this._oscillator.state}connect(t,e,n){return(t instanceof eo||t instanceof uo)&&(this.convert=t.convert,this.units=t.units),ho(this,t,e,n),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function rr(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){Ws(s,t,e),n.set(this,s)}})}}function ar(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){Ws(this.toSeconds(s),t,e),n.set(this,s)}})}}class cr extends Fo{constructor(){const t=li(cr.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new Oi({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Fo.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Mi,onerror:Mi,playbackRate:1,reverse:!1})}load(t){return ei(this,void 0,void 0,(function*(){return yield this._buffer.load(t),this._onload(),this}))}_onload(t=Mi){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){e=this._loop?ui(e,this._loopStart):ui(e,0);const s=this.toSeconds(e),i=n;n=ui(n,Math.max(this._buffer.duration-s,0));let o=this.toSeconds(n);o/=this._playbackRate,t=this.toSeconds(t);const r=new Vo({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+o),this._state.setStateAtTime("stopped",t+o,{implicitEnd:!0})),this._activeSources.add(r),this._loop&&Rs(i)?r.start(t,s):r.start(t,s,o-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach((t=>t.stop(e)))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){var s;null===(s=[...this._activeSources].pop())||void 0===s||s.stop(t),this._start(t,e,n)}seek(t,e){const n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){const e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Ws(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopStart=t}))}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Ws(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopEnd=t}))}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach((e=>{e.loop=t})),t)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((t=>t.cancelStop()))),this._activeSources.forEach((n=>{n.playbackRate.setValueAtTime(t,e)}))}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach((t=>t.dispose())),this._activeSources.clear(),this._buffer.dispose(),this}}ti([ar(0)],cr.prototype,"fadeIn",void 0),ti([ar(0)],cr.prototype,"fadeOut",void 0);class lr extends no{constructor(){const t=li(lr.getDefaults(),arguments,["urls","onload"],"urls");super(t),this.name="Players",this.input=void 0,this._players=new Map,this._volume=this.output=new vo({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Di(this,"volume"),this._buffers=new wo({urls:t.urls,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.mute=t.mute,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Fo.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:Mi,onerror:Mi,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._players.forEach((e=>{e.fadeIn=t}))}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._players.forEach((e=>{e.fadeOut=t}))}get state(){return Array.from(this._players).some((([t,e])=>"started"===e.state))?"started":"stopped"}has(t){return this._buffers.has(t)}player(t){if(Ys(this.has(t),`No Player with the name ${t} exists on this object`),!this._players.has(t)){const e=new cr({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,e)}return this._players.get(t)}get loaded(){return this._buffers.loaded}add(t,e,n){return Ys(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,e,n),this}stopAll(t){return this._players.forEach((e=>e.stop(t))),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach((t=>t.dispose())),this._buffers.dispose(),this}}class ur extends Fo{constructor(){const t=li(ur.getDefaults(),arguments,["url","onload"]);super(t),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[],this.buffer=new Oi({onload:t.onload,onerror:t.onerror,reverse:t.reverse,url:t.url}),this._clock=new go({context:this.context,callback:this._tick.bind(this),frequency:1/t.grainSize}),this._playbackRate=t.playbackRate,this._grainSize=t.grainSize,this._overlap=t.overlap,this.detune=t.detune,this.overlap=t.overlap,this.loop=t.loop,this.playbackRate=t.playbackRate,this.grainSize=t.grainSize,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.reverse=t.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(Fo.getDefaults(),{onload:Mi,onerror:Mi,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(t,e,n){e=ui(e,0),e=this.toSeconds(e),t=this.toSeconds(t);const s=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,e/s),n&&this.stop(t+this.toSeconds(n))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){this._stop(t),this._start(t,e,n)}_stop(t){this._clock.stop(t)}_onstop(t){this._activeSources.forEach((e=>{e.fadeOut=0,e.stop(t)})),this.onstop(this)}_tick(t){const e=this._clock.getTicksAtTime(t),n=e*this._grainSize;if(this.log("offset",n),!this.loop&&n>this.buffer.duration)return void this.stop(t);const s=n<this._overlap?0:this._overlap,i=new Vo({context:this.context,url:this.buffer,fadeIn:s,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:ji(this.detune/100)}).connect(this.output);i.start(t,this._grainSize*e),i.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(i),i.onended=()=>{const t=this._activeSources.indexOf(i);-1!==t&&this._activeSources.splice(t,1)}}get playbackRate(){return this._playbackRate}set playbackRate(t){Ws(t,.001),this._playbackRate=t,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(t){this.buffer.loaded&&Ws(this.toSeconds(t),0,this.buffer.duration),this._loopStart=this.toSeconds(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this.buffer.loaded&&Ws(this.toSeconds(t),0,this.buffer.duration),this._loopEnd=this.toSeconds(t)}get reverse(){return this.buffer.reverse}set reverse(t){this.buffer.reverse=t}get grainSize(){return this._grainSize}set grainSize(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(t){const e=this.toSeconds(t);Ws(e,0),this._overlap=e}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach((t=>t.dispose())),this}}class hr extends Eo{constructor(){super(...arguments),this.name="Abs",this._abs=new Ro({context:this.context,mapping:t=>Math.abs(t)<.001?0:Math.abs(t)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class dr extends Eo{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Ro({context:this.context,mapping:t=>2*Math.abs(t)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class pr extends Eo{constructor(){super(...arguments),this.name="Negate",this._multiply=new Xo({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class fr extends uo{constructor(){super(li(fr.getDefaults(),arguments,["value"])),this.override=!1,this.name="Subtract",this._sum=new ao({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new pr({context:this.context}),this.subtrahend=this._param,so(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(uo.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class mr extends Eo{constructor(){super(li(mr.getDefaults(),arguments)),this.name="GreaterThanZero",this._thresh=this.output=new Ro({context:this.context,length:127,mapping:t=>t<=0?0:1}),this._scale=this.input=new Xo({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class gr extends uo{constructor(){const t=li(gr.getDefaults(),arguments,["value"]);super(t),this.name="GreaterThan",this.override=!1,this._subtract=this.input=new fr({context:this.context,value:t.value}),this._gtz=this.output=new mr({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,Di(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(uo.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class _r extends sr{constructor(){const t=li(_r.getDefaults(),arguments,["min","max","exponent"]);super(t),this.name="ScaleExp",this.input=this._exp=new No({context:this.context,value:t.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(sr.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(t){this._exp.value=t}dispose(){return super.dispose(),this._exp.dispose(),this}}class vr extends uo{constructor(){const t=li(uo.getDefaults(),arguments,["value","units"]);super(t),this.name="SyncedSignal",this.override=!1,this._lastVal=t.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new lo({context:this.context,offset:t.value,units:t.units}).start(0),this.setValueAtTime(t.value,0)}_onTick(t){const e=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==e&&(this._lastVal=e,this._constantSource.offset.setValueAtTime(e,t))}_anchorValue(t){const e=super.getValueAtTime(this.context.transport.seconds);this._lastVal=e,this._constantSource.offset.cancelAndHoldAtTime(t),this._constantSource.offset.setValueAtTime(e,t)}getValueAtTime(t){const e=new Qi(this.context,t).toSeconds();return super.getValueAtTime(e)}setValueAtTime(t,e){const n=new Qi(this.context,e).toSeconds();return super.setValueAtTime(t,n),this}linearRampToValueAtTime(t,e){const n=new Qi(this.context,e).toSeconds();return super.linearRampToValueAtTime(t,n),this}exponentialRampToValueAtTime(t,e){const n=new Qi(this.context,e).toSeconds();return super.exponentialRampToValueAtTime(t,n),this}setTargetAtTime(t,e,n){const s=new Qi(this.context,e).toSeconds();return super.setTargetAtTime(t,s,n),this}cancelScheduledValues(t){const e=new Qi(this.context,t).toSeconds();return super.cancelScheduledValues(e),this}setValueCurveAtTime(t,e,n,s){const i=new Qi(this.context,e).toSeconds();return n=this.toSeconds(n),super.setValueCurveAtTime(t,i,n,s),this}cancelAndHoldAtTime(t){const e=new Qi(this.context,t).toSeconds();return super.cancelAndHoldAtTime(e),this}setRampPoint(t){const e=new Qi(this.context,t).toSeconds();return super.setRampPoint(e),this}exponentialRampTo(t,e,n){const s=new Qi(this.context,n).toSeconds();return super.exponentialRampTo(t,e,s),this}linearRampTo(t,e,n){const s=new Qi(this.context,n).toSeconds();return super.linearRampTo(t,e,s),this}targetRampTo(t,e,n){const s=new Qi(this.context,n).toSeconds();return super.targetRampTo(t,e,s),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class yr extends no{constructor(){const t=li(yr.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new uo({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(no.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(js(t))return t;{let n;for(n in xr)if(xr[n][e]===t)return n;return t}}_setCurve(t,e,n){if(js(n)&&Reflect.has(xr,n)){const s=xr[n];Ps(s)?"_decayCurve"!==t&&(this[t]=s[e]):this[t]=s}else{if(!Vs(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let n=this.toSeconds(this.attack);const s=this.toSeconds(this.decay),i=this.getValueAtTime(t);if(i>0&&(n=(1-i)/(1/n)),n<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);let s=this._attackCurve;for(let t=1;t<s.length;t++)if(s[t-1]<=i&&i<=s[t]){s=this._attackCurve.slice(t),s[0]=i;break}this._sig.setValueCurveAtTime(s,t,n,e)}if(s&&this.sustain<1){const i=e*this.sustain,o=t+n;this.log("decay",o),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(i,s+o):this._sig.exponentialApproachValueAtTime(i,o,s)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(Ys(Vs(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return ho(this,t,e,n),this}asArray(){return ei(this,arguments,void 0,(function*(t=1024){const e=t/this.context.sampleRate,n=new Ei(1,e,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),o=.1*i,r=i+o,a=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/r,decay:e*this.toSeconds(this.decay)/r,release:e*this.toSeconds(this.release)/r,context:n}));return a._sig.toDestination(),a.triggerAttackRelease(e*(s+o)/r,0),(yield n.render()).getChannelData(0)}))}dispose(){return super.dispose(),this._sig.dispose(),this}}ti([ar(0)],yr.prototype,"attack",void 0),ti([ar(0)],yr.prototype,"decay",void 0),ti([rr(0,1)],yr.prototype,"sustain",void 0),ti([ar(0)],yr.prototype,"release",void 0);const xr=(()=>{const t=128;let e,n;const s=[];for(e=0;e<t;e++)s[e]=Math.sin(e/127*(Math.PI/2));const i=[];for(e=0;e<127;e++){n=e/127;const t=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;i[e]=t/10+.83*n}i[127]=1;const o=[];for(e=0;e<t;e++)o[e]=Math.ceil(e/127*5)/5;const r=[];for(e=0;e<t;e++)n=e/127,r[e]=.5*(1-Math.cos(Math.PI*n));const a=[];for(e=0;e<t;e++){n=e/127;const t=4*Math.pow(n,3)+.2,s=Math.cos(t*Math.PI*2*n);a[e]=Math.abs(s*(1-n))}function c(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:c(a),Out:a},cosine:{In:s,Out:(l=s,l.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:i,Out:c(i)},sine:{In:r,Out:c(r)},step:{In:o,Out:c(o)}};var l})();class br extends no{constructor(){const t=li(br.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new vo({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Di(this,"volume")}static getDefaults(){return Object.assign(no.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const n=this["_original_"+t]=this[t];this[t]=(...t)=>{const s=t[e],i=this.context.transport.schedule((s=>{t[e]=s,n.apply(this,t)}),s);this._scheduledEvents.push(i)}}unsync(){return this._scheduledEvents.forEach((t=>this.context.transport.clear(t))),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,n,s){const i=this.toSeconds(n),o=this.toSeconds(e);return this.triggerAttack(t,i,s),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class wr extends br{constructor(){const t=li(wr.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(br.getDefaults(),{detune:0,onsilence:Mi,portamento:0})}triggerAttack(t,e,n=1){this.log("triggerAttack",t,e,n);const s=this.toSeconds(e);return this._triggerEnvelopeAttack(s,n),this.setNote(t,s),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const n=this.toSeconds(e),s=t instanceof Gi?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,t,n)}else this.frequency.setValueAtTime(s,n);return this}}ti([ar(0)],wr.prototype,"portamento",void 0);class Tr extends yr{constructor(){super(li(Tr.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ao({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Sr extends wr{constructor(){const t=li(Sr.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new er(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Tr(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),Di(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(wr.getDefaults(),{envelope:Object.assign(hi(yr.getDefaults(),Object.keys(no.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(hi(er.getDefaults(),[...Object.keys(Fo.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class kr extends wr{constructor(){const t=li(kr.getDefaults(),arguments);super(t),this.name="ModulationSynth",this._carrier=new Sr({context:this.context,oscillator:t.oscillator,envelope:t.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Sr({context:this.context,oscillator:t.modulation,envelope:t.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new uo({context:this.context,units:"frequency"}),this.detune=new uo({context:this.context,value:t.detune,units:"cents"}),this.harmonicity=new Xo({context:this.context,value:t.harmonicity,minValue:0}),this._modulationNode=new ao({context:this.context,gain:0}),Di(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(wr.getDefaults(),{harmonicity:3,oscillator:Object.assign(hi(er.getDefaults(),[...Object.keys(Fo.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(hi(yr.getDefaults(),Object.keys(no.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(hi(er.getDefaults(),[...Object.keys(Fo.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(hi(yr.getDefaults(),Object.keys(no.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(t,e){this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class Cr extends kr{constructor(){super(li(Cr.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new Go({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class Dr extends no{constructor(){const t=li(Dr.getDefaults(),arguments,["frequency","type"]);super(t),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new eo({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new eo({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new eo({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new eo({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(no.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){Ys(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let n=0;n<t;n++){const s=19980*Math.pow(n/t,2)+20;e[n]=s}const n=new Float32Array(t),s=new Float32Array(t),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(e,n,s),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Ar extends no{constructor(){const t=li(Ar.getDefaults(),arguments,["frequency","type","rolloff"]);super(t),this.name="Filter",this.input=new ao({context:this.context}),this.output=new ao({context:this.context}),this._filters=[],this._filters=[],this.Q=new uo({context:this.context,units:"positive",value:t.Q}),this.frequency=new uo({context:this.context,units:"frequency",value:t.frequency}),this.detune=new uo({context:this.context,units:"cents",value:t.detune}),this.gain=new uo({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,Di(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(no.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){Ys(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),`Invalid filter type: ${t}`),this._type=t,this._filters.forEach((e=>e.type=t))}get rolloff(){return this._rolloff}set rolloff(t){const e=Is(t)?t:parseInt(t,10),n=[-12,-24,-48,-96];let s=n.indexOf(e);Ys(-1!==s,`rolloff can only be ${n.join(", ")}`),s+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach((t=>t.disconnect())),this._filters=new Array(s);for(let t=0;t<s;t++){const e=new Dr({context:this.context});e.type=this._type,this.frequency.connect(e.frequency),this.detune.connect(e.detune),this.Q.connect(e.Q),this.gain.connect(e.gain),this._filters[t]=e}this._internalChannels=this._filters,so(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){const e=new Dr({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(t).map((()=>1));return this._filters.forEach((()=>{e.getFrequencyResponse(t).forEach(((t,e)=>n[e]*=t))})),e.dispose(),n}dispose(){return super.dispose(),this._filters.forEach((t=>{t.dispose()})),Ai(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Mr extends yr{constructor(){const t=li(Mr.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="FrequencyEnvelope",this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new No({context:this.context,value:t.exponent}),this._scale=this.output=new sr({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(yr.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){const e=this.toFrequency(t);Ws(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}get exponent(){return this._exponent.value}set exponent(t){this._exponent.value=t}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Or extends wr{constructor(){const t=li(Or.getDefaults(),arguments);super(t),this.name="MonoSynth",this.oscillator=new er(Object.assign(t.oscillator,{context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Ar(Object.assign(t.filter,{context:this.context})),this.filterEnvelope=new Mr(Object.assign(t.filterEnvelope,{context:this.context})),this.envelope=new Tr(Object.assign(t.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Di(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(wr.getDefaults(),{envelope:Object.assign(hi(yr.getDefaults(),Object.keys(no.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(hi(Ar.getDefaults(),Object.keys(no.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(hi(Mr.getDefaults(),Object.keys(no.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(hi(er.getDefaults(),Object.keys(Fo.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(t,e=1){if(this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Er extends wr{constructor(){const t=li(Er.getDefaults(),arguments);super(t),this.name="DuoSynth",this.voice0=new Or(Object.assign(t.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new Or(Object.assign(t.voice1,{context:this.context})),this.harmonicity=new Xo({context:this.context,units:"positive",value:t.harmonicity}),this._vibrato=new or({frequency:t.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new ao({context:this.context,units:"normalRange",gain:t.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new uo({context:this.context,units:"frequency",value:440}),this.detune=new uo({context:this.context,units:"cents",value:t.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),Di(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)}static getDefaults(){return ci(wr.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:ci(hi(Or.getDefaults(),Object.keys(wr.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:ci(hi(Or.getDefaults(),Object.keys(wr.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(t,e){this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class Rr extends kr{constructor(){const t=li(Rr.getDefaults(),arguments);super(t),this.name="FMSynth",this.modulationIndex=new Xo({context:this.context,value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(kr.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const Nr=[1,1.483,1.932,2.546,2.63,3.897];class qr extends wr{constructor(){const t=li(qr.getDefaults(),arguments);super(t),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new uo({context:this.context,units:"cents",value:t.detune}),this.frequency=new uo({context:this.context,units:"frequency"}),this._amplitude=new ao({context:this.context,gain:0}).connect(this.output),this._highpass=new Ar({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let e=0;e<Nr.length;e++){const n=new Zo({context:this.context,harmonicity:t.harmonicity,modulationIndex:t.modulationIndex,modulationType:"square",onstop:0===e?()=>this.onsilence(this):Mi,type:"square"});n.connect(this._highpass),this._oscillators[e]=n;const s=new Xo({context:this.context,value:Nr[e]});this._freqMultipliers[e]=s,this.frequency.chain(s,n.frequency),this.detune.connect(n.detune)}this._filterFreqScaler=new sr({context:this.context,max:7e3,min:this.toFrequency(t.resonance)}),this.envelope=new yr({attack:t.envelope.attack,attackCurve:"linear",context:this.context,decay:t.envelope.decay,release:t.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=t.octaves,this.octaves=t.octaves}static getDefaults(){return ci(wr.getDefaults(),{envelope:Object.assign(hi(yr.getDefaults(),Object.keys(no.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(t,e=1){return this.envelope.triggerAttack(t,e),this._oscillators.forEach((e=>e.start(t))),0===this.envelope.sustain&&this._oscillators.forEach((e=>{e.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))})),this}_triggerEnvelopeRelease(t){return this.envelope.triggerRelease(t),this._oscillators.forEach((e=>e.stop(t+this.toSeconds(this.envelope.release)))),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(t){this._oscillators.forEach((e=>e.modulationIndex.value=t))}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(t){this._oscillators.forEach((e=>e.harmonicity.value=t))}get resonance(){return this._filterFreqScaler.min}set resonance(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}dispose(){return super.dispose(),this._oscillators.forEach((t=>t.dispose())),this._freqMultipliers.forEach((t=>t.dispose())),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class Ir extends Sr{constructor(){const t=li(Ir.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,Di(this,["oscillator","envelope"])}static getDefaults(){return ci(wr.getDefaults(),Sr.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const n=this.toSeconds(e),s=this.toFrequency(t instanceof Gi?t.toFrequency():t),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(s,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ti([rr(0)],Ir.prototype,"octaves",void 0),ti([ar(0)],Ir.prototype,"pitchDecay",void 0);class Pr extends br{constructor(){const t=li(Pr.getDefaults(),arguments);super(t),this.name="NoiseSynth",this.noise=new jo(Object.assign({context:this.context},t.noise)),this.envelope=new Tr(Object.assign({context:this.context},t.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(br.getDefaults(),{envelope:Object.assign(hi(yr.getDefaults(),Object.keys(no.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(hi(jo.getDefaults(),Object.keys(Fo.getDefaults())),{type:"white"})})}triggerAttack(t,e=1){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.noise.start(t),0===this.envelope.sustain&&this.noise.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.noise.stop(t+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const Fr=new Set;function Vr(t){Fr.add(t)}function jr(t,e){const n=`registerProcessor("${t}", ${e})`;Fr.add(n)}class Lr extends no{constructor(t){super(t),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=Mi;const e=URL.createObjectURL(new Blob([Array.from(Fr).join("\n")],{type:"text/javascript"})),n=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(e).then((()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(n,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))}))}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}Vr('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),Vr("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),Vr("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");const Yr="feedback-comb-filter";jr(Yr,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class Wr extends Lr{constructor(){const t=li(Wr.getDefaults(),arguments,["delayTime","resonance"]);super(t),this.name="FeedbackCombFilter",this.input=new ao({context:this.context}),this.output=new ao({context:this.context}),this.delayTime=new eo({context:this.context,value:t.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new eo({context:this.context,value:t.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),Di(this,["resonance","delayTime"])}_audioWorkletName(){return Yr}static getDefaults(){return Object.assign(no.getDefaults(),{delayTime:.1,resonance:.5})}onReady(t){so(this.input,t,this.output);const e=t.parameters.get("delayTime");this.delayTime.setParam(e);const n=t.parameters.get("feedback");this.resonance.setParam(n)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class zr extends no{constructor(){const t=li(zr.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OnePoleFilter",this._frequency=t.frequency,this._type=t.type,this.input=new ao({context:this.context}),this.output=new ao({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(no.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const t=this._filter,e=this.toFrequency(this._frequency),n=1/(2*Math.PI*e);if("lowpass"===this._type){const t=1/(n*this.context.sampleRate),e=t-1;this._filter=this.context.createIIRFilter([t,0],[1,e])}else{const t=1/(n*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,t])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout((()=>{this.disposed||(this.input.disconnect(t),t.disconnect())}),this.blockTime)}get frequency(){return this._frequency}set frequency(t){this._frequency=t,this._createFilter()}get type(){return this._type}set type(t){this._type=t,this._createFilter()}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let n=0;n<t;n++){const s=19980*Math.pow(n/t,2)+20;e[n]=s}const n=new Float32Array(t),s=new Float32Array(t);return this._filter.getFrequencyResponse(e,n,s),n}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class Hr extends no{constructor(){const t=li(Hr.getDefaults(),arguments,["delayTime","resonance","dampening"]);super(t),this.name="LowpassCombFilter",this._combFilter=this.output=new Wr({context:this.context,delayTime:t.delayTime,resonance:t.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new zr({context:this.context,frequency:t.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(no.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(t){this._lowpass.frequency=t}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class Br extends br{constructor(){const t=li(Br.getDefaults(),arguments);super(t),this.name="PluckSynth",this._noise=new jo({context:this.context,type:"pink"}),this.attackNoise=t.attackNoise,this._lfcf=new Hr({context:this.context,dampening:t.dampening,resonance:t.resonance}),this.resonance=t.resonance,this.release=t.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return ci(br.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(t){this._lfcf.dampening=t}triggerAttack(t,e){const n=this.toFrequency(t);e=this.toSeconds(e);const s=1/n;return this._lfcf.delayTime.setValueAtTime(s,e),this._noise.start(e),this._noise.stop(e+s*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this}triggerRelease(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class Ur extends br{constructor(){const t=li(Ur.getDefaults(),arguments,["voice","options"]);super(t),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=t=>this.releaseAll(t),Ys(!Is(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const e=t.voice.getDefaults();this.options=Object.assign(e,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(br.getDefaults(),{maxPolyphony:32,options:{},voice:Sr})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);const e=this._activeVoices.findIndex((e=>e.voice===t));this._activeVoices.splice(e,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Ys(t instanceof wr,"Voice must extend Monophonic class"),t.connect(this.output),this._voices.push(t),t}Qs("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,e,n){t.forEach((t=>{const s=new To(this.context,t).toMidi(),i=this._getNextAvailableVoice();i&&(i.triggerAttack(t,e,n),this._activeVoices.push({midi:s,voice:i,released:!1}),this.log("triggerAttack",t,e))}))}_triggerRelease(t,e){t.forEach((t=>{const n=new To(this.context,t).toMidi(),s=this._activeVoices.find((({midi:t,released:e})=>t===n&&!e));s&&(s.voice.triggerRelease(e),s.released=!0,this.log("triggerRelease",t,e))}))}_scheduleEvent(t,e,n,s){Ys(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===t?this._triggerAttack(e,n,s):this._triggerRelease(e,n):this.context.setTimeout((()=>{this.disposed||this._scheduleEvent(t,e,n,s)}),n-this.now())}triggerAttack(t,e,n){Array.isArray(t)||(t=[t]);const s=this.toSeconds(e);return this._scheduleEvent("attack",t,s,n),this}triggerRelease(t,e){Array.isArray(t)||(t=[t]);const n=this.toSeconds(e);return this._scheduleEvent("release",t,n),this}triggerAttackRelease(t,e,n,s){const i=this.toSeconds(n);if(this.triggerAttack(t,i,s),Vs(e)){Ys(Vs(t),"If the duration is an array, the notes must also be an array");for(let n=0;n<t.length;n++){const s=e[Math.min(n,e.length-1)],o=this.toSeconds(s);Ys(o>0,"The duration must be greater than 0"),this.triggerRelease(t[n],i+o)}}else{const n=this.toSeconds(e);Ys(n>0,"The duration must be greater than 0"),this.triggerRelease(t,i+n)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(t){const e=hi(t,["onsilence","context"]);return this.options=ci(this.options,e),this._voices.forEach((t=>t.set(e))),this._dummyVoice.set(e),this}get(){return this._dummyVoice.get()}releaseAll(t){const e=this.toSeconds(t);return this._activeVoices.forEach((({voice:t})=>{t.triggerRelease(e)})),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach((t=>t.dispose())),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Gr extends br{constructor(){const t=li(Gr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;const e={};Object.keys(t.urls).forEach((n=>{const s=parseInt(n,10);if(Ys(Ls(n)||Is(s)&&isFinite(s),`url key is neither a note or midi pitch: ${n}`),Ls(n)){const s=new Gi(this.context,n).toMidi();e[s]=t.urls[n]}else Is(s)&&isFinite(s)&&(e[s]=t.urls[s])})),this._buffers=new wo({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(br.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Mi,onerror:Mi,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,n=1){return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach((t=>{const s=Wi(new Gi(this.context,t).toFrequency()),i=Math.round(s),o=s-i,r=this._findClosest(i),a=i-r,c=this._buffers.get(a),l=ji(r+o),u=new Vo({url:c,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:l}).connect(this.output);u.start(e,0,c.duration/l,n),Vs(this._activeSources.get(i))||this._activeSources.set(i,[]),this._activeSources.get(i).push(u),u.onended=()=>{if(this._activeSources&&this._activeSources.has(i)){const t=this._activeSources.get(i),e=t.indexOf(u);-1!==e&&t.splice(e,1)}}})),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach((t=>{const n=new Gi(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach((t=>{t.stop(e)})),this._activeSources.set(n,[])}})),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach((t=>{for(;t.length;)t.shift().stop(e)})),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n,s=1){const i=this.toSeconds(n);return this.triggerAttack(t,i,s),Vs(e)?(Ys(Vs(t),"notes must be an array when duration is array"),t.forEach(((t,n)=>{const s=e[Math.min(n,e.length-1)];this.triggerRelease(t,i+this.toSeconds(s))}))):this.triggerRelease(t,i+this.toSeconds(e)),this}add(t,e,n){if(Ys(Ls(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Ls(t)){const s=new Gi(this.context,t).toMidi();this._buffers.add(s,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach((t=>{t.forEach((t=>t.dispose()))})),this._activeSources.clear(),this}}ti([ar(0)],Gr.prototype,"attack",void 0),ti([ar(0)],Gr.prototype,"release",void 0);class Xr extends Ki{constructor(){const t=li(Xr.getDefaults(),arguments,["callback","value"]);super(t),this.name="ToneEvent",this._state=new to("stopped"),this._startOffset=0,this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Ki.getDefaults(),{callback:Mi,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,(t=>{let e;if("started"===t.state){-1!==t.id&&this.context.transport.clear(t.id);const n=t.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||Is(this._loop)&&this._loop>1){e=1/0,Is(this._loop)&&(e=this._loop*this._getLoopDuration());const s=this._state.getAfter(n);null!==s&&(e=Math.min(e,s.time-n)),e!==1/0&&(e=new ko(this.context,e));const i=new ko(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),i,new ko(this.context,n),e)}else t.id=this.context.transport.schedule(this._tick.bind(this),new ko(this.context,n))}}))}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});const t=this._state.getBefore(e);let n=e;null!==t&&(n=t.time),this._rescheduleEvents(n)}return this}cancel(t){t=ui(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,(t=>{this.context.transport.clear(t.id)})),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let e=.02;Fs(this.humanize)||(e=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*e}this.callback(t,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new ko(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new ko(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){const n=this._getLoopDuration();return(t-e.time)%n/n}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class $r extends Ki{constructor(){const t=li($r.getDefaults(),arguments,["callback","interval"]);super(t),this.name="Loop",this._event=new Xr({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability,humanize:t.humanize}),this.callback=t.callback,this.iterations=t.iterations}static getDefaults(){return Object.assign(Ki.getDefaults(),{interval:"4n",callback:Mi,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(t){return this._event.start(t),this}stop(t){return this._event.stop(t),this}cancel(t){return this._event.cancel(t),this}_tick(t){this.callback(t)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}get probability(){return this._event.probability}set probability(t){this._event.probability=t}get mute(){return this._event.mute}set mute(t){this._event.mute=t}get iterations(){return!0===this._event.loop?1/0:this._event.loop}set iterations(t){this._event.loop=t===1/0||t}dispose(){return super.dispose(),this._event.dispose(),this}}class Zr extends Xr{constructor(){const t=li(Zr.getDefaults(),arguments,["callback","events"]);super(t),this.name="Part",this._state=new to("stopped"),this._events=new Set,this._state.increasing=!0,t.events.forEach((t=>{Vs(t)?this.add(t[0],t[1]):this.add(t)}))}static getDefaults(){return Object.assign(Xr.getDefaults(),{events:[]})}start(t,e){const n=this.toTicks(t);if("started"!==this._state.getValueAtTime(n)){e=ui(e,this._loop?this._loopStart:0),e=this._loop?ui(e,this._loopStart):ui(e,0);const t=this.toTicks(e);this._state.add({id:-1,offset:t,state:"started",time:n}),this._forEach((e=>{this._startNote(e,n,t)}))}return this}_startNote(t,e,n){e-=n,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<n&&(e+=this._getLoopDuration()),t.start(new ko(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=n&&(t.loop=!1,t.start(new ko(this.context,e))):t.startOffset>=n&&t.start(new ko(this.context,e))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach((t=>{t.startOffset+=this._startOffset}))}stop(t){const e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach((e=>{e.stop(t)})),this}at(t,e){const n=new Qi(this.context,t).toTicks(),s=new ko(this.context,1).toSeconds(),i=this._events.values();let o=i.next();for(;!o.done;){const t=o.value;if(Math.abs(n-t.startOffset)<s)return Ns(e)&&(t.value=e),t;o=i.next()}return Ns(e)?(this.add(t,e),this.at(t)):null}add(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);const n=this.toTicks(t);let s;return e instanceof Xr?(s=e,s.callback=this._tick.bind(this)):s=new Xr({callback:this._tick.bind(this),context:this.context,value:e}),s.startOffset=n,s.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(s),this._restartEvent(s),this}_restartEvent(t){this._state.forEach((e=>{"started"===e.state?this._startNote(t,e.time,e.offset):t.stop(new ko(this.context,e.time))}))}remove(t,e){return Ps(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach((n=>{n.startOffset===t&&(Rs(e)||Ns(e)&&n.value===e)&&(this._events.delete(n),n.dispose())})),this}clear(){return this._forEach((t=>t.dispose())),this._events.clear(),this}cancel(t){return this._forEach((e=>e.cancel(t))),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach((e=>{e instanceof Zr?e._forEach(t):t(e)})),this}_setAll(t,e){this._forEach((n=>{n[t]=e}))}_tick(t,e){this.mute||this.callback(t,e)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach((e=>{e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.loop=t,this._testLoopBoundries(e)}))}get loopEnd(){return new ko(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach((e=>{e.loopEnd=t,this._testLoopBoundries(e)}))}get loopStart(){return new ko(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach((t=>{t.loopStart=this.loopStart,this._testLoopBoundries(t)}))}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*Qr(t){let e=0;for(;e<t;)e=vi(e,0,t-1),yield e,e++}function*Jr(t){let e=t-1;for(;e>=0;)e=vi(e,0,t-1),yield e,e--}function*Kr(t,e){for(;;)yield*e(t)}function*ta(t,e){let n=e?0:t-1;for(;;)n=vi(n,0,t-1),yield n,e?(n++,n>=t-1&&(e=!1)):(n--,n<=0&&(e=!0))}function*ea(t){let e=0,n=0;for(;e<t;)e=vi(e,0,t-1),yield e,n++,e+=n%2?2:-1}function*na(t){let e=t-1,n=0;for(;e>=0;)e=vi(e,0,t-1),yield e,n++,e+=n%2?-2:1}function*sa(t){const e=[];for(let n=0;n<t;n++)e.push(n);for(;e.length>0;){const n=vi(e.splice(Math.floor(e.length*Math.random()),1)[0],0,t-1);yield n}}function*ia(t,e="up",n=0){switch(Ys(t>=1,"The number of values must be at least one"),e){case"up":yield*Kr(t,Qr);case"down":yield*Kr(t,Jr);case"upDown":yield*ta(t,!0);case"downUp":yield*ta(t,!1);case"alternateUp":yield*Kr(t,ea);case"alternateDown":yield*Kr(t,na);case"random":yield*function*(t){for(;;){const e=Math.floor(Math.random()*t);yield e}}(t);case"randomOnce":yield*Kr(t,sa);case"randomWalk":yield*function*(t){let e=Math.floor(Math.random()*t);for(;;)0===e?e++:e===t-1||Math.random()<.5?e--:e++,yield e}(t)}}class oa extends $r{constructor(){const t=li(oa.getDefaults(),arguments,["callback","values","pattern"]);super(t),this.name="Pattern",this.callback=t.callback,this._values=t.values,this._pattern=ia(t.values.length,t.pattern),this._type=t.pattern}static getDefaults(){return Object.assign($r.getDefaults(),{pattern:"up",values:[],callback:Mi})}_tick(t){const e=this._pattern.next();this._index=e.value,this._value=this._values[e.value],this.callback(t,this._value)}get values(){return this._values}set values(t){this._values=t,this.pattern=this._type}get value(){return this._value}get index(){return this._index}get pattern(){return this._type}set pattern(t){this._type=t,this._pattern=ia(this._values.length,this._type)}}class ra extends Xr{constructor(){const t=li(ra.getDefaults(),arguments,["callback","events","subdivision"]);super(t),this.name="Sequence",this._part=new Zr({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[],this._subdivision=this.toTicks(t.subdivision),this.events=t.events,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.playbackRate=t.playbackRate,this.probability=t.probability,this.humanize=t.humanize,this.mute=t.mute,this.playbackRate=t.playbackRate}static getDefaults(){return Object.assign(hi(Xr.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(t,e){null===e||this.mute||this.callback(t,e)}get events(){return this._events}set events(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(t,e){return this._part.start(t,e?this._indexTime(e):e),this}stop(t){return this._part.stop(t),this}get subdivision(){return new ko(this.context,this._subdivision).toSeconds()}_createSequence(t){return new Proxy(t,{get:(t,e)=>t[e],set:(t,e,n)=>(js(e)&&isFinite(parseInt(e,10))&&Vs(n)?t[e]=this._createSequence(n):t[e]=n,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(t,e,n){t.forEach(((t,s)=>{const i=s*e+n;if(Vs(t))this._rescheduleSequence(t,e/t.length,i);else{const e=new ko(this.context,i,"i").toSeconds();this._part.add(e,t)}}))}_indexTime(t){return new ko(this.context,t*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(t){this._part.loop=t}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this._part.loopStart=this._indexTime(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this._part.loopEnd=0===t?this._indexTime(this._eventsArray.length):this._indexTime(t)}get startOffset(){return this._part.startOffset}set startOffset(t){this._part.startOffset=t}get playbackRate(){return this._part.playbackRate}set playbackRate(t){this._part.playbackRate=t}get probability(){return this._part.probability}set probability(t){this._part.probability=t}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(t){this._part.humanize=t}get length(){return this._part.length}}class aa extends no{constructor(){const t=li(aa.getDefaults(),arguments,["fade"]);super(t),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new dr({context:this.context}),this.a=new ao({context:this.context,gain:0}),this.b=new ao({context:this.context,gain:0}),this.output=new ao({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new uo({context:this.context,units:"normalRange",value:t.fade}),Di(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",io(this._split,this.a.gain,0),io(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(no.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class ca extends no{constructor(t){super(t),this.name="Effect",this._dryWet=new aa({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new ao({context:this.context}),this.effectReturn=new ao({context:this.context}),this.input=new ao({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Di(this,"wet")}static getDefaults(){return Object.assign(no.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class la extends ca{constructor(t){super(t),this.name="LFOEffect",this._lfo=new or({context:this.context,frequency:t.frequency,amplitude:t.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=t.type,Di(this,["frequency","depth"])}static getDefaults(){return Object.assign(ca.getDefaults(),{frequency:1,type:"sine",depth:1})}start(t){return this._lfo.start(t),this}stop(t){return this._lfo.stop(t),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class ua extends la{constructor(){const t=li(ua.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);super(t),this.name="AutoFilter",this.filter=new Ar(Object.assign(t.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=t.octaves,this.baseFrequency=t.baseFrequency}static getDefaults(){return Object.assign(la.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._lfo.max=this._lfo.min*Math.pow(2,t)}dispose(){return super.dispose(),this.filter.dispose(),this}}class ha extends no{constructor(){const t=li(ha.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new eo({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",Di(this,"pan")}static getDefaults(){return Object.assign(no.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class da extends la{constructor(){const t=li(da.getDefaults(),arguments,["frequency"]);super(t),this.name="AutoPanner",this._panner=new ha({context:this.context,channelCount:t.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(la.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class pa extends no{constructor(){const t=li(pa.getDefaults(),arguments,["smoothing"]);super(t),this.name="Follower",this._abs=this.input=new hr({context:this.context}),this._lowpass=this.output=new zr({context:this.context,frequency:1/this.toSeconds(t.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=t.smoothing}static getDefaults(){return Object.assign(no.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(t){this._smoothing=t,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class fa extends ca{constructor(){const t=li(fa.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);super(t),this.name="AutoWah",this._follower=new pa({context:this.context,smoothing:t.follower}),this._sweepRange=new _r({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this._inputBoost=new ao({context:this.context}),this._bandpass=new Ar({context:this.context,rolloff:-48,frequency:0,Q:t.Q}),this._peaking=new Ar({context:this.context,type:"peaking"}),this._peaking.gain.value=t.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=t.sensitivity,Di(this,["gain","Q"])}static getDefaults(){return Object.assign(ca.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(t){this._follower.smoothing=t}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._setSweepRange()}get sensitivity(){return Vi(1/this._inputBoost.gain.value)}set sensitivity(t){this._inputBoost.gain.value=1/Fi(t)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const ma="bit-crusher";jr(ma,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class ga extends ca{constructor(){const t=li(ga.getDefaults(),arguments,["bits"]);super(t),this.name="BitCrusher",this._bitCrusherWorklet=new _a({context:this.context,bits:t.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(ca.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class _a extends Lr{constructor(){const t=li(_a.getDefaults(),arguments);super(t),this.name="BitCrusherWorklet",this.input=new ao({context:this.context}),this.output=new ao({context:this.context}),this.bits=new eo({context:this.context,value:t.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(Lr.getDefaults(),{bits:12})}_audioWorkletName(){return ma}onReady(t){so(this.input,t,this.output);const e=t.parameters.get("bits");this.bits.setParam(e)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class va extends ca{constructor(){const t=li(va.getDefaults(),arguments,["order"]);super(t),this.name="Chebyshev",this._shaper=new Ro({context:this.context,length:4096}),this._order=t.order,this.connectEffect(this._shaper),this.order=t.order,this.oversample=t.oversample}static getDefaults(){return Object.assign(ca.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(t,e,n){return n.has(e)||(0===e?n.set(e,0):1===e?n.set(e,t):n.set(e,2*t*this._getCoefficient(t,e-1,n)-this._getCoefficient(t,e-2,n))),n.get(e)}get order(){return this._order}set order(t){Ys(Number.isInteger(t),"'order' must be an integer"),this._order=t,this._shaper.setMap((e=>this._getCoefficient(e,t,new Map)))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class ya extends no{constructor(){const t=li(ya.getDefaults(),arguments,["channels"]);super(t),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(no.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class xa extends no{constructor(){const t=li(xa.getDefaults(),arguments,["channels"]);super(t),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(no.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class ba extends no{constructor(t){super(t),this.name="StereoEffect",this.input=new ao({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new aa({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new ya({context:this.context,channels:2}),this._merge=new xa({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Di(this,["wet"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),so(...t),io(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),so(...t),io(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(no.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class wa extends ba{constructor(t){super(t),this.feedback=new uo({context:this.context,value:t.feedback,units:"normalRange"}),this._feedbackL=new ao({context:this.context}),this._feedbackR=new ao({context:this.context}),this._feedbackSplit=new ya({context:this.context,channels:2}),this._feedbackMerge=new xa({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Di(this,["feedback"])}static getDefaults(){return Object.assign(ba.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Ta extends wa{constructor(){const t=li(Ta.getDefaults(),arguments,["frequency","delayTime","depth"]);super(t),this.name="Chorus",this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new or({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new or({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new _o({context:this.context}),this._delayNodeR=new _o({context:this.context}),this.frequency=this._lfoL.frequency,Di(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(wa.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;const e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}get delayTime(){return 1e3*this._delayTime}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Sa extends ca{constructor(){const t=li(Sa.getDefaults(),arguments,["distortion"]);super(t),this.name="Distortion",this._shaper=new Ro({context:this.context,length:4096}),this._distortion=t.distortion,this.connectEffect(this._shaper),this.distortion=t.distortion,this.oversample=t.oversample}static getDefaults(){return Object.assign(ca.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(t){this._distortion=t;const e=100*t,n=Math.PI/180;this._shaper.setMap((t=>Math.abs(t)<.001?0:(3+e)*t*20*n/(Math.PI+e*Math.abs(t))))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class ka extends ca{constructor(t){super(t),this.name="FeedbackEffect",this._feedbackGain=new ao({context:this.context,gain:t.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,Di(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(ca.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Ca extends ka{constructor(){const t=li(Ca.getDefaults(),arguments,["delayTime","feedback"]);super(t),this.name="FeedbackDelay",this._delayNode=new _o({context:this.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),Di(this,"delayTime")}static getDefaults(){return Object.assign(ka.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class Da extends no{constructor(t){super(t),this.name="PhaseShiftAllpass",this.input=new ao({context:this.context}),this.output=new ao({context:this.context}),this.offset90=new ao({context:this.context}),this._bank0=this._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),this._bank1=this._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),so(this.input,...this._bank0,this._oneSampleDelay,this.output),so(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(t){return t.map((t=>{const e=[[t*t,0,-1],[1,0,-t*t]];return this.context.createIIRFilter(e[0],e[1])}))}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach((t=>t.disconnect())),this._bank1.forEach((t=>t.disconnect())),this._oneSampleDelay.disconnect(),this}}class Aa extends ca{constructor(){const t=li(Aa.getDefaults(),arguments,["frequency"]);super(t),this.name="FrequencyShifter",this.frequency=new uo({context:this.context,units:"frequency",value:t.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new Bo({context:this.context,type:"sine"}),this._cosine=new Uo({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new Xo({context:this.context}),this._cosineMultiply=new Xo({context:this.context}),this._negate=new pr({context:this.context}),this._add=new nr({context:this.context}),this._phaseShifter=new Da({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const e=this.immediate();this._sine.start(e),this._cosine.start(e)}static getDefaults(){return Object.assign(ca.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const Ma=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],Oa=[225,556,441,341];class Ea extends ba{constructor(){const t=li(Ea.getDefaults(),arguments,["roomSize","dampening"]);super(t),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[],this.roomSize=new uo({context:this.context,value:t.roomSize,units:"normalRange"}),this._allpassFiltersL=Oa.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._allpassFiltersR=Oa.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._combFilters=Ma.map(((e,n)=>{const s=new Hr({context:this.context,dampening:t.dampening,delayTime:e});return n<Ma.length/2?this.connectEffectLeft(s,...this._allpassFiltersL):this.connectEffectRight(s,...this._allpassFiltersR),this.roomSize.connect(s.resonance),s})),Di(this,["roomSize"])}static getDefaults(){return Object.assign(ba.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(t){this._combFilters.forEach((e=>e.dampening=t))}dispose(){return super.dispose(),this._allpassFiltersL.forEach((t=>t.disconnect())),this._allpassFiltersR.forEach((t=>t.disconnect())),this._combFilters.forEach((t=>t.dispose())),this.roomSize.dispose(),this}}const Ra=[.06748,.06404,.08212,.09004],Na=[.773,.802,.753,.733],qa=[347,113,37];class Ia extends ba{constructor(){const t=li(Ia.getDefaults(),arguments,["roomSize"]);super(t),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[],this.roomSize=new uo({context:this.context,value:t.roomSize,units:"normalRange"}),this._scaleRoomSize=new sr({context:this.context,min:-.733,max:.197}),this._allpassFilters=qa.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._feedbackCombFilters=Ra.map(((t,e)=>{const n=new Wr({context:this.context,delayTime:t});return this._scaleRoomSize.connect(n.resonance),n.resonance.value=Na[e],e<Ra.length/2?this.connectEffectLeft(...this._allpassFilters,n):this.connectEffectRight(...this._allpassFilters,n),n})),this.roomSize.connect(this._scaleRoomSize),Di(this,["roomSize"])}static getDefaults(){return Object.assign(ba.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach((t=>t.disconnect())),this._feedbackCombFilters.forEach((t=>t.dispose())),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class Pa extends wa{constructor(t){super(t),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),Di(this,["feedback"])}}class Fa extends Pa{constructor(){const t=li(Fa.getDefaults(),arguments,["delayTime","feedback"]);super(t),this.name="PingPongDelay",this._leftDelay=new _o({context:this.context,maxDelay:t.maxDelay}),this._rightDelay=new _o({context:this.context,maxDelay:t.maxDelay}),this._rightPreDelay=new _o({context:this.context,maxDelay:t.maxDelay}),this.delayTime=new uo({context:this.context,units:"time",value:t.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),Di(this,["delayTime"])}static getDefaults(){return Object.assign(Pa.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class Va extends ka{constructor(){const t=li(Va.getDefaults(),arguments,["pitch"]);super(t),this.name="PitchShift",this._frequency=new uo({context:this.context}),this._delayA=new _o({maxDelay:1,context:this.context}),this._lfoA=new or({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new _o({maxDelay:1,context:this.context}),this._lfoB=new or({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new aa({context:this.context}),this._crossFadeLFO=new or({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new _o({delayTime:t.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,Di(this,"delayTime"),this._pitch=t.pitch,this._windowSize=t.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const e=this.now();this._lfoA.start(e),this._lfoB.start(e),this._crossFadeLFO.start(e),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(ka.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(t){this._pitch=t;let e=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=ji(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=ji(t)-1),this._frequency.value=e*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class ja extends ba{constructor(){const t=li(ja.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);super(t),this.name="Phaser",this._lfoL=new or({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new or({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this.Q=new uo({context:this.context,value:t.Q,units:"positive"}),this._filtersL=this._makeFilters(t.stages,this._lfoL),this._filtersR=this._makeFilters(t.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=t.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=t.baseFrequency,this.octaves=t.octaves,this._lfoL.start(),this._lfoR.start(),Di(this,["frequency","Q"])}static getDefaults(){return Object.assign(ba.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(t,e){const n=[];for(let s=0;s<t;s++){const t=this.context.createBiquadFilter();t.type="allpass",this.Q.connect(t.Q),e.connect(t.frequency),n.push(t)}return n}get octaves(){return this._octaves}set octaves(t){this._octaves=t;const e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach((t=>t.disconnect())),this._filtersR.forEach((t=>t.disconnect())),this.frequency.dispose(),this}}class La extends ca{constructor(){const t=li(La.getDefaults(),arguments,["decay"]);super(t),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve(),this._decay=t.decay,this._preDelay=t.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(ca.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){Ws(t=this.toSeconds(t),.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){Ws(t=this.toSeconds(t),0),this._preDelay=t,this.generate()}generate(){return ei(this,void 0,void 0,(function*(){const t=this.ready,e=new Ei(2,this._decay+this._preDelay,this.context.sampleRate),n=new jo({context:e}),s=new jo({context:e}),i=new xa({context:e});n.connect(i,0,0),s.connect(i,0,1);const o=new ao({context:e}).toDestination();i.connect(o),n.start(0),s.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const r=e.render();return this.ready=r.then(Mi),yield t,this._convolver.buffer=(yield r).get(),this}))}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Ya extends no{constructor(){super(li(Ya.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new ya({channels:2,context:this.context}),this._midAdd=new nr({context:this.context}),this.mid=new Xo({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new fr({context:this.context}),this.side=new Xo({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class Wa extends no{constructor(){super(li(Wa.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new ao({context:this.context}),this.side=new ao({context:this.context}),this._left=new nr({context:this.context}),this._leftMult=new Xo({context:this.context,value:Math.SQRT1_2}),this._right=new fr({context:this.context}),this._rightMult=new Xo({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new xa({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class za extends ca{constructor(t){super(t),this.name="MidSideEffect",this._midSideMerge=new Wa({context:this.context}),this._midSideSplit=new Ya({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...t){this._midSend.chain(...t,this._midReturn)}connectEffectSide(...t){this._sideSend.chain(...t,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class Ha extends za{constructor(){const t=li(Ha.getDefaults(),arguments,["width"]);super(t),this.name="StereoWidener",this.width=new uo({context:this.context,value:t.width,units:"normalRange"}),Di(this,["width"]),this._twoTimesWidthMid=new Xo({context:this.context,value:2}),this._twoTimesWidthSide=new Xo({context:this.context,value:2}),this._midMult=new Xo({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new fr({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),io(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new Xo({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(za.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class Ba extends ba{constructor(){const t=li(Ba.getDefaults(),arguments,["frequency","depth"]);super(t),this.name="Tremolo",this._lfoL=new or({context:this.context,type:t.type,min:1,max:0}),this._lfoR=new or({context:this.context,type:t.type,min:1,max:0}),this._amplitudeL=new ao({context:this.context}),this._amplitudeR=new ao({context:this.context}),this.frequency=new uo({context:this.context,value:t.frequency,units:"frequency"}),this.depth=new uo({context:this.context,value:t.depth,units:"normalRange"}),Di(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=t.spread}static getDefaults(){return Object.assign(ba.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Ua extends ca{constructor(){const t=li(Ua.getDefaults(),arguments,["frequency","depth"]);super(t),this.name="Vibrato",this._delayNode=new _o({context:this.context,delayTime:0,maxDelay:t.maxDelay}),this._lfo=new or({context:this.context,type:t.type,min:0,max:t.maxDelay,frequency:t.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=t.depth,Di(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(ca.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Ga extends no{constructor(){const t=li(Ga.getDefaults(),arguments,["type","size"]);super(t),this.name="Analyser",this._analysers=[],this._buffers=[],this.input=this.output=this._gain=new ao({context:this.context}),this._split=new ya({context:this.context,channels:t.channels}),this.input.connect(this._split),Ws(t.channels,1);for(let e=0;e<t.channels;e++)this._analysers[e]=this.context.createAnalyser(),this._split.connect(this._analysers[e],e,0);this.size=t.size,this.type=t.type,this.smoothing=t.smoothing}static getDefaults(){return Object.assign(no.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach(((t,e)=>{const n=this._buffers[e];"fft"===this._type?t.getFloatFrequencyData(n):"waveform"===this._type&&t.getFloatTimeDomainData(n)})),1===this.channels?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(t){this._analysers.forEach(((e,n)=>{e.fftSize=2*t,this._buffers[n]=new Float32Array(t)}))}get channels(){return this._analysers.length}get type(){return this._type}set type(t){Ys("waveform"===t||"fft"===t,`Analyser: invalid type: ${t}`),this._type=t}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(t){this._analysers.forEach((e=>e.smoothingTimeConstant=t))}dispose(){return super.dispose(),this._analysers.forEach((t=>t.disconnect())),this._split.dispose(),this._gain.dispose(),this}}class Xa extends no{constructor(){super(li(Xa.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Ga({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class $a extends Xa{constructor(){const t=li($a.getDefaults(),arguments,["smoothing"]);super(t),this.name="Meter",this.input=this.output=this._analyser=new Ga({context:this.context,size:256,type:"waveform",channels:t.channelCount}),this.smoothing=t.smoothing,this.normalRange=t.normalRange,this._rms=new Array(t.channelCount),this._rms.fill(0)}static getDefaults(){return Object.assign(Xa.getDefaults(),{smoothing:.8,normalRange:!1,channelCount:1})}getLevel(){return Qs("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const t=this._analyser.getValue(),e=(1===this.channels?[t]:t).map(((t,e)=>{const n=t.reduce(((t,e)=>t+e*e),0),s=Math.sqrt(n/t.length);return this._rms[e]=Math.max(s,this._rms[e]*this.smoothing),this.normalRange?this._rms[e]:Vi(this._rms[e])}));return 1===this.channels?e[0]:e}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Za extends Xa{constructor(){const t=li(Za.getDefaults(),arguments,["size"]);super(t),this.name="FFT",this.normalRange=t.normalRange,this._analyser.type="fft",this.size=t.size}static getDefaults(){return Object.assign(no.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map((t=>this.normalRange?Fi(t):t))}get size(){return this._analyser.size}set size(t){this._analyser.size=t}get smoothing(){return this._analyser.smoothing}set smoothing(t){this._analyser.smoothing=t}getFrequencyOfIndex(t){return Ys(0<=t&&t<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),t*this.context.sampleRate/(2*this.size)}}class Qa extends Xa{constructor(){super(li(Qa.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class Ja extends Xa{constructor(){const t=li(Ja.getDefaults(),arguments,["size"]);super(t),this.name="Waveform",this._analyser.type="waveform",this.size=t.size}static getDefaults(){return Object.assign(Xa.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(t){this._analyser.size=t}}class Ka extends no{constructor(){const t=li(Ka.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new ao({context:this.context}),Ka._allSolos.has(this.context)||Ka._allSolos.set(this.context,new Set),Ka._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(no.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Ka._allSolos.get(this.context).forEach((t=>t._updateSolo()))}get muted(){return 0===this.input.gain.value}_addSolo(){Ka._soloed.has(this.context)||Ka._soloed.set(this.context,new Set),Ka._soloed.get(this.context).add(this)}_removeSolo(){Ka._soloed.has(this.context)&&Ka._soloed.get(this.context).delete(this)}_isSoloed(){return Ka._soloed.has(this.context)&&Ka._soloed.get(this.context).has(this)}_noSolos(){return!Ka._soloed.has(this.context)||Ka._soloed.has(this.context)&&0===Ka._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Ka._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Ka._allSolos=new Map,Ka._soloed=new Map;class tc extends no{constructor(){const t=li(tc.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new ha({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new vo({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Di(this,["pan","volume"])}static getDefaults(){return Object.assign(no.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ec extends no{constructor(){const t=li(ec.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new Ka({solo:t.solo,context:this.context}),this._panVol=this.output=new tc({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Di(this,["pan","volume"])}static getDefaults(){return Object.assign(no.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return ec.buses.has(t)||ec.buses.set(t,new ao({context:this.context})),ec.buses.get(t)}send(t,e=0){const n=this._getBus(t),s=new ao({context:this.context,units:"decibels",gain:e});return this.connect(s),s.connect(n),s}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ec.buses=new Map;class nc extends no{constructor(){super(li(nc.getDefaults(),arguments)),this.name="Mono",this.input=new ao({context:this.context}),this._merge=this.output=new xa({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class sc extends no{constructor(){const t=li(sc.getDefaults(),arguments,["lowFrequency","highFrequency"]);super(t),this.name="MultibandSplit",this.input=new ao({context:this.context}),this.output=void 0,this.low=new Ar({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Ar({context:this.context,frequency:0,type:"highpass"}),this.mid=new Ar({context:this.context,frequency:0,type:"lowpass"}),this.high=new Ar({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high],this.lowFrequency=new uo({context:this.context,units:"frequency",value:t.lowFrequency}),this.highFrequency=new uo({context:this.context,units:"frequency",value:t.highFrequency}),this.Q=new uo({context:this.context,units:"positive",value:t.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),Di(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(no.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),Ai(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class ic extends no{constructor(){const t=li(ic.getDefaults(),arguments,["positionX","positionY","positionZ"]);super(t),this.name="Panner3D",this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=t.panningModel,this.maxDistance=t.maxDistance,this.distanceModel=t.distanceModel,this.coneOuterGain=t.coneOuterGain,this.coneOuterAngle=t.coneOuterAngle,this.coneInnerAngle=t.coneInnerAngle,this.refDistance=t.refDistance,this.rolloffFactor=t.rolloffFactor,this.positionX=new eo({context:this.context,param:this._panner.positionX,value:t.positionX}),this.positionY=new eo({context:this.context,param:this._panner.positionY,value:t.positionY}),this.positionZ=new eo({context:this.context,param:this._panner.positionZ,value:t.positionZ}),this.orientationX=new eo({context:this.context,param:this._panner.orientationX,value:t.orientationX}),this.orientationY=new eo({context:this.context,param:this._panner.orientationY,value:t.orientationY}),this.orientationZ=new eo({context:this.context,param:this._panner.orientationZ,value:t.orientationZ})}static getDefaults(){return Object.assign(no.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(t,e,n){return this.positionX.value=t,this.positionY.value=e,this.positionZ.value=n,this}setOrientation(t,e,n){return this.orientationX.value=t,this.orientationY.value=e,this.orientationZ.value=n,this}get panningModel(){return this._panner.panningModel}set panningModel(t){this._panner.panningModel=t}get refDistance(){return this._panner.refDistance}set refDistance(t){this._panner.refDistance=t}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(t){this._panner.rolloffFactor=t}get distanceModel(){return this._panner.distanceModel}set distanceModel(t){this._panner.distanceModel=t}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(t){this._panner.coneInnerAngle=t}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(t){this._panner.coneOuterAngle=t}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(t){this._panner.coneOuterGain=t}get maxDistance(){return this._panner.maxDistance}set maxDistance(t){this._panner.maxDistance=t}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class oc extends no{constructor(){const t=li(oc.getDefaults(),arguments);super(t),this.name="Recorder",this.input=new ao({context:this.context}),Ys(oc.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:t.mimeType})}static getDefaults(){return no.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return null!==Js&&Reflect.has(Js,"MediaRecorder")}get state(){return"inactive"===this._recorder.state?"stopped":"paused"===this._recorder.state?"paused":"started"}start(){return ei(this,void 0,void 0,(function*(){Ys("started"!==this.state,"Recorder is already started");const t=new Promise((t=>{const e=()=>{this._recorder.removeEventListener("start",e,!1),t()};this._recorder.addEventListener("start",e,!1)}));return this._recorder.start(),yield t}))}stop(){return ei(this,void 0,void 0,(function*(){Ys("stopped"!==this.state,"Recorder is not started");const t=new Promise((t=>{const e=n=>{this._recorder.removeEventListener("dataavailable",e,!1),t(n.data)};this._recorder.addEventListener("dataavailable",e,!1)}));return this._recorder.stop(),yield t}))}pause(){return Ys("started"===this.state,"Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class rc extends no{constructor(){const t=li(rc.getDefaults(),arguments,["threshold","ratio"]);super(t),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor,this.threshold=new eo({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:t.threshold}),this.attack=new eo({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:t.attack}),this.release=new eo({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:t.release}),this.knee=new eo({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:t.knee}),this.ratio=new eo({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:t.ratio}),Di(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(no.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class ac extends no{constructor(){const t=li(ac.getDefaults(),arguments,["threshold","smoothing"]);super(t),this.name="Gate",this._follower=new pa({context:this.context,smoothing:t.smoothing}),this._gt=new gr({context:this.context,value:Fi(t.threshold)}),this.input=new ao({context:this.context}),this._gate=this.output=new ao({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(no.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return Vi(this._gt.value)}set threshold(t){this._gt.value=Fi(t)}get smoothing(){return this._follower.smoothing}set smoothing(t){this._follower.smoothing=t}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class cc extends no{constructor(){const t=li(cc.getDefaults(),arguments,["threshold"]);super(t),this.name="Limiter",this._compressor=this.input=this.output=new rc({context:this.context,ratio:20,attack:.003,release:.01,threshold:t.threshold}),this.threshold=this._compressor.threshold,Di(this,"threshold")}static getDefaults(){return Object.assign(no.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class lc extends no{constructor(){const t=li(lc.getDefaults(),arguments);super(t),this.name="MidSideCompressor",this._midSideSplit=this.input=new Ya({context:this.context}),this._midSideMerge=this.output=new Wa({context:this.context}),this.mid=new rc(Object.assign(t.mid,{context:this.context})),this.side=new rc(Object.assign(t.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),Di(this,["mid","side"])}static getDefaults(){return Object.assign(no.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class uc extends no{constructor(){const t=li(uc.getDefaults(),arguments);super(t),this.name="MultibandCompressor",this._splitter=this.input=new sc({context:this.context,lowFrequency:t.lowFrequency,highFrequency:t.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new ao({context:this.context}),this.low=new rc(Object.assign(t.low,{context:this.context})),this.mid=new rc(Object.assign(t.mid,{context:this.context})),this.high=new rc(Object.assign(t.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),Di(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(no.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class hc extends no{constructor(){const t=li(hc.getDefaults(),arguments,["low","mid","high"]);super(t),this.name="EQ3",this.output=new ao({context:this.context}),this._internalChannels=[],this.input=this._multibandSplit=new sc({context:this.context,highFrequency:t.highFrequency,lowFrequency:t.lowFrequency}),this._lowGain=new ao({context:this.context,gain:t.low,units:"decibels"}),this._midGain=new ao({context:this.context,gain:t.mid,units:"decibels"}),this._highGain=new ao({context:this.context,gain:t.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),Di(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(no.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),Ai(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class dc extends no{constructor(){const t=li(dc.getDefaults(),arguments,["url","onload"]);super(t),this.name="Convolver",this._convolver=this.context.createConvolver(),this._buffer=new Oi(t.url,(e=>{this.buffer=e,t.onload()})),this.input=new ao({context:this.context}),this.output=new ao({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=t.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(no.getDefaults(),{normalize:!0,onload:Mi})}load(t){return ei(this,void 0,void 0,(function*(){this.buffer=yield this._buffer.load(t)}))}get buffer(){return this._buffer.length?this._buffer:null}set buffer(t){t&&this._buffer.set(t),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const e=this._buffer.get();this._convolver.buffer=e||null}get normalize(){return this._convolver.normalize}set normalize(t){this._convolver.normalize=t}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function pc(){return qi().now()}function fc(){return qi().immediate()}const mc=qi().transport;function gc(){return qi().transport}const _c=qi().destination,vc=qi().destination;function yc(){return qi().destination}const xc=qi().listener;function bc(){return qi().listener}const wc=qi().draw;function Tc(){return qi().draw}const Sc=qi();function kc(){return Oi.loaded()}const Cc=Oi,Dc=wo,Ac=Vo})(),s})()));